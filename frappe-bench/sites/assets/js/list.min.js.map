{"version":3,"file":"list.min.js","sources":["../../../apps/frappe/frappe/public/js/frappe/model/indicator.js","../../../apps/frappe/frappe/public/js/frappe/ui/filters/filter.js","../../../apps/frappe/frappe/public/js/frappe/ui/filters/filter_list.js","../../../apps/frappe/frappe/public/js/frappe/ui/filters/field_select.js","../../../apps/frappe/frappe/public/js/frappe/ui/tags.js","../../../apps/frappe/frappe/public/js/frappe/ui/tag_editor.js","../../../apps/frappe/frappe/public/js/frappe/ui/like.js","../../../apps/frappe/frappe/public/js/frappe/list/base_list.js","../../../apps/frappe/frappe/public/js/frappe/list/bulk_operations.js","../../../apps/frappe/frappe/public/js/frappe/list/list_settings.js","../../../apps/frappe/frappe/public/js/frappe/list/list_view.js","../../../apps/frappe/frappe/public/js/frappe/list/list_factory.js","../../../apps/frappe/frappe/public/js/frappe/list/list_filter.js","../../../apps/frappe/frappe/public/js/frappe/list/list_sidebar.js","../../../apps/frappe/frappe/public/js/frappe/list/list_sidebar_group_by.js","../../../apps/frappe/frappe/public/js/frappe/views/gantt/gantt_view.js","../../../apps/frappe/frappe/public/js/frappe/views/calendar/calendar.js","../../../apps/frappe/frappe/public/js/frappe/views/dashboard/dashboard_view.js","../../../apps/frappe/frappe/public/js/frappe/views/image/image_view.js","../../../apps/frappe/frappe/public/js/frappe/views/kanban/kanban_view.js","../../../apps/frappe/frappe/public/js/frappe/views/inbox/inbox_view.js","../../../apps/frappe/frappe/public/js/frappe/views/file/file_view.js","../../../apps/frappe/frappe/public/js/frappe/views/treeview.js","../../../apps/frappe/frappe/public/js/frappe/views/interaction.js"],"sourcesContent":["// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n\nfrappe.has_indicator = function(doctype) {\n\t// returns true if indicator is present\n\tif(frappe.model.is_submittable(doctype)) {\n\t\treturn true;\n\t} else if((frappe.listview_settings[doctype] || {}).get_indicator\n\t\t|| frappe.workflow.get_state_fieldname(doctype)) {\n\t\treturn true;\n\t} else if(frappe.meta.has_field(doctype, 'enabled')\n\t\t|| frappe.meta.has_field(doctype, 'disabled')) {\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nfrappe.get_indicator = function(doc, doctype) {\n\tif(doc.__unsaved) {\n\t\treturn [__(\"Not Saved\"), \"orange\"];\n\t}\n\n\tif(!doctype) doctype = doc.doctype;\n\n\tvar workflow = frappe.workflow.workflows[doctype];\n\tvar without_workflow = workflow ? workflow['override_status'] : true;\n\n\tvar settings = frappe.listview_settings[doctype] || {};\n\n\tvar is_submittable = frappe.model.is_submittable(doctype),\n\t\tworkflow_fieldname = frappe.workflow.get_state_fieldname(doctype);\n\n\t// workflow\n\tif(workflow_fieldname && !without_workflow) {\n\t\tvar value = doc[workflow_fieldname];\n\t\tif(value) {\n\t\t\tvar colour = \"\";\n\n\t\t\tif(locals[\"Workflow State\"][value] && locals[\"Workflow State\"][value].style) {\n\t\t\t\tvar colour = {\n\t\t\t\t\t\"Success\": \"green\",\n\t\t\t\t\t\"Warning\": \"orange\",\n\t\t\t\t\t\"Danger\": \"red\",\n\t\t\t\t\t\"Primary\": \"blue\",\n\t\t\t\t\t\"Inverse\": \"black\",\n\t\t\t\t\t\"Info\": \"light-blue\",\n\t\t\t\t}[locals[\"Workflow State\"][value].style];\n\t\t\t}\n\t\t\tif(!colour) colour = \"darkgrey\";\n\n\t\t\treturn [__(value), colour, workflow_fieldname + ',=,' + value];\n\t\t}\n\t}\n\n\t// draft if document is submittable\n\tif(is_submittable && doc.docstatus==0 && !settings.has_indicator_for_draft) {\n\t\treturn [__(\"Draft\"), \"red\", \"docstatus,=,0\"];\n\t}\n\n\t// cancelled\n\tif(is_submittable && doc.docstatus==2 && !settings.has_indicator_for_cancelled) {\n\t\treturn [__(\"Cancelled\"), \"red\", \"docstatus,=,2\"];\n\t}\n\n\tif(settings.get_indicator) {\n\t\tvar indicator = settings.get_indicator(doc);\n\t\tif(indicator) return indicator;\n\t}\n\n\t// if submittable\n\tif(is_submittable && doc.docstatus==1) {\n\t\treturn [__(\"Submitted\"), \"blue\", \"docstatus,=,1\"];\n\t}\n\n\t// based on status\n\tif(doc.status) {\n\t\treturn [__(doc.status), frappe.utils.guess_colour(doc.status)];\n\t}\n\n\t// based on enabled\n\tif(frappe.meta.has_field(doctype, 'enabled')) {\n\t\tif(doc.enabled) {\n\t\t\treturn [__('Enabled'), 'blue', 'enabled,=,1'];\n\t\t} else {\n\t\t\treturn [__('Disabled'), 'grey', 'enabled,=,0'];\n\t\t}\n\t}\n\n\t// based on disabled\n\tif(frappe.meta.has_field(doctype, 'disabled')) {\n\t\tif(doc.disabled) {\n\t\t\treturn [__('Disabled'), 'grey', 'disabled,=,1'];\n\t\t} else {\n\t\t\treturn [__('Enabled'), 'blue', 'disabled,=,0'];\n\t\t}\n\t}\n}\n","frappe.ui.Filter = class {\n\tconstructor(opts) {\n\t\t$.extend(this, opts);\n\t\tif (this.value === null || this.value === undefined) {\n\t\t\tthis.value = '';\n\t\t}\n\n\t\tthis.utils = frappe.ui.filter_utils;\n\t\tthis.set_conditions();\n\t\tthis.set_conditions_from_config();\n\t\tthis.make();\n\t}\n\n\tset_conditions() {\n\t\tthis.conditions = [\n\t\t\t['=', __('Equals')],\n\t\t\t['!=', __('Not Equals')],\n\t\t\t['like', __('Like')],\n\t\t\t['not like', __('Not Like')],\n\t\t\t['in', __('In')],\n\t\t\t['not in', __('Not In')],\n\t\t\t['is', __('Is')],\n\t\t\t['>', '>'],\n\t\t\t['<', '<'],\n\t\t\t['>=', '>='],\n\t\t\t['<=', '<='],\n\t\t\t['Between', __('Between')],\n\t\t\t['Timespan', __('Timespan')],\n\t\t];\n\n\t\tthis.nested_set_conditions = [\n\t\t\t['descendants of', __('Descendants Of')],\n\t\t\t['not descendants of', __('Not Descendants Of')],\n\t\t\t['ancestors of', __('Ancestors Of')],\n\t\t\t['not ancestors of', __('Not Ancestors Of')],\n\t\t];\n\n\t\tthis.conditions.push(...this.nested_set_conditions);\n\n\t\tthis.invalid_condition_map = {\n\t\t\tDate: ['like', 'not like'],\n\t\t\tDatetime: ['like', 'not like'],\n\t\t\tData: ['Between', 'Timespan'],\n\t\t\tSelect: ['like', 'not like', 'Between', 'Timespan'],\n\t\t\tLink: ['Between', 'Timespan', '>', '<', '>=', '<='],\n\t\t\tCurrency: ['Between', 'Timespan'],\n\t\t\tColor: ['Between', 'Timespan'],\n\t\t\tCheck: this.conditions.map((c) => c[0]).filter((c) => c !== '='),\n\t\t};\n\t}\n\n\tset_conditions_from_config() {\n\t\tif (frappe.boot.additional_filters_config) {\n\t\t\tthis.filters_config = frappe.boot.additional_filters_config;\n\t\t\tfor (let key of Object.keys(this.filters_config)) {\n\t\t\t\tconst filter = this.filters_config[key];\n\t\t\t\tthis.conditions.push([key, __(filter.label)]);\n\t\t\t\tfor (let fieldtype of Object.keys(this.invalid_condition_map)) {\n\t\t\t\t\tif (!filter.valid_for_fieldtypes.includes(fieldtype)) {\n\t\t\t\t\t\tthis.invalid_condition_map[fieldtype].push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tmake() {\n\t\tthis.filter_edit_area = $(\n\t\t\tfrappe.render_template('edit_filter', {\n\t\t\t\tconditions: this.conditions,\n\t\t\t})\n\t\t).appendTo(this.parent.find('.filter-edit-area'));\n\n\t\tthis.make_select();\n\t\tthis.set_events();\n\t\tthis.setup();\n\t}\n\n\tmake_select() {\n\t\tthis.fieldselect = new frappe.ui.FieldSelect({\n\t\t\tparent: this.filter_edit_area.find('.fieldname-select-area'),\n\t\t\tdoctype: this.parent_doctype,\n\t\t\tfilter_fields: this.filter_fields,\n\t\t\tselect: (doctype, fieldname) => {\n\t\t\t\tthis.set_field(doctype, fieldname);\n\t\t\t},\n\t\t});\n\n\t\tif (this.fieldname) {\n\t\t\tthis.fieldselect.set_value(this.doctype, this.fieldname);\n\t\t}\n\t}\n\n\tset_events() {\n\t\tthis.filter_edit_area.find('a.remove-filter').on('click', () => {\n\t\t\tthis.remove();\n\t\t});\n\n\t\tthis.filter_edit_area.find('.set-filter-and-run').on('click', () => {\n\t\t\tthis.filter_edit_area.removeClass('new-filter');\n\t\t\tthis.on_change();\n\t\t\tthis.update_filter_tag();\n\t\t});\n\n\t\tthis.filter_edit_area.find('.condition').change(() => {\n\t\t\tif (!this.field) return;\n\n\t\t\tlet condition = this.get_condition();\n\t\t\tlet fieldtype = null;\n\n\t\t\tif (['in', 'like', 'not in', 'not like'].includes(condition)) {\n\t\t\t\tfieldtype = 'Data';\n\t\t\t\tthis.add_condition_help(condition);\n\t\t\t} else {\n\t\t\t\tthis.filter_edit_area.find('.filter-description').empty();\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t['Select', 'MultiSelect'].includes(this.field.df.fieldtype) &&\n\t\t\t\t['in', 'not in'].includes(condition)\n\t\t\t) {\n\t\t\t\tfieldtype = 'MultiSelect';\n\t\t\t}\n\n\t\t\tthis.set_field(\n\t\t\t\tthis.field.df.parent,\n\t\t\t\tthis.field.df.fieldname,\n\t\t\t\tfieldtype,\n\t\t\t\tcondition\n\t\t\t);\n\t\t});\n\t}\n\n\tsetup() {\n\t\tconst fieldname = this.fieldname || 'name';\n\t\t// set the field\n\t\treturn this.set_values(this.doctype, fieldname, this.condition, this.value);\n\t}\n\n\tsetup_state(is_new) {\n\t\tlet promise = Promise.resolve();\n\t\tif (is_new) {\n\t\t\tthis.filter_edit_area.addClass('new-filter');\n\t\t} else {\n\t\t\tpromise = this.update_filter_tag();\n\t\t}\n\n\t\tif (this.hidden) {\n\t\t\tpromise.then(() => this.$filter_tag.hide());\n\t\t}\n\t}\n\n\tfreeze() {\n\t\tthis.update_filter_tag();\n\t}\n\n\tupdate_filter_tag() {\n\t\tif (this._filter_value_set) {\n\t\t\treturn this._filter_value_set.then(() => {\n\t\t\t\t!this.$filter_tag ? this.make_tag() : this.set_filter_button_text();\n\t\t\t\tthis.filter_edit_area.hide();\n\t\t\t});\n\t\t} else {\n\t\t\treturn Promise.resolve();\n\t\t}\n\t}\n\n\tremove() {\n\t\tthis.filter_edit_area.remove();\n\t\tthis.$filter_tag && this.$filter_tag.remove();\n\t\tthis.field = null;\n\t\tthis.on_change(true);\n\t}\n\n\tset_values(doctype, fieldname, condition, value) {\n\t\t// presents given (could be via tags!)\n\t\tif (this.set_field(doctype, fieldname) === false) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.field.df.original_type === 'Check') {\n\t\t\tvalue = value == 1 ? 'Yes' : 'No';\n\t\t}\n\t\tif (condition) this.set_condition(condition, true);\n\n\t\t// set value can be asynchronous, so update_filter_tag should happen after field is set\n\t\tthis._filter_value_set = Promise.resolve();\n\n\t\tif (['in', 'not in'].includes(condition) && Array.isArray(value)) {\n\t\t\tvalue = value.join(',');\n\t\t}\n\n\t\tif (Array.isArray(value)) {\n\t\t\tthis._filter_value_set = this.field.set_value(value);\n\t\t} else if (value !== undefined || value !== null) {\n\t\t\tthis._filter_value_set = this.field.set_value((value + '').trim());\n\t\t}\n\t\treturn this._filter_value_set;\n\t}\n\n\tset_field(doctype, fieldname, fieldtype, condition) {\n\t\t// set in fieldname (again)\n\t\tlet cur = {};\n\t\tif (this.field) for (let k in this.field.df) cur[k] = this.field.df[k];\n\n\t\tlet original_docfield = (this.fieldselect.fields_by_name[doctype] || {})[\n\t\t\tfieldname\n\t\t];\n\n\t\tif (!original_docfield) {\n\t\t\tconsole.warn(`Field ${fieldname} is not selectable.`);\n\t\t\tthis.remove();\n\t\t\treturn false;\n\t\t}\n\n\t\tlet df = copy_dict(original_docfield);\n\n\t\t// filter field shouldn't be read only or hidden\n\t\tdf.read_only = 0;\n\t\tdf.hidden = 0;\n\t\tdf.is_filter = true;\n\n\t\tlet c = condition ? condition : this.utils.get_default_condition(df);\n\t\tthis.set_condition(c);\n\n\t\tthis.utils.set_fieldtype(df, fieldtype, this.get_condition());\n\n\t\t// called when condition is changed,\n\t\t// don't change if all is well\n\t\tif (\n\t\t\tthis.field &&\n\t\t\tcur.fieldname == fieldname &&\n\t\t\tdf.fieldtype == cur.fieldtype &&\n\t\t\tdf.parent == cur.parent &&\n\t\t\tdf.options == cur.options\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\t// clear field area and make field\n\t\tthis.fieldselect.selected_doctype = doctype;\n\t\tthis.fieldselect.selected_fieldname = fieldname;\n\n\t\tif (\n\t\t\tthis.filters_config &&\n\t\t\tthis.filters_config[condition] &&\n\t\t\tthis.filters_config[condition].valid_for_fieldtypes.includes(df.fieldtype)\n\t\t) {\n\t\t\tlet args = {};\n\t\t\tif (this.filters_config[condition].depends_on) {\n\t\t\t\tconst field_name = this.filters_config[condition].depends_on;\n\t\t\t\tconst filter_value = this.filter_list.get_filter_value(fieldname);\n\t\t\t\targs[field_name] = filter_value;\n\t\t\t}\n\t\t\tfrappe\n\t\t\t\t.xcall(this.filters_config[condition].get_field, args)\n\t\t\t\t.then(field => {\n\t\t\t\t\tdf.fieldtype = field.fieldtype;\n\t\t\t\t\tdf.options = field.options;\n\t\t\t\t\tdf.fieldname = fieldname;\n\t\t\t\t\tthis.make_field(df, cur.fieldtype);\n\t\t\t\t});\n\t\t} else {\n\t\t\tthis.make_field(df, cur.fieldtype);\n\t\t}\n\t}\n\n\tmake_field(df, old_fieldtype) {\n\t\tlet old_text = this.field ? this.field.get_value() : null;\n\t\tthis.hide_invalid_conditions(df.fieldtype, df.original_type);\n\t\tthis.toggle_nested_set_conditions(df);\n\t\tlet field_area = this.filter_edit_area.find('.filter-field').empty().get(0);\n\t\tlet f = frappe.ui.form.make_control({\n\t\t\tdf: df,\n\t\t\tparent: field_area,\n\t\t\tonly_input: true,\n\t\t});\n\t\tf.refresh();\n\n\t\tthis.field = f;\n\t\tif (old_text && f.fieldtype === old_fieldtype) {\n\t\t\tthis.field.set_value(old_text);\n\t\t}\n\n\t\t// run on enter\n\t\t$(this.field.wrapper)\n\t\t\t.find(':input')\n\t\t\t.keydown(e => {\n\t\t\t\tif (e.which == 13 && this.field.df.fieldtype !== 'MultiSelect') {\n\t\t\t\t\tthis.on_change();\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tget_value() {\n\t\treturn [\n\t\t\tthis.fieldselect.selected_doctype,\n\t\t\tthis.field.df.fieldname,\n\t\t\tthis.get_condition(),\n\t\t\tthis.get_selected_value(),\n\t\t\tthis.hidden,\n\t\t];\n\t}\n\tget_selected_value() {\n\t\treturn this.utils.get_selected_value(this.field, this.get_condition());\n\t}\n\n\tget_condition() {\n\t\treturn this.filter_edit_area.find('.condition').val();\n\t}\n\n\tset_condition(condition, trigger_change = false) {\n\t\tlet $condition_field = this.filter_edit_area.find('.condition');\n\t\t$condition_field.val(condition);\n\t\tif (trigger_change) $condition_field.change();\n\t}\n\n\tmake_tag() {\n\t\tif (!this.field) return;\n\t\tthis.$filter_tag = this.get_filter_tag_element().insertAfter(\n\t\t\tthis.parent.find('.active-tag-filters .clear-filters')\n\t\t);\n\t\tthis.set_filter_button_text();\n\t\tthis.bind_tag();\n\t}\n\n\tbind_tag() {\n\t\tthis.$filter_tag.find('.remove-filter').on('click', this.remove.bind(this));\n\n\t\tlet filter_button = this.$filter_tag.find('.toggle-filter');\n\t\tfilter_button.on('click', () => {\n\t\t\tfilter_button\n\t\t\t\t.closest('.tag-filters-area')\n\t\t\t\t.find('.filter-edit-area')\n\t\t\t\t.show();\n\t\t\tthis.filter_edit_area.toggle();\n\t\t});\n\t}\n\n\tset_filter_button_text() {\n\t\tthis.$filter_tag.find('.toggle-filter').html(this.get_filter_button_text());\n\t}\n\n\tget_filter_button_text() {\n\t\tlet value = this.utils.get_formatted_value(\n\t\t\tthis.field,\n\t\t\tthis.get_selected_value()\n\t\t);\n\t\treturn `${__(this.field.df.label)} ${__(this.get_condition())} ${__(\n\t\t\tvalue\n\t\t)}`;\n\t}\n\n\tget_filter_tag_element() {\n\t\treturn $(`<div class=\"filter-tag btn-group\">\n\t\t\t<button class=\"btn btn-default btn-xs toggle-filter\"\n\t\t\t\ttitle=\"${__('Edit Filter')}\">\n\t\t\t</button>\n\t\t\t<button class=\"btn btn-default btn-xs remove-filter\"\n\t\t\t\ttitle=\"${__('Remove Filter')}\">\n\t\t\t\t<i class=\"fa fa-remove text-muted\"></i>\n\t\t\t</button>\n\t\t</div>`);\n\t}\n\n\tadd_condition_help(condition) {\n\t\tconst description = ['in', 'not in'].includes(condition)\n\t\t\t? __('values separated by commas')\n\t\t\t: __('use % as wildcard');\n\n\t\tthis.filter_edit_area.find('.filter-description').html(description);\n\t}\n\n\thide_invalid_conditions(fieldtype, original_type) {\n\t\tlet invalid_conditions =\n\t\t\tthis.invalid_condition_map[original_type] ||\n\t\t\tthis.invalid_condition_map[fieldtype] ||\n\t\t\t[];\n\n\t\tfor (let condition of this.conditions) {\n\t\t\tthis.filter_edit_area\n\t\t\t\t.find(`.condition option[value=\"${condition[0]}\"]`)\n\t\t\t\t.toggle(!invalid_conditions.includes(condition[0]));\n\t\t}\n\t}\n\n\ttoggle_nested_set_conditions(df) {\n\t\tlet show_condition =\n\t\t\tdf.fieldtype === 'Link' &&\n\t\t\tfrappe.boot.nested_set_doctypes.includes(df.options);\n\t\tthis.nested_set_conditions.forEach((condition) => {\n\t\t\tthis.filter_edit_area\n\t\t\t\t.find(`.condition option[value=\"${condition[0]}\"]`)\n\t\t\t\t.toggle(show_condition);\n\t\t});\n\t}\n};\n\nfrappe.ui.filter_utils = {\n\tget_formatted_value(field, value) {\n\t\tif (field.df.fieldname === 'docstatus') {\n\t\t\tvalue = { 0: 'Draft', 1: 'Submitted', 2: 'Cancelled' }[value] || value;\n\t\t} else if (field.df.original_type === 'Check') {\n\t\t\tvalue = { 0: 'No', 1: 'Yes' }[cint(value)];\n\t\t}\n\t\treturn frappe.format(value, field.df, { only_value: 1 });\n\t},\n\n\tget_selected_value(field, condition) {\n\t\tlet val = field.get_value();\n\n\t\tif (typeof val === 'string') {\n\t\t\tval = strip(val);\n\t\t}\n\n\t\tif (condition == 'is' && !val) {\n\t\t\tval = field.df.options[0].value;\n\t\t}\n\n\t\tif (field.df.original_type == 'Check') {\n\t\t\tval = val == 'Yes' ? 1 : 0;\n\t\t}\n\n\t\tif (condition.indexOf('like', 'not like') !== -1) {\n\t\t\t// automatically append wildcards\n\t\t\tif (val && !(val.startsWith('%') || val.endsWith('%'))) {\n\t\t\t\tval = '%' + val + '%';\n\t\t\t}\n\t\t} else if (in_list(['in', 'not in'], condition)) {\n\t\t\tif (val) {\n\t\t\t\tval = val.split(',').map((v) => strip(v));\n\t\t\t}\n\t\t}\n\t\tif (val === '%') {\n\t\t\tval = '';\n\t\t}\n\n\t\treturn val;\n\t},\n\n\tget_default_condition(df) {\n\t\tif (df.fieldtype == 'Data') {\n\t\t\treturn 'like';\n\t\t} else if (df.fieldtype == 'Date' || df.fieldtype == 'Datetime') {\n\t\t\treturn 'Between';\n\t\t} else {\n\t\t\treturn '=';\n\t\t}\n\t},\n\n\tset_fieldtype(df, fieldtype, condition) {\n\t\t// reset\n\t\tif (df.original_type) df.fieldtype = df.original_type;\n\t\telse df.original_type = df.fieldtype;\n\n\t\tdf.description = '';\n\t\tdf.reqd = 0;\n\t\tdf.ignore_link_validation = true;\n\n\t\t// given\n\t\tif (fieldtype) {\n\t\t\tdf.fieldtype = fieldtype;\n\t\t\treturn;\n\t\t}\n\n\t\t// scrub\n\t\tif (df.fieldname == 'docstatus') {\n\t\t\tdf.fieldtype = 'Select',\n\t\t\tdf.options = [\n\t\t\t\t{ value: 0, label: __('Draft') },\n\t\t\t\t{ value: 1, label: __('Submitted') },\n\t\t\t\t{ value: 2, label: __('Cancelled') },\n\t\t\t];\n\t\t} else if (df.fieldtype == 'Check') {\n\t\t\tdf.fieldtype = 'Select';\n\t\t\tdf.options = 'No\\nYes';\n\t\t} else if (\n\t\t\t[\n\t\t\t\t'Text',\n\t\t\t\t'Small Text',\n\t\t\t\t'Text Editor',\n\t\t\t\t'Code',\n\t\t\t\t'Tag',\n\t\t\t\t'Comments',\n\t\t\t\t'Dynamic Link',\n\t\t\t\t'Read Only',\n\t\t\t\t'Assign',\n\t\t\t].indexOf(df.fieldtype) != -1\n\t\t) {\n\t\t\tdf.fieldtype = 'Data';\n\t\t} else if (\n\t\t\tdf.fieldtype == 'Link' &&\n\t\t\t[\n\t\t\t\t'=',\n\t\t\t\t'!=',\n\t\t\t\t'descendants of',\n\t\t\t\t'ancestors of',\n\t\t\t\t'not descendants of',\n\t\t\t\t'not ancestors of',\n\t\t\t].indexOf(condition) == -1\n\t\t) {\n\t\t\tdf.fieldtype = 'Data';\n\t\t}\n\t\tif (\n\t\t\tdf.fieldtype === 'Data' &&\n\t\t\t(df.options || '').toLowerCase() === 'email'\n\t\t) {\n\t\t\tdf.options = null;\n\t\t}\n\t\tif (\n\t\t\tcondition == 'Between' &&\n\t\t\t(df.fieldtype == 'Date' || df.fieldtype == 'Datetime')\n\t\t) {\n\t\t\tdf.fieldtype = 'DateRange';\n\t\t}\n\t\tif (\n\t\t\tcondition == 'Timespan' &&\n\t\t\t['Date', 'Datetime', 'DateRange', 'Select'].includes(df.fieldtype)\n\t\t) {\n\t\t\tdf.fieldtype = 'Select';\n\t\t\tdf.options = this.get_timespan_options(['Last', 'Today', 'This', 'Next']);\n\t\t}\n\t\tif (condition === 'is') {\n\t\t\tdf.fieldtype = 'Select';\n\t\t\tdf.options = [\n\t\t\t\t{ label: __('Set'), value: 'set' },\n\t\t\t\t{ label: __('Not Set'), value: 'not set' },\n\t\t\t];\n\t\t}\n\t\treturn;\n\t},\n\n\tget_timespan_options(periods) {\n\t\tconst period_map = {\n\t\t\tLast: ['Week', 'Month', 'Quarter', '6 months', 'Year'],\n\t\t\tToday: null,\n\t\t\tThis: ['Week', 'Month', 'Quarter', 'Year'],\n\t\t\tNext: ['Week', 'Month', 'Quarter', '6 months', 'Year'],\n\t\t};\n\t\tlet options = [];\n\t\tperiods.forEach((period) => {\n\t\t\tif (period_map[period]) {\n\t\t\t\tperiod_map[period].forEach((p) => {\n\t\t\t\t\toptions.push({\n\t\t\t\t\t\tlabel: `${period} ${p}`,\n\t\t\t\t\t\tvalue: `${period.toLowerCase()} ${p.toLowerCase()}`,\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\toptions.push({\n\t\t\t\t\tlabel: __(period),\n\t\t\t\t\tvalue: `${period.toLowerCase()}`,\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\treturn options;\n\t},\n};\n","frappe.ui.FilterGroup = class {\n\tconstructor(opts) {\n\t\t$.extend(this, opts);\n\t\tthis.wrapper = this.parent;\n\t\tthis.filters = [];\n\t\tthis.make();\n\t\twindow.fltr = this;\n\t}\n\n\tmake() {\n\t\tthis.wrapper.append(this.get_container_template());\n\t\tthis.set_events();\n\t}\n\n\ttoggle_clear_filter() {\n\t\tlet clear_filter_button = this.wrapper.find('.clear-filters');\n\n\t\tif (this.filters.length == 0) {\n\t\t\tclear_filter_button.hide();\n\t\t} else {\n\t\t\tclear_filter_button.show();\n\t\t}\n\t}\n\tset_events() {\n\t\tthis.wrapper.find('.add-filter').on('click', () => {\n\t\t\tthis.add_filter(this.doctype, 'name')\n\t\t\t\t.then(this.toggle_clear_filter());\n\n\t\t});\n\t\tthis.wrapper.find('.clear-filters').on('click', () => {\n\t\t\tthis.clear_filters();\n\t\t});\n\t}\n\n\tadd_filters(filters) {\n\t\tlet promises = [];\n\n\t\tfor (const filter of filters) {\n\t\t\tpromises.push(() => this.add_filter(...filter));\n\t\t}\n\n\t\tpromises.push(() => this.toggle_clear_filter());\n\n\t\treturn frappe.run_serially(promises);\n\t}\n\n\tadd_filter(doctype, fieldname, condition, value, hidden) {\n\t\tif (!fieldname) return Promise.resolve();\n\t\t// adds a new filter, returns true if filter has been added\n\n\t\t// {}: Add in page filter by fieldname if exists ('=' => 'like')\n\n\t\tif(!this.validate_args(doctype, fieldname)) return false;\n\t\tconst is_new_filter = arguments.length < 2;\n\t\tif (is_new_filter && this.wrapper.find(\".new-filter:visible\").length) {\n\t\t\t// only allow 1 new filter at a time!\n\t\t\treturn Promise.resolve();\n\t\t} else {\n\t\t\tlet args = [doctype, fieldname, condition, value, hidden];\n\t\t\tconst promise = this.push_new_filter(args, is_new_filter);\n\t\t\treturn (promise && promise.then) ? promise : Promise.resolve();\n\t\t}\n\t}\n\n\tvalidate_args(doctype, fieldname) {\n\t\tif (doctype && fieldname\n\t\t\t&& !frappe.meta.has_field(doctype, fieldname)\n\t\t\t&& !frappe.model.std_fields_list.includes(fieldname)) {\n\n\t\t\tfrappe.throw(__(\"Invalid filter: {0}\", [fieldname.bold()]));\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tpush_new_filter(args, is_new_filter=false) {\n\t\t// args: [doctype, fieldname, condition, value]\n\t\tif(this.filter_exists(args)) return;\n\n\t\t// {}: Clear page filter fieldname field\n\n\t\tlet filter = this._push_new_filter(...args);\n\n\t\tif (filter && filter.value) {\n\t\t\tfilter.setup_state(is_new_filter);\n\t\t\treturn filter._filter_value_set; // internal promise\n\t\t}\n\t}\n\n\t_push_new_filter(doctype, fieldname, condition, value, hidden = false) {\n\t\tlet args = {\n\t\t\tparent: this.wrapper,\n\t\t\tparent_doctype: this.doctype,\n\t\t\tdoctype: doctype,\n\t\t\tfieldname: fieldname,\n\t\t\tcondition: condition,\n\t\t\tvalue: value,\n\t\t\thidden: hidden,\n\t\t\ton_change: (update) => {\n\t\t\t\tif(update) this.update_filters();\n\t\t\t\tthis.on_change();\n\t\t\t},\n\t\t\tfilter_items: (doctype, fieldname) => {\n\t\t\t\treturn !this.filter_exists([doctype, fieldname]);\n\t\t\t},\n\t\t\tfilter_list: this.base_list || this,\n\t\t};\n\t\tlet filter = new frappe.ui.Filter(args);\n\t\tthis.filters.push(filter);\n\t\treturn filter;\n\t}\n\n\tget_filter_value(fieldname) {\n\t\tlet filter_obj = this.filters.find(f => f.fieldname == fieldname) || {};\n\t\treturn filter_obj.value;\n\t}\n\n\tfilter_exists(filter_value) {\n\t\t// filter_value of form: [doctype, fieldname, condition, value]\n\t\tlet exists = false;\n\t\tthis.filters.filter(f => f.field).map(f => {\n\t\t\tlet f_value = f.get_value();\n\t\t\tif (filter_value.length === 2) {\n\t\t\t\texists = filter_value[0] === f_value[0] && filter_value[1] === f_value[1];\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet value = filter_value[3];\n\t\t\tlet equal = frappe.utils.arrays_equal;\n\n\t\t\tif(equal(f_value.slice(0, 4), filter_value.slice(0, 4)) || (Array.isArray(value) && equal(value, f_value[3]))) {\n\t\t\t\texists = true;\n\t\t\t}\n\t\t});\n\t\treturn exists;\n\t}\n\n\tget_filters() {\n\t\treturn this.filters.filter(f => f.field).map(f => {\n\t\t\treturn f.get_value();\n\t\t});\n\t\t// {}: this.list.update_standard_filters(values);\n\t}\n\n\tupdate_filters() {\n\t\tthis.filters = this.filters.filter(f => f.field); // remove hidden filters\n\t\tthis.toggle_clear_filter();\n\t}\n\n\tclear_filters() {\n\t\tthis.filters.map(f => f.remove(true));\n\t\t// {}: Clear page filters, .date-range-picker (called list run())\n\t\tthis.filters = [];\n\t}\n\n\tget_filter(fieldname) {\n\t\treturn this.filters.filter(f => {\n\t\t\treturn (f.field && f.field.df.fieldname==fieldname);\n\t\t})[0];\n\t}\n\n\tget_container_template() {\n\t\treturn $(`<div class=\"tag-filters-area\">\n\t\t\t<div class=\"active-tag-filters\">\n\t\t\t\t<button class=\"btn btn-default btn-xs filter-button text-muted add-filter\">\n\t\t\t\t\t${__(\"Add Filter\")}\n\t\t\t\t</button><button class=\"btn btn-default btn-xs filter-button text-muted clear-filters\" style=\"display: none;\">\n\t\t\t\t\t${__(\"Clear Filters\")}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"filter-edit-area\"></div>`);\n\t}\n\n\tget_filters_as_object() {\n\t\tlet filters = this.get_filters().reduce((acc, filter) => {\n\t\t\treturn Object.assign(acc, {\n\t\t\t\t[filter[1]]: [filter[2], filter[3]]\n\t\t\t});\n\t\t}, {});\n\t\treturn filters;\n\t}\n\n\tadd_filters_to_filter_group(filters) {\n\n\t\tfilters.forEach(filter => {\n\t\t\tthis.add_filter(filter[0], filter[1], filter[2], filter[3]);\n\t\t});\n\t}\n};\n","// <select> widget with all fields of a doctype as options\nfrappe.ui.FieldSelect = Class.extend({\n\t// opts parent, doctype, filter_fields, with_blank, select\n\tinit(opts) {\n\t\tvar me = this;\n\t\t$.extend(this, opts);\n\t\tthis.fields_by_name = {};\n\t\tthis.options = [];\n\t\tthis.$input = $('<input class=\"form-control\">')\n\t\t\t.appendTo(this.parent)\n\t\t\t.on(\"click\", function () { $(this).select(); });\n\t\tthis.select_input = this.$input.get(0);\n\t\tthis.awesomplete = new Awesomplete(this.select_input, {\n\t\t\tminChars: 0,\n\t\t\tmaxItems: 99,\n\t\t\tautoFirst: true,\n\t\t\tlist: me.options,\n\t\t\titem(item) {\n\t\t\t\treturn $(repl('<li class=\"filter-field-select\"><p>%(label)s</p></li>', item))\n\t\t\t\t\t.data(\"item.autocomplete\", item)\n\t\t\t\t\t.get(0);\n\t\t\t}\n\t\t});\n\t\tthis.$input.on(\"awesomplete-select\", function(e) {\n\t\t\tvar o = e.originalEvent;\n\t\t\tvar value = o.text.value;\n\t\t\tvar item = me.awesomplete.get_item(value);\n\t\t\tme.selected_doctype = item.doctype;\n\t\t\tme.selected_fieldname = item.fieldname;\n\t\t\tif(me.select) me.select(item.doctype, item.fieldname);\n\t\t});\n\t\tthis.$input.on(\"awesomplete-selectcomplete\", function(e) {\n\t\t\tvar o = e.originalEvent;\n\t\t\tvar value = o.text.value;\n\t\t\tvar item = me.awesomplete.get_item(value);\n\t\t\tme.$input.val(item.label);\n\t\t});\n\n\t\tif(this.filter_fields) {\n\t\t\tfor(var i in this.filter_fields)\n\t\t\t\tthis.add_field_option(this.filter_fields[i]);\n\t\t} else {\n\t\t\tthis.build_options();\n\t\t}\n\t\tthis.set_value(this.doctype, \"name\");\n\t},\n\tget_value() {\n\t\treturn this.selected_doctype ? this.selected_doctype + \".\" + this.selected_fieldname : null;\n\t},\n\tval(value) {\n\t\tif(value===undefined) {\n\t\t\treturn this.get_value();\n\t\t} else {\n\t\t\tthis.set_value(value);\n\t\t}\n\t},\n\tclear() {\n\t\tthis.selected_doctype = null;\n\t\tthis.selected_fieldname = null;\n\t\tthis.$input.val(\"\");\n\t},\n\tset_value(doctype, fieldname) {\n\t\tvar me = this;\n\t\tthis.clear();\n\t\tif(!doctype) return;\n\n\t\t// old style\n\t\tif(doctype.indexOf(\".\")!==-1) {\n\t\t\tvar parts = doctype.split(\".\");\n\t\t\tdoctype = parts[0];\n\t\t\tfieldname = parts[1];\n\t\t}\n\n\t\t$.each(this.options, function(i, v) {\n\t\t\tif(v.doctype===doctype && v.fieldname===fieldname) {\n\t\t\t\tme.selected_doctype = doctype;\n\t\t\t\tme.selected_fieldname = fieldname;\n\t\t\t\tme.$input.val(v.label);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t},\n\tbuild_options() {\n\t\tvar me = this;\n\t\tme.table_fields = [];\n\t\tvar std_filters = $.map(frappe.model.std_fields, function(d) {\n\t\t\tvar opts = {parent: me.doctype};\n\t\t\tif(d.fieldname==\"name\") opts.options = me.doctype;\n\t\t\treturn $.extend(copy_dict(d), opts);\n\t\t});\n\n\t\t// add parenttype column\n\t\tvar doctype_obj = locals['DocType'][me.doctype];\n\t\tif(doctype_obj && cint(doctype_obj.istable)) {\n\t\t\tstd_filters = std_filters.concat([{\n\t\t\t\tfieldname: 'parent',\n\t\t\t\tfieldtype: 'Data',\n\t\t\t\tlabel: 'Parent',\n\t\t\t\tparent: me.doctype,\n\t\t\t}]);\n\t\t}\n\n\t\t// blank\n\t\tif(this.with_blank) {\n\t\t\tthis.options.push({\n\t\t\t\tlabel:\"\",\n\t\t\t\tvalue:\"\",\n\t\t\t});\n\t\t}\n\n\t\t// main table\n\t\tvar main_table_fields = std_filters.concat(frappe.meta.docfield_list[me.doctype]);\n\t\t$.each(frappe.utils.sort(main_table_fields, \"label\", \"string\"), function(i, df) {\n\t\t\t// show fields where user has read access and if report hide flag is not set\n\t\t\tif(frappe.perm.has_perm(me.doctype, df.permlevel, \"read\"))\n\t\t\t\tme.add_field_option(df);\n\t\t});\n\n\t\t// child tables\n\t\t$.each(me.table_fields, function(i, table_df) {\n\t\t\tif(table_df.options) {\n\t\t\t\tlet child_table_fields = [].concat(frappe.meta.docfield_list[table_df.options]);\n\n\t\t\t\tif (table_df.fieldtype === \"Table MultiSelect\") {\n\t\t\t\t\tconst link_field = frappe.meta.get_docfields(table_df.options)\n\t\t\t\t\t\t.find(df => df.fieldtype === 'Link');\n\t\t\t\t\tchild_table_fields = link_field ? [link_field] : [];\n\t\t\t\t}\n\n\t\t\t\t$.each(frappe.utils.sort(child_table_fields, \"label\", \"string\"), function(i, df) {\n\t\t\t\t\t// show fields where user has read access and if report hide flag is not set\n\t\t\t\t\tif(frappe.perm.has_perm(me.doctype, df.permlevel, \"read\"))\n\t\t\t\t\t\tme.add_field_option(df);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t},\n\n\tadd_field_option(df) {\n\t\tlet me = this;\n\n\t\tif (df.fieldname == 'docstatus' && !frappe.model.is_submittable(me.doctype))\n\t\t\treturn;\n\n\t\tif (frappe.model.table_fields.includes(df.fieldtype)) {\n\t\t\tme.table_fields.push(df);\n\t\t\treturn;\n\t\t}\n\n\t\tlet label = null;\n\t\tlet table = null;\n\n\t\tif(me.doctype && df.parent==me.doctype) {\n\t\t\tlabel = __(df.label);\n\t\t\ttable = me.doctype;\n\t\t} else {\n\t\t\tlabel = __(df.label) + ' (' + __(df.parent) + ')';\n\t\t\ttable = df.parent;\n\t\t}\n\n\t\tif(frappe.model.no_value_type.indexOf(df.fieldtype) == -1 &&\n\t\t\t!(me.fields_by_name[df.parent] && me.fields_by_name[df.parent][df.fieldname])) {\n\t\t\tthis.options.push({\n\t\t\t\tlabel: label,\n\t\t\t\tvalue: table + \".\" + df.fieldname,\n\t\t\t\tfieldname: df.fieldname,\n\t\t\t\tdoctype: df.parent\n\t\t\t});\n\t\t\tif(!me.fields_by_name[df.parent]) me.fields_by_name[df.parent] = {};\n\t\t\tme.fields_by_name[df.parent][df.fieldname] = df;\n\t\t}\n\t},\n});\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.ui.Tags = class {\n\tconstructor({\n\t\tparent, placeholder, tagsList,\n\t\tonTagAdd,\n\t\tonTagRemove,\n\t\tonTagClick,\n\t\tonChange\n\t}) {\n\t\tthis.tagsList = tagsList || [];\n\t\tthis.onTagAdd = onTagAdd;\n\t\tthis.onTagRemove = onTagRemove;\n\t\tthis.onTagClick = onTagClick;\n\t\tthis.onChange = onChange;\n\n\t\tthis.setup(parent, placeholder);\n\t}\n\n\tsetup(parent, placeholder) {\n\t\tthis.$wrapper = $(`<div class=\"tags-wrapper\"></div>`).appendTo(parent);\n\t\tthis.$ul = $(`<ul class=\"tags-list\"></ul>`).appendTo(this.$wrapper);\n\t\tthis.$input = $(`<input class=\"tags-input\"></input>`);\n\n\t\tthis.$inputWrapper = this.getListElement(this.$input);\n\t\tthis.$placeholder = this.getListElement($(`<span class=\"tags-placeholder text-muted\">${placeholder}</span>`));\n\t\tthis.$inputWrapper.appendTo(this.$ul);\n\t\tthis.$placeholder.appendTo(this.$ul);\n\n\t\tthis.deactivate();\n\t\tthis.bind();\n\t\tthis.boot();\n\t}\n\n\tbind() {\n\t\tconst me = this;\n\t\tconst select_tag = function() {\n\t\t\tconst tagValue = frappe.utils.xss_sanitise(me.$input.val());\n\t\t\tme.addTag(tagValue);\n\t\t\tme.$input.val('');\n\t\t}\n\n\t\tthis.$input.keypress((e) => {\n\t\t\tif (e.which == 13 || e.keyCode == 13) select_tag();\n\t\t});\n\t\tthis.$input.focusout(select_tag);\n\n\t\tthis.$input.on('blur', () => {\n\t\t\tthis.deactivate();\n\t\t});\n\n\t\tthis.$placeholder.on('click', () => {\n\t\t\tthis.activate();\n\t\t\tthis.$input.focus(); // focus only when clicked\n\t\t});\n\t}\n\n\tboot() {\n\t\tthis.addTags(this.tagsList);\n\t}\n\n\tactivate() {\n\t\tthis.$placeholder.hide();\n\t\tthis.$inputWrapper.show();\n\t}\n\n\tdeactivate() {\n\t\tthis.$inputWrapper.hide();\n\t\tthis.$placeholder.show();\n\t}\n\n\taddTag(label) {\n\t\tif(label && label!== '' && !this.tagsList.includes(label)) {\n\t\t\tlet $tag = this.getTag(label);\n\t\t\tthis.getListElement($tag).insertBefore(this.$inputWrapper);\n\t\t\tthis.tagsList.push(label);\n\t\t\tthis.onTagAdd && this.onTagAdd(label);\n\t\t}\n\t}\n\n\tremoveTag(label) {\n\t\tlabel = frappe.utils.xss_sanitise(label);\n\t\tif(this.tagsList.includes(label)) {\n\t\t\tthis.tagsList.splice(this.tagsList.indexOf(label), 1);\n\t\t\tthis.onTagRemove && this.onTagRemove(label);\n\t\t}\n\t}\n\n\taddTags(labels) {\n\t\tlabels.map(this.addTag.bind(this));\n\t}\n\n\tclearTags() {\n\t\tthis.$ul.find('.frappe-tag').remove();\n\t\tthis.tagsList = [];\n\t}\n\n\tgetListElement($element, className) {\n\t\tlet $li = $(`<li class=\"tags-list-item ${className}\"></li>`);\n\t\t$element.appendTo($li);\n\t\treturn $li;\n\t}\n\n\tgetTag(label) {\n\t\tlet $tag = $(`<div class=\"frappe-tag btn-group\" data-tag-label=\"${label}\">\n\t\t\t<button class=\"btn btn-default btn-xs toggle-tag\"\n\t\t\t\ttitle=\"${ __(\"toggle Tag\") }\"\n\t\t\t\tdata-tag-label=\"${label}\">#${label}\n\t\t\t</button>\n\t\t\t<button class=\"btn btn-default btn-xs remove-tag\"\n\t\t\t\ttitle=\"${ __(\"Remove Tag\") }\"\n\t\t\t\tdata-tag-label=\"${label}\">\n\t\t\t\t<i class=\"fa fa-remove text-muted\"></i>\n\t\t\t</button></div>`);\n\n\t\tlet $searchTag = $tag.find(\".toggle-tag\");\n\t\tlet $removeTag = $tag.find(\".remove-tag\");\n\n\t\t$searchTag.on(\"click\", () => {\n\t\t\tfrappe.searchdialog.search.init_search(\"#\".concat($searchTag.attr('data-tag-label')), \"tags\");\n\t\t});\n\n\t\t$removeTag.on(\"click\", () => {\n\t\t\tthis.removeTag($removeTag.attr('data-tag-label'));\n\t\t\t$removeTag.closest('.tags-list-item').remove();\n\t\t});\n\n\t\tif(this.onTagClick) {\n\t\t\tlet $toggle_tag = $tag.find(\".toggle-tag\");\n\t\t\t$toggle_tag.on(\"click\", () => {\n\t\t\t\tthis.onTagClick($toggle_tag.attr('data-tag-label'));\n\t\t\t});\n\t\t}\n\n\t\treturn $tag;\n\t}\n}\n","frappe.ui.TagEditor = Class.extend({\n\tinit: function(opts) {\n\t\t/* docs:\n\t\tArguments\n\n\t\t- parent\n\t\t- user_tags\n\t\t- doctype\n\t\t- docname\n\t\t*/\n\t\t$.extend(this, opts);\n\n\t\tthis.setup_tags();\n\n\t\tif (!this.user_tags) {\n\t\t\tthis.user_tags = \"\";\n\t\t}\n\t\tthis.initialized = true;\n\t\tthis.refresh(this.user_tags);\n\t},\n\tsetup_tags: function() {\n\t\tvar me = this;\n\n\t\t// hidden form, does not have parent\n\t\tif (!this.parent) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.wrapper = $('<div class=\"tag-line\" style=\"position: relative\">').appendTo(this.parent);\n\t\tif(!this.wrapper.length) return;\n\n\t\tthis.tags = new frappe.ui.Tags({\n\t\t\tparent: this.wrapper,\n\t\t\tplaceholder: __(\"Add a tag ...\"),\n\t\t\tonTagAdd: (tag) => {\n\t\t\t\tif(me.initialized && !me.refreshing) {\n\t\t\t\t\treturn frappe.call({\n\t\t\t\t\t\tmethod: \"frappe.desk.doctype.tag.tag.add_tag\",\n\t\t\t\t\t\targs: me.get_args(tag),\n\t\t\t\t\t\tcallback: function(r) {\n\t\t\t\t\t\t\tvar user_tags = me.user_tags ? me.user_tags.split(\",\") : [];\n\t\t\t\t\t\t\tuser_tags.push(tag)\n\t\t\t\t\t\t\tme.user_tags = user_tags.join(\",\");\n\t\t\t\t\t\t\tme.on_change && me.on_change(me.user_tags);\n\t\t\t\t\t\t\tfrappe.tags.utils.fetch_tags();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\tonTagRemove: (tag) => {\n\t\t\t\tif(!me.refreshing) {\n\t\t\t\t\treturn frappe.call({\n\t\t\t\t\t\tmethod: \"frappe.desk.doctype.tag.tag.remove_tag\",\n\t\t\t\t\t\targs: me.get_args(tag),\n\t\t\t\t\t\tcallback: function(r) {\n\t\t\t\t\t\t\tvar user_tags = me.user_tags.split(\",\");\n\t\t\t\t\t\t\tuser_tags.splice(user_tags.indexOf(tag), 1);\n\t\t\t\t\t\t\tme.user_tags = user_tags.join(\",\");\n\t\t\t\t\t\t\tme.on_change && me.on_change(me.user_tags);\n\t\t\t\t\t\t\tfrappe.tags.utils.fetch_tags();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tthis.setup_awesomplete();\n\t\tthis.setup_complete = true;\n\t},\n\tsetup_awesomplete: function() {\n\t\tvar me = this;\n\t\tvar $input = this.wrapper.find(\"input.tags-input\");\n\t\tvar input = $input.get(0);\n\t\tthis.awesomplete = new Awesomplete(input, {\n\t\t\tminChars: 0,\n\t\t\tmaxItems: 99,\n\t\t\tlist: []\n\t\t});\n\t\t$input.on(\"awesomplete-open\", function(e){\n\t\t\t$input.attr('state', 'open');\n\t\t});\n\t\t$input.on(\"awesomplete-close\", function(e){\n\t\t\t$input.attr('state', 'closed');\n\t\t});\n\t\t$input.on(\"input\", function(e) {\n\t\t\tvar value = e.target.value;\n\t\t\tfrappe.call({\n\t\t\t\tmethod: \"frappe.desk.doctype.tag.tag.get_tags\",\n\t\t\t\targs:{\n\t\t\t\t\tdoctype: me.frm.doctype,\n\t\t\t\t\ttxt: value.toLowerCase(),\n\t\t\t\t},\n\t\t\t\tcallback: function(r) {\n\t\t\t\t\tme.awesomplete.list = r.message;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\t$input.on(\"focus\", function(e) {\n\t\t\tif($input.attr('state') != 'open') {\n\t\t\t\t$input.trigger(\"input\");\n\t\t\t}\n\t\t});\n\t},\n\tget_args: function(tag) {\n\t\treturn {\n\t\t\ttag: tag,\n\t\t\tdt: this.frm.doctype,\n\t\t\tdn: this.frm.docname,\n\t\t}\n\t},\n\trefresh: function(user_tags) {\n\t\tvar me = this;\n\t\tif (!this.initialized || !this.setup_complete || this.refreshing) return;\n\n\t\tme.refreshing = true;\n\t\ttry {\n\t\t\tme.tags.clearTags();\n\t\t\tif(user_tags) {\n\t\t\t\tme.user_tags = user_tags;\n\t\t\t\tme.tags.addTags(user_tags.split(','));\n\t\t\t}\n\t\t} catch(e) {\n\t\t\tme.refreshing = false;\n\t\t\t// wtf bug\n\t\t\tsetTimeout( function() { me.refresh(); }, 100);\n\t\t}\n\t\tme.refreshing = false;\n\n\t}\n})\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.ui.is_liked = function(doc) {\n\tvar liked = frappe.ui.get_liked_by(doc);\n\treturn liked.indexOf(frappe.session.user)===-1 ? false : true;\n}\n\nfrappe.ui.get_liked_by = function(doc) {\n\tvar liked = doc._liked_by;\n\tif(liked) {\n\t\tliked = JSON.parse(liked);\n\t}\n\n\treturn liked || [];\n}\n\nfrappe.ui.toggle_like = function($btn, doctype, name, callback) {\n\tvar add = $btn.hasClass(\"not-liked\") ? \"Yes\" : \"No\";\n\t// disable click\n\t$btn.css('pointer-events', 'none');\n\n\tfrappe.call({\n\t\tmethod: \"frappe.desk.like.toggle_like\",\n\t\tquiet: true,\n\t\targs: {\n\t\t\tdoctype: doctype,\n\t\t\tname: name,\n\t\t\tadd: add,\n\t\t},\n\t\tcallback: function(r) {\n\t\t\t// renable click\n\t\t\t$btn.css('pointer-events', 'auto');\n\n\t\t\tif(!r.exc) {\n\t\t\t\t// update in all local-buttons\n\t\t\t\tvar action_buttons = $('.like-action[data-name=\"'+ name.replace(/\"/g, '\\\"')\n\t\t\t\t\t+'\"][data-doctype=\"'+ doctype.replace(/\"/g, '\\\"')+'\"]');\n\n\t\t\t\tif(add===\"Yes\") {\n\t\t\t\t\taction_buttons.removeClass(\"not-liked text-extra-muted\");\n\t\t\t\t} else {\n\t\t\t\t\taction_buttons.addClass(\"not-liked text-extra-muted\");\n\t\t\t\t}\n\n\t\t\t\t// update in locals (form)\n\t\t\t\tvar doc = locals[doctype] && locals[doctype][name];\n\t\t\t\tif(doc) {\n\t\t\t\t\tvar liked_by = JSON.parse(doc._liked_by || \"[]\"),\n\t\t\t\t\t\tidx = liked_by.indexOf(frappe.session.user);\n\t\t\t\t\tif(add===\"Yes\") {\n\t\t\t\t\t\tif(idx===-1)\n\t\t\t\t\t\t\tliked_by.push(frappe.session.user);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif(idx!==-1) {\n\t\t\t\t\t\t\tliked_by = liked_by.slice(0,idx).concat(liked_by.slice(idx+1))\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tdoc._liked_by = JSON.stringify(liked_by);\n\t\t\t\t}\n\n\t\t\t\tif(callback) {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n};\n\nfrappe.ui.click_toggle_like = function() {\n\tvar $btn = $(this);\n\tvar $count = $btn.siblings(\".likes-count\");\n\tvar not_liked = $btn.hasClass(\"not-liked\");\n\tvar doctype = $btn.attr(\"data-doctype\");\n\tvar name = $btn.attr(\"data-name\");\n\n\tfrappe.ui.toggle_like($btn, doctype, name, function() {\n\t\tif (not_liked) {\n\t\t\t$count.text(cint($count.text()) + 1);\n\t\t} else {\n\t\t\t$count.text(cint($count.text()) - 1);\n\t\t}\n\t});\n\n\treturn false;\n}\n\nfrappe.ui.setup_like_popover = ($parent, selector, check_not_liked=true) => {\n\tif (frappe.dom.is_touchscreen()) {\n\t\treturn;\n\t}\n\n\t$parent.on('mouseover', selector, function() {\n\t\tconst target_element = $(this);\n\t\ttarget_element.popover({\n\t\t\tanimation: true,\n\t\t\tplacement: 'right',\n\t\t\ttrigger: 'manual',\n\t\t\ttemplate:`<div class=\"liked-by-popover popover\">\n\t\t\t\t<div class=\"arrow\"></div>\n\t\t\t\t<div class=\"popover-content\"></div>\n\t\t\t</div>`,\n\t\t\tcontent: () => {\n\t\t\t\tlet liked_by = target_element.attr('data-liked-by');\n\t\t\t\tliked_by = liked_by ? decodeURI(liked_by) : '[]';\n\t\t\t\tliked_by = JSON.parse(liked_by);\n\n\t\t\t\tconst user = frappe.session.user;\n\t\t\t\t// hack\n\t\t\t\tif (check_not_liked) {\n\t\t\t\t\tif (target_element.find(\".not-liked\").length) {\n\t\t\t\t\t\tif (liked_by.indexOf(user)!==-1) {\n\t\t\t\t\t\t\tliked_by.splice(liked_by.indexOf(user), 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (liked_by.indexOf(user)===-1) {\n\t\t\t\t\t\t\tliked_by.push(user);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!liked_by.length) {\n\t\t\t\t\treturn \"\";\n\t\t\t\t}\n\n\t\t\t\tlet liked_by_list = $(`<ul class=\"list-unstyled\"></ul>`);\n\n\t\t\t\t// to show social profile of the user\n\t\t\t\tlet link_base = '#social/profile/';\n\n\t\t\t\tliked_by.forEach(user => {\n\t\t\t\t\t// append user list item\n\t\t\t\t\tliked_by_list.append(`\n\t\t\t\t\t\t<li data-user=${user}>${frappe.avatar(user)}\n\t\t\t\t\t\t\t<span>${frappe.user.full_name(user)}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t`);\n\t\t\t\t});\n\n\t\t\t\tliked_by_list.children('li').click(ev => {\n\t\t\t\t\tlet user = ev.currentTarget.dataset.user;\n\t\t\t\t\ttarget_element.popover('hide');\n\t\t\t\t\tfrappe.set_route(link_base + user);\n\t\t\t\t});\n\n\t\t\t\treturn liked_by_list;\n\t\t\t},\n\t\t\thtml: true,\n\t\t\tcontainer: 'body'\n\t\t});\n\n\t\ttarget_element.popover('show');\n\n\t\t$(\".popover\").on(\"mouseleave\", () => {\n\t\t\ttarget_element.popover('hide');\n\t\t});\n\n\t\ttarget_element.on('mouseout', () => {\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (!$('.popover:hover').length) {\n\t\t\t\t\ttarget_element.popover('hide');\n\t\t\t\t}\n\t\t\t}, 100);\n\t\t});\n\t});\n\n};\n","frappe.provide('frappe.views');\n\nfrappe.views.BaseList = class BaseList {\n\tconstructor(opts) {\n\t\tObject.assign(this, opts);\n\t}\n\n\tshow() {\n\t\tfrappe.run_serially([\n\t\t\t() => this.init(),\n\t\t\t() => this.before_refresh(),\n\t\t\t() => this.refresh()\n\t\t]);\n\t}\n\n\tinit() {\n\n\t\tif (this.init_promise) return this.init_promise;\n\n\t\tlet tasks = [\n\t\t\tthis.setup_defaults,\n\t\t\tthis.set_stats,\n\t\t\tthis.setup_fields,\n\t\t\t// make view\n\t\t\tthis.setup_page,\n\t\t\tthis.setup_side_bar,\n\t\t\tthis.setup_main_section,\n\t\t\tthis.setup_view,\n\t\t].map(fn => fn.bind(this));\n\n\t\tthis.init_promise = frappe.run_serially(tasks);\n\t\treturn this.init_promise;\n\t}\n\n\tsetup_defaults() {\n\t\tthis.page_name = frappe.get_route_str();\n\t\tthis.page_title = this.page_title || __(this.doctype);\n\t\tthis.meta = frappe.get_meta(this.doctype);\n\t\tthis.settings = frappe.listview_settings[this.doctype] || {};\n\t\tthis.user_settings = frappe.get_user_settings(this.doctype);\n\n\t\tthis.start = 0;\n\t\tthis.page_length = 20;\n\t\tthis.data = [];\n\t\tthis.method = 'frappe.desk.reportview.get';\n\n\t\tthis.can_create = frappe.model.can_create(this.doctype);\n\t\tthis.can_write = frappe.model.can_write(this.doctype);\n\n\t\tthis.fields = [];\n\t\tthis.filters = [];\n\t\tthis.sort_by = 'modified';\n\t\tthis.sort_order = 'desc';\n\n\t\t// Setup buttons\n\t\tthis.primary_action = null;\n\t\tthis.secondary_action = {\n\t\t\tlabel: __('Refresh'),\n\t\t\taction: () => this.refresh()\n\t\t};\n\n\t\tthis.menu_items = [{\n\t\t\tlabel: __('Refresh'),\n\t\t\taction: () => this.refresh(),\n\t\t\tclass: 'visible-xs'\n\t\t}];\n\t}\n\n\tsetup_fields() {\n\t\tthis.set_fields();\n\t\tthis.build_fields();\n\t}\n\n\tset_fields() {\n\t\tlet fields = [].concat(\n\t\t\tfrappe.model.std_fields_list,\n\t\t\tthis.meta.title_field\n\t\t);\n\n\t\tfields.forEach(f => this._add_field(f));\n\t}\n\n\tget_fields_in_list_view() {\n\t\treturn this.meta.fields.filter(df => {\n\t\t\treturn frappe.model.is_value_type(df.fieldtype) && (\n\t\t\t\tdf.in_list_view\n\t\t\t\t&& frappe.perm.has_perm(this.doctype, df.permlevel, 'read')\n\t\t\t) || (\n\t\t\t\tdf.fieldtype === 'Currency'\n\t\t\t\t&& df.options\n\t\t\t\t&& !df.options.includes(':')\n\t\t\t) || (\n\t\t\t\tdf.fieldname === 'status'\n\t\t\t);\n\t\t});\n\t}\n\n\tbuild_fields() {\n\t\t// fill in missing doctype\n\t\tthis.fields = this.fields.map(f => {\n\t\t\tif (typeof f === 'string') {\n\t\t\t\tf = [f, this.doctype];\n\t\t\t}\n\t\t\treturn f;\n\t\t});\n\t\t// remove null or undefined values\n\t\tthis.fields = this.fields.filter(Boolean);\n\t\t//de-duplicate\n\t\tthis.fields = this.fields.uniqBy(f => f[0] + f[1]);\n\t}\n\n\t_add_field(fieldname, doctype) {\n\t\tif (!fieldname) return;\n\n\t\tif (!doctype) doctype = this.doctype;\n\n\t\tif (typeof fieldname === 'object') {\n\t\t\t// df is passed\n\t\t\tconst df = fieldname;\n\t\t\tfieldname = df.fieldname;\n\t\t\tdoctype = df.parent;\n\t\t}\n\n\t\tif (!this.fields) this.fields = [];\n\n\t\tconst is_valid_field = frappe.model.std_fields_list.includes(fieldname)\n\t\t\t|| frappe.meta.has_field(doctype, fieldname)\n\t\t\t|| fieldname === '_seen';\n\n\t\tif (!is_valid_field) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.fields.push([fieldname, doctype]);\n\t}\n\n\tset_stats() {\n\t\tthis.stats = ['_user_tags'];\n\t\t// add workflow field (as priority)\n\t\tthis.workflow_state_fieldname = frappe.workflow.get_state_fieldname(this.doctype);\n\t\tif (this.workflow_state_fieldname) {\n\t\t\tif (!frappe.workflow.workflows[this.doctype]['override_status']) {\n\t\t\t\tthis._add_field(this.workflow_state_fieldname);\n\t\t\t}\n\t\t\tthis.stats.push(this.workflow_state_fieldname);\n\t\t}\n\t}\n\n\tsetup_page() {\n\t\tthis.page = this.parent.page;\n\t\tthis.$page = $(this.parent);\n\t\tthis.page.page_form.removeClass('row').addClass('flex');\n\t\tthis.setup_page_head();\n\t}\n\n\tsetup_page_head() {\n\t\tthis.set_title();\n\t\tthis.set_menu_items();\n\t\tthis.set_breadcrumbs();\n\t}\n\n\tset_title() {\n\t\tthis.page.set_title(this.page_title);\n\t}\n\n\tset_menu_items() {\n\t\tconst $secondary_action = this.page.set_secondary_action(\n\t\t\tthis.secondary_action.label,\n\t\t\tthis.secondary_action.action,\n\t\t\tthis.secondary_action.icon\n\t\t);\n\t\tif (!this.secondary_action.icon) {\n\t\t\t$secondary_action.addClass('hidden-xs');\n\t\t} else {\n\t\t\t$secondary_action.addClass('visible-xs');\n\t\t}\n\n\t\tthis.menu_items.map(item => {\n\t\t\tif (item.condition && item.condition() === false) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst $item = this.page.add_menu_item(item.label, item.action, item.standard, item.shortcut);\n\t\t\tif (item.class) {\n\t\t\t\t$item && $item.addClass(item.class);\n\t\t\t}\n\t\t});\n\t}\n\n\tset_breadcrumbs() {\n\t\tfrappe.breadcrumbs.add(this.meta.module, this.doctype);\n\t}\n\n\tsetup_side_bar() {\n\t\tthis.list_sidebar = new frappe.views.ListSidebar({\n\t\t\tdoctype: this.doctype,\n\t\t\tstats: this.stats,\n\t\t\tparent: this.$page.find('.layout-side-section'),\n\t\t\t// set_filter: this.set_filter.bind(this),\n\t\t\tpage: this.page,\n\t\t\tlist_view: this\n\t\t});\n\t}\n\n\ttoggle_side_bar() {\n\t\tlet show_sidebar = JSON.parse(localStorage.show_sidebar || 'true');\n\t\tshow_sidebar = !show_sidebar;\n\t\tlocalStorage.show_sidebar = show_sidebar;\n\t\tthis.show_or_hide_sidebar();\n\t\t$(document.body).trigger('toggleListSidebar');\n\t}\n\n\tshow_or_hide_sidebar() {\n\t\tlet show_sidebar = JSON.parse(localStorage.show_sidebar || 'true');\n\t\t$(document.body).toggleClass('no-list-sidebar', !show_sidebar);\n\t}\n\n\tsetup_main_section() {\n\t\treturn frappe.run_serially([\n\t\t\tthis.setup_list_wrapper,\n\t\t\tthis.show_or_hide_sidebar,\n\t\t\tthis.setup_filter_area,\n\t\t\tthis.setup_sort_selector,\n\t\t\tthis.setup_result_area,\n\t\t\tthis.setup_no_result_area,\n\t\t\tthis.setup_freeze_area,\n\t\t\tthis.setup_paging_area\n\t\t].map(fn => fn.bind(this)));\n\t}\n\n\tsetup_list_wrapper() {\n\t\tthis.$frappe_list = $('<div class=\"frappe-list\">').appendTo(this.page.main);\n\t}\n\n\tsetup_filter_area() {\n\t\tthis.filter_area = new FilterArea(this);\n\n\t\tif (this.filters && this.filters.length > 0) {\n\t\t\treturn this.filter_area.set(this.filters);\n\t\t}\n\t}\n\n\tsetup_sort_selector() {\n\t\tthis.sort_selector = new frappe.ui.SortSelector({\n\t\t\tparent: this.filter_area.$filter_list_wrapper,\n\t\t\tdoctype: this.doctype,\n\t\t\targs: {\n\t\t\t\tsort_by: this.sort_by,\n\t\t\t\tsort_order: this.sort_order\n\t\t\t},\n\t\t\tonchange: this.on_sort_change.bind(this)\n\t\t});\n\t}\n\n\ton_sort_change() {\n\t\tthis.refresh();\n\t}\n\n\tsetup_result_area() {\n\t\tthis.$result = $(`<div class=\"result\">`);\n\t\tthis.$frappe_list.append(this.$result);\n\t}\n\n\tsetup_no_result_area() {\n\t\tthis.$no_result = $(`\n\t\t\t<div class=\"no-result text-muted flex justify-center align-center\">\n\t\t\t\t${this.get_no_result_message()}\n\t\t\t</div>\n\t\t`).hide();\n\t\tthis.$frappe_list.append(this.$no_result);\n\t}\n\n\tsetup_freeze_area() {\n\t\tthis.$freeze = $('<div class=\"freeze\"></div>').hide();\n\t\tthis.$frappe_list.append(this.$freeze);\n\t}\n\n\tget_no_result_message() {\n\t\treturn __('Nothing to show');\n\t}\n\n\tsetup_paging_area() {\n\t\tconst paging_values = [20, 100, 500];\n\t\tthis.$paging_area = $(\n\t\t\t`<div class=\"list-paging-area level\">\n\t\t\t\t<div class=\"level-left\">\n\t\t\t\t\t<div class=\"btn-group\">\n\t\t\t\t\t\t${paging_values.map(value => `\n\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-default btn-sm btn-paging\"\n\t\t\t\t\t\t\t\tdata-value=\"${value}\">\n\t\t\t\t\t\t\t\t${value}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t`).join('')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"level-right\">\n\t\t\t\t\t<button class=\"btn btn-default btn-more btn-sm\">\n\t\t\t\t\t\t${__(\"More\")}...\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>`\n\t\t).hide();\n\t\tthis.$frappe_list.append(this.$paging_area);\n\n\t\t// set default paging btn active\n\t\tthis.$paging_area\n\t\t\t.find(`.btn-paging[data-value=\"${this.page_length}\"]`)\n\t\t\t.addClass('btn-info');\n\n\t\tthis.$paging_area.on('click', '.btn-paging, .btn-more', e => {\n\t\t\tconst $this = $(e.currentTarget);\n\n\t\t\tif ($this.is('.btn-paging')) {\n\t\t\t\t// set active button\n\t\t\t\tthis.$paging_area.find('.btn-paging').removeClass('btn-info');\n\t\t\t\t$this.addClass('btn-info');\n\n\t\t\t\tthis.start = 0;\n\t\t\t\tthis.page_length = $this.data().value;\n\t\t\t\tthis.refresh();\n\t\t\t} else if ($this.is('.btn-more')) {\n\t\t\t\tthis.start = this.start + this.page_length;\n\t\t\t\tthis.refresh();\n\t\t\t}\n\t\t});\n\t}\n\n\tget_fields() {\n\t\t// convert [fieldname, Doctype] => tabDoctype.fieldname\n\t\treturn this.fields.map(f => frappe.model.get_full_column_name(f[0], f[1]));\n\t}\n\n\tsetup_view() {\n\t\t// for child classes\n\t}\n\n\tget_filters_for_args() {\n\t\t// filters might have a fifth param called hidden,\n\t\t// we don't want to pass that server side\n\t\treturn this.filter_area\n\t\t\t? this.filter_area.get().map(filter => filter.slice(0, 4))\n\t\t\t: [];\n\t}\n\n\tget_filter_value(fieldname) {\n\t\treturn this.get_filters_for_args().filter(f => f[1] == fieldname)[0] &&\n\t\t\tthis.get_filters_for_args().filter(f => f[1] == fieldname)[0][3];\n\t}\n\n\tget_args() {\n\t\treturn {\n\t\t\tdoctype: this.doctype,\n\t\t\tfields: this.get_fields(),\n\t\t\tfilters: this.get_filters_for_args(),\n\t\t\torder_by: this.sort_selector.get_sql_string(),\n\t\t\tstart: this.start,\n\t\t\tpage_length: this.page_length,\n\t\t\tview: this.view\n\t\t};\n\t}\n\n\tget_call_args() {\n\t\tconst args = this.get_args();\n\t\treturn {\n\t\t\tmethod: this.method,\n\t\t\targs: args,\n\t\t\tfreeze: this.freeze_on_refresh || false,\n\t\t\tfreeze_message: this.freeze_message || (__('Loading') + '...')\n\t\t};\n\t}\n\n\tbefore_refresh() {\n\t\t// modify args here just before making the request\n\t\t// see list_view.js\n\t}\n\n\trefresh() {\n\t\tthis.freeze(true);\n\t\t// fetch data from server\n\t\treturn frappe.call(this.get_call_args()).then(r => {\n\t\t\t// render\n\t\t\tthis.prepare_data(r);\n\t\t\tthis.toggle_result_area();\n\t\t\tthis.before_render();\n\t\t\tthis.render();\n\t\t\tthis.after_render();\n\t\t\tthis.freeze(false);\n\t\t\tif (this.settings.refresh) {\n\t\t\t\tthis.settings.refresh(this);\n\t\t\t}\n\t\t});\n\t}\n\n\tprepare_data(r) {\n\t\tlet data = r.message || {};\n\t\tdata = !Array.isArray(data) ? frappe.utils.dict(data.keys, data.values) : data;\n\n\t\tif (this.start === 0) {\n\t\t\tthis.data = data;\n\t\t} else {\n\t\t\tthis.data = this.data.concat(data);\n\t\t}\n\n\t\tthis.data = this.data.uniqBy(d => d.name);\n\t}\n\n\tfreeze() {\n\t\t// show a freeze message while data is loading\n\t}\n\n\tbefore_render() {\n\n\t}\n\n\tafter_render() {\n\n\t}\n\n\trender() {\n\t\t// for child classes\n\t}\n\n\ton_filter_change() {\n\t\t// fired when filters are added or removed\n\t}\n\n\ttoggle_result_area() {\n\t\tthis.$result.toggle(this.data.length > 0);\n\t\tthis.$paging_area.toggle(this.data.length > 0);\n\t\tthis.$no_result.toggle(this.data.length == 0);\n\n\t\tconst show_more = (this.start + this.page_length) <= this.data.length;\n\t\tthis.$paging_area.find('.btn-more')\n\t\t\t.toggle(show_more);\n\t}\n\n\tcall_for_selected_items(method, args = {}) {\n\t\targs.names = this.get_checked_items(true);\n\n\t\tfrappe.call({\n\t\t\tmethod: method,\n\t\t\targs: args,\n\t\t\tfreeze: true,\n\t\t\tcallback: r => {\n\t\t\t\tif (!r.exc) {\n\t\t\t\t\tthis.refresh();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n};\n\nclass FilterArea {\n\tconstructor(list_view) {\n\t\tthis.list_view = list_view;\n\t\tthis.standard_filters_wrapper = this.list_view.page.page_form;\n\t\tthis.$filter_list_wrapper = $('<div class=\"filter-list\">').appendTo(this.list_view.$frappe_list);\n\t\tthis.trigger_refresh = true;\n\t\tthis.setup();\n\t}\n\n\tsetup() {\n\t\tthis.make_standard_filters();\n\t\tthis.make_filter_list();\n\t}\n\n\tget() {\n\t\tlet filters = this.filter_list.get_filters();\n\t\tlet standard_filters = this.get_standard_filters();\n\n\t\treturn filters\n\t\t\t.concat(standard_filters)\n\t\t\t.uniqBy(JSON.stringify);\n\t}\n\n\tset(filters) {\n\t\t// use to method to set filters without triggering refresh\n\t\tthis.trigger_refresh = false;\n\t\treturn this.add(filters, false)\n\t\t\t.then(() => {\n\t\t\t\tthis.trigger_refresh = true;\n\t\t\t});\n\t}\n\n\tadd(filters, refresh = true) {\n\t\tif (!filters || Array.isArray(filters) && filters.length === 0)\n\t\t\treturn Promise.resolve();\n\n\t\tif (typeof filters[0] === 'string') {\n\t\t\t// passed in the format of doctype, field, condition, value\n\t\t\tconst filter = Array.from(arguments);\n\t\t\tfilters = [filter];\n\t\t}\n\n\t\tfilters = filters.filter(f => {\n\t\t\treturn !this.exists(f);\n\t\t});\n\n\t\tconst { non_standard_filters, promise } = this.set_standard_filter(filters);\n\n\t\treturn promise\n\t\t\t.then(() => {\n\t\t\t\treturn non_standard_filters.length > 0 &&\n\t\t\t\t\tthis.filter_list.add_filters(non_standard_filters);\n\t\t\t})\n\t\t\t.then(() => {\n\t\t\t\trefresh && this.list_view.refresh();\n\t\t\t});\n\t}\n\n\trefresh_list_view() {\n\t\tif (this.trigger_refresh) {\n\t\t\tthis.list_view.start = 0;\n\t\t\tthis.list_view.refresh();\n\t\t\tthis.list_view.on_filter_change();\n\t\t}\n\t}\n\n\texists(f) {\n\t\tlet exists = false;\n\t\t// check in standard filters\n\t\tconst fields_dict = this.list_view.page.fields_dict;\n\t\tif (f[2] === '=' && f[1] in fields_dict) {\n\t\t\tconst value = fields_dict[f[1]].get_value();\n\t\t\tif (value) {\n\t\t\t\texists = true;\n\t\t\t}\n\t\t}\n\n\t\t// check in filter area\n\t\tif (!exists) {\n\t\t\texists = this.filter_list.filter_exists(f);\n\t\t}\n\n\t\treturn exists;\n\t}\n\n\tset_standard_filter(filters) {\n\t\tif (filters.length === 0) {\n\t\t\treturn {\n\t\t\t\tnon_standard_filters: [],\n\t\t\t\tpromise: Promise.resolve()\n\t\t\t};\n\t\t}\n\n\t\tconst fields_dict = this.list_view.page.fields_dict;\n\n\t\tlet out = filters.reduce((out, filter) => {\n\t\t\t// eslint-disable-next-line\n\t\t\tconst [dt, fieldname, condition, value] = filter;\n\t\t\tout.promise = out.promise || Promise.resolve();\n\t\t\tout.non_standard_filters = out.non_standard_filters || [];\n\n\t\t\tif (fields_dict[fieldname] && (condition === '=' || condition === \"like\")) {\n\t\t\t\t// standard filter\n\t\t\t\tout.promise = out.promise.then(\n\t\t\t\t\t() => fields_dict[fieldname].set_value(value)\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\t// filter out non standard filters\n\t\t\t\tout.non_standard_filters.push(filter);\n\t\t\t}\n\t\t\treturn out;\n\t\t}, {});\n\n\t\treturn out;\n\t}\n\n\tremove(fieldname) {\n\t\tconst fields_dict = this.list_view.page.fields_dict;\n\n\t\tif (fieldname in fields_dict) {\n\t\t\treturn fields_dict[fieldname].set_value('');\n\t\t}\n\n\t\tlet filter = this.filter_list.get_filter(fieldname);\n\t\tif (filter) filter.remove();\n\t\treturn Promise.resolve();\n\t}\n\n\tclear(refresh = true) {\n\t\tif (!refresh) {\n\t\t\tthis.trigger_refresh = false;\n\t\t}\n\n\t\tthis.filter_list.clear_filters();\n\n\t\tconst promises = [];\n\t\tconst fields_dict = this.list_view.page.fields_dict;\n\t\tfor (let key in fields_dict) {\n\t\t\tconst field = this.list_view.page.fields_dict[key];\n\t\t\tpromises.push(() => field.set_value(''));\n\t\t}\n\t\treturn frappe.run_serially(promises)\n\t\t\t.then(() => {\n\t\t\t\tthis.trigger_refresh = true;\n\t\t\t});\n\t}\n\n\tmake_standard_filters() {\n\t\tlet fields = [\n\t\t\t{\n\t\t\t\tfieldtype: 'Data',\n\t\t\t\tlabel: 'Name',\n\t\t\t\tcondition: 'like',\n\t\t\t\tfieldname: 'name',\n\t\t\t\tonchange: () => this.refresh_list_view()\n\t\t\t}\n\t\t];\n\n\t\tif(this.list_view.custom_filter_configs) {\n\t\t\tthis.list_view.custom_filter_configs.forEach(config => {\n\t\t\t\tconfig.onchange = () => this.refresh_list_view();\n\t\t\t});\n\n\t\t\tfields = fields.concat(this.list_view.custom_filter_configs);\n\t\t}\n\n\t\tconst doctype_fields = this.list_view.meta.fields;\n\t\tconst title_field = this.list_view.meta.title_field;\n\n\t\tfields = fields.concat(doctype_fields.filter(\n\t\t\tdf => (df.fieldname === title_field) || (df.in_standard_filter && frappe.model.is_value_type(df.fieldtype))\n\t\t).map(df => {\n\t\t\tlet options = df.options;\n\t\t\tlet condition = '=';\n\t\t\tlet fieldtype = df.fieldtype;\n\t\t\tif (['Text', 'Small Text', 'Text Editor', 'HTML Editor', 'Data', 'Code', 'Read Only'].includes(fieldtype)) {\n\t\t\t\tfieldtype = 'Data';\n\t\t\t\tcondition = 'like';\n\t\t\t}\n\t\t\tif (df.fieldtype == \"Select\" && df.options) {\n\t\t\t\toptions = df.options.split(\"\\n\");\n\t\t\t\tif (options.length > 0 && options[0] != \"\") {\n\t\t\t\t\toptions.unshift(\"\");\n\t\t\t\t\toptions = options.join(\"\\n\");\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet default_value = (fieldtype === 'Link') ? frappe.defaults.get_user_default(options) : null;\n\t\t\tif (['__default', '__global'].includes(default_value)) {\n\t\t\t\tdefault_value = null;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tfieldtype: fieldtype,\n\t\t\t\tlabel: __(df.label),\n\t\t\t\toptions: options,\n\t\t\t\tfieldname: df.fieldname,\n\t\t\t\tcondition: condition,\n\t\t\t\tdefault: default_value,\n\t\t\t\tonchange: () => this.refresh_list_view(),\n\t\t\t\tignore_link_validation: fieldtype === 'Dynamic Link',\n\t\t\t\tis_filter: 1,\n\t\t\t};\n\t\t}));\n\n\t\tfields.map(df => this.list_view.page.add_field(df));\n\t}\n\n\tget_standard_filters() {\n\t\tconst filters = [];\n\t\tconst fields_dict = this.list_view.page.fields_dict;\n\t\tfor (let key in fields_dict) {\n\t\t\tlet field = fields_dict[key];\n\t\t\tlet value = field.get_value();\n\t\t\tif (value) {\n\t\t\t\tif (field.df.condition === 'like' && !value.includes('%')) {\n\t\t\t\t\tvalue = '%' + value + '%';\n\t\t\t\t}\n\t\t\t\tfilters.push([\n\t\t\t\t\tthis.list_view.doctype,\n\t\t\t\t\tfield.df.fieldname,\n\t\t\t\t\tfield.df.condition || '=',\n\t\t\t\t\tvalue\n\t\t\t\t]);\n\t\t\t}\n\t\t}\n\n\t\treturn filters;\n\t}\n\n\tmake_filter_list() {\n\t\tthis.filter_list = new frappe.ui.FilterGroup({\n\t\t\tbase_list: this.list_view,\n\t\t\tparent: this.$filter_list_wrapper,\n\t\t\tdoctype: this.list_view.doctype,\n\t\t\tdefault_filters: [],\n\t\t\ton_change: () => this.refresh_list_view()\n\t\t});\n\t}\n\n\tis_being_edited() {\n\t\t// returns true if user is currently editing filters\n\t\treturn this.filter_list &&\n\t\t\tthis.filter_list.wrapper.find('.filter-box:visible').length > 0;\n\t}\n}\n\n// utility function to validate view modes\nfrappe.views.view_modes = ['List', 'Gantt', 'Kanban', 'Calendar', 'Image', 'Inbox', 'Report', 'Dashboard'];\nfrappe.views.is_valid = view_mode => frappe.views.view_modes.includes(view_mode);\n","export default class BulkOperations {\n\tconstructor({ doctype }) {\n\t\tif (!doctype) frappe.throw(__('Doctype required'));\n\t\tthis.doctype = doctype;\n\t}\n\n\tprint(docs) {\n\t\tconst print_settings = frappe.model.get_doc(':Print Settings', 'Print Settings');\n\t\tconst allow_print_for_draft = cint(print_settings.allow_print_for_draft);\n\t\tconst is_submittable = frappe.model.is_submittable(this.doctype);\n\t\tconst allow_print_for_cancelled = cint(print_settings.allow_print_for_cancelled);\n\n\t\tconst valid_docs = docs.filter(doc => {\n\t\t\treturn !is_submittable || doc.docstatus === 1 ||\n\t\t\t\t(allow_print_for_cancelled && doc.docstatus == 2) ||\n\t\t\t\t(allow_print_for_draft && doc.docstatus == 0) ||\n\t\t\t\tfrappe.user.has_role('Administrator');\n\t\t}).map(doc => doc.name);\n\n\t\tconst invalid_docs = docs.filter(doc => !valid_docs.includes(doc.name));\n\n\t\tif (invalid_docs.length > 0) {\n\t\t\tfrappe.msgprint(__('You selected Draft or Cancelled documents'));\n\t\t\treturn;\n\t\t}\n\n\t\tif (valid_docs.length > 0) {\n\t\t\tconst dialog = new frappe.ui.Dialog({\n\t\t\t\ttitle: __('Print Documents'),\n\t\t\t\tfields: [{\n\t\t\t\t\t'fieldtype': 'Check',\n\t\t\t\t\t'label': __('With Letterhead'),\n\t\t\t\t\t'fieldname': 'with_letterhead'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t'fieldtype': 'Select',\n\t\t\t\t\t'label': __('Print Format'),\n\t\t\t\t\t'fieldname': 'print_sel',\n\t\t\t\t\toptions: frappe.meta.get_print_formats(this.doctype)\n\t\t\t\t}]\n\t\t\t});\n\n\t\t\tdialog.set_primary_action(__('Print'), args => {\n\t\t\t\tif (!args) return;\n\t\t\t\tconst default_print_format = frappe.get_meta(this.doctype).default_print_format;\n\t\t\t\tconst with_letterhead = args.with_letterhead ? 1 : 0;\n\t\t\t\tconst print_format = args.print_sel ? args.print_sel : default_print_format;\n\t\t\t\tconst json_string = JSON.stringify(valid_docs);\n\n\t\t\t\tconst w = window.open('/api/method/frappe.utils.print_format.download_multi_pdf?' +\n\t\t\t\t\t'doctype=' + encodeURIComponent(this.doctype) +\n\t\t\t\t\t'&name=' + encodeURIComponent(json_string) +\n\t\t\t\t\t'&format=' + encodeURIComponent(print_format) +\n\t\t\t\t\t'&no_letterhead=' + (with_letterhead ? '0' : '1'));\n\t\t\t\tif (!w) {\n\t\t\t\t\tfrappe.msgprint(__('Please enable pop-ups'));\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tdialog.show();\n\t\t} else {\n\t\t\tfrappe.msgprint(__('Select atleast 1 record for printing'));\n\t\t}\n\t}\n\n\tdelete(docnames, done = null) {\n\t\tfrappe\n\t\t\t.call({\n\t\t\t\tmethod: 'frappe.desk.reportview.delete_items',\n\t\t\t\tfreeze: true,\n\t\t\t\targs: {\n\t\t\t\t\titems: docnames,\n\t\t\t\t\tdoctype: this.doctype\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then((r) => {\n\t\t\t\tlet failed = r.message;\n\t\t\t\tif (!failed) failed = [];\n\n\t\t\t\tif (failed.length && !r._server_messages) {\n\t\t\t\t\tfrappe.throw(__('Cannot delete {0}', [failed.map(f => f.bold()).join(', ')]));\n\t\t\t\t}\n\t\t\t\tif (failed.length < docnames.length) {\n\t\t\t\t\tfrappe.utils.play_sound('delete');\n\t\t\t\t\tif (done) done();\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tassign(docnames, done) {\n\t\tif (docnames.length > 0) {\n\t\t\tconst assign_to = new frappe.ui.form.AssignToDialog({\n\t\t\t\tobj: this,\n\t\t\t\tmethod: 'frappe.desk.form.assign_to.add_multiple',\n\t\t\t\tdoctype: this.doctype,\n\t\t\t\tdocname: docnames,\n\t\t\t\tbulk_assign: true,\n\t\t\t\tre_assign: true,\n\t\t\t\tcallback: done\n\t\t\t});\n\t\t\tassign_to.dialog.clear();\n\t\t\tassign_to.dialog.show();\n\t\t} else {\n\t\t\tfrappe.msgprint(__('Select records for assignment'));\n\t\t}\n\t}\n\n\tapply_assignment_rule(docnames, done) {\n\t\tif (docnames.length > 0) {\n\t\t\tfrappe.call('frappe.automation.doctype.assignment_rule.assignment_rule.bulk_apply', {\n\t\t\t\tdoctype: this.doctype,\n\t\t\t\tdocnames: docnames\n\t\t\t}).then(() => done());\n\t\t}\n\t}\n\n\tsubmit_or_cancel(docnames, action='submit', done=null) {\n\t\taction = action.toLowerCase();\n\t\tfrappe\n\t\t\t.call({\n\t\t\t\tmethod: 'frappe.desk.doctype.bulk_update.bulk_update.submit_cancel_or_update_docs',\n\t\t\t\targs: {\n\t\t\t\t\tdoctype: this.doctype,\n\t\t\t\t\taction: action,\n\t\t\t\t\tdocnames: docnames\n\t\t\t\t},\n\t\t\t})\n\t\t\t.then((r) => {\n\t\t\t\tlet failed = r.message;\n\t\t\t\tif (!failed) failed = [];\n\n\t\t\t\tif (failed.length && !r._server_messages) {\n\t\t\t\t\tfrappe.throw(__('Cannot {0} {1}', [action, failed.map(f => f.bold()).join(', ')]));\n\t\t\t\t}\n\t\t\t\tif (failed.length < docnames.length) {\n\t\t\t\t\tfrappe.utils.play_sound(action);\n\t\t\t\t\tif (done) done();\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tedit(docnames, field_mappings, done) {\n\t\tlet field_options = Object.keys(field_mappings).sort();\n\t\tconst status_regex = /status/i;\n\n\t\tconst default_field = field_options.find(value => status_regex.test(value));\n\n\t\tconst dialog = new frappe.ui.Dialog({\n\t\t\ttitle: __('Edit'),\n\t\t\tfields: [\n\t\t\t\t{\n\t\t\t\t\t'fieldtype': 'Select',\n\t\t\t\t\t'options': field_options,\n\t\t\t\t\t'default': default_field,\n\t\t\t\t\t'label': __('Field'),\n\t\t\t\t\t'fieldname': 'field',\n\t\t\t\t\t'reqd': 1,\n\t\t\t\t\t'onchange': () => {\n\t\t\t\t\t\tset_value_field(dialog);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t'fieldtype': 'Data',\n\t\t\t\t\t'label': __('Value'),\n\t\t\t\t\t'fieldname': 'value',\n\t\t\t\t\t'reqd': 1\n\t\t\t\t}\n\t\t\t],\n\t\t\tprimary_action: ({ value }) => {\n\t\t\t\tconst fieldname = field_mappings[dialog.get_value('field')].fieldname;\n\t\t\t\tdialog.disable_primary_action();\n\t\t\t\tfrappe.call({\n\t\t\t\t\tmethod: 'frappe.desk.doctype.bulk_update.bulk_update.submit_cancel_or_update_docs',\n\t\t\t\t\targs: {\n\t\t\t\t\t\tdoctype: this.doctype,\n\t\t\t\t\t\tfreeze: true,\n\t\t\t\t\t\tdocnames: docnames,\n\t\t\t\t\t\taction: 'update',\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t[fieldname]: value\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}).then(r => {\n\t\t\t\t\tlet failed = r.message || [];\n\n\t\t\t\t\tif (failed.length && !r._server_messages) {\n\t\t\t\t\t\tdialog.enable_primary_action();\n\t\t\t\t\t\tfrappe.throw(__('Cannot update {0}', [failed.map(f => f.bold ? f.bold() : f).join(', ')]));\n\t\t\t\t\t}\n\t\t\t\t\tdone();\n\t\t\t\t\tdialog.hide();\n\t\t\t\t\tfrappe.show_alert(__('Updated successfully'));\n\t\t\t\t});\n\t\t\t},\n\t\t\tprimary_action_label: __('Update')\n\t\t});\n\n\t\tif (default_field) set_value_field(dialog); // to set `Value` df based on default `Field`\n\n\t\tfunction set_value_field(dialogObj) {\n\t\t\tconst new_df = Object.assign({},\n\t\t\t\tfield_mappings[dialogObj.get_value('field')]);\n\t\t\t/* if the field label has status in it and\n\t\t\tif it has select fieldtype with no default value then\n\t\t\tset a default value from the available option. */\n\t\t\tif(new_df.label.match(status_regex) &&\n\t\t\t\tnew_df.fieldtype === 'Select' && !new_df.default) {\n\t\t\t\tlet options = [];\n\t\t\t\tif(typeof new_df.options===\"string\") {\n\t\t\t\t\toptions = new_df.options.split(\"\\n\");\n\t\t\t\t}\n\t\t\t\t//set second option as default if first option is an empty string\n\t\t\t\tnew_df.default = options[0] || options[1];\n\t\t\t}\n\t\t\tnew_df.label = __('Value');\n\t\t\tnew_df.reqd = 1;\n\t\t\tdelete new_df.depends_on;\n\t\t\tdialogObj.replace_field('value', new_df);\n\t\t}\n\n\t\tdialog.refresh();\n\t\tdialog.show();\n\t}\n}\n","export default class ListSettings {\n\tconstructor({ listview, doctype, meta, settings }) {\n\t\tif (!doctype) {\n\t\t\tfrappe.throw(__('Doctype required'));\n\t\t}\n\n\t\tthis.listview = listview;\n\t\tthis.doctype = doctype;\n\t\tthis.meta = meta;\n\t\tthis.settings = settings;\n\t\tthis.dialog = null;\n\t\tthis.fields = this.settings && this.settings.fields ? JSON.parse(this.settings.fields) : [];\n\t\tthis.subject_field = null;\n\n\t\tfrappe.model.with_doctype(\"List View Settings\", () => {\n\t\t\tthis.make();\n\t\t\tthis.get_listview_fields(meta);\n\t\t\tthis.setup_fields();\n\t\t\tthis.setup_remove_fields();\n\t\t\tthis.add_new_fields();\n\t\t\tthis.show_dialog();\n\t\t});\n\t}\n\n\tmake() {\n\t\tlet me = this;\n\n\t\tlet list_view_settings = frappe.get_meta(\"List View Settings\");\n\n\t\tme.dialog = new frappe.ui.Dialog({\n\t\t\ttitle: __(\"{0} Settings\", [__(me.doctype)]),\n\t\t\tfields: list_view_settings.fields\n\t\t});\n\t\tme.dialog.set_values(me.settings);\n\t\tme.dialog.set_primary_action(__('Save'), () => {\n\t\t\tlet values = me.dialog.get_values();\n\n\t\t\tfrappe.show_alert({\n\t\t\t\tmessage: __(\"Saving\"),\n\t\t\t\tindicator: \"green\"\n\t\t\t});\n\n\t\t\tfrappe.call({\n\t\t\t\tmethod: \"frappe.desk.doctype.list_view_settings.list_view_settings.save_listview_settings\",\n\t\t\t\targs: {\n\t\t\t\t\tdoctype: me.doctype,\n\t\t\t\t\tlistview_settings: values,\n\t\t\t\t\tremoved_listview_fields: me.removed_fields || []\n\t\t\t\t},\n\t\t\t\tcallback: function (r) {\n\t\t\t\t\tme.listview.refresh_columns(r.message.meta, r.message.listview_settings);\n\t\t\t\t\tme.dialog.hide();\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\tme.dialog.fields_dict[\"total_fields\"].df.onchange = () => me.refresh();\n\t}\n\n\trefresh() {\n\t\tlet me = this;\n\n\t\tme.setup_fields();\n\t\tme.add_new_fields();\n\t\tme.setup_remove_fields();\n\t}\n\n\tshow_dialog() {\n\t\tlet me = this;\n\n\t\tif (!this.settings.fields) {\n\t\t\tme.update_fields();\n\t\t}\n\n\t\tif (!me.dialog.get_value(\"total_fields\")) {\n\t\t\tlet field_count = me.fields.length;\n\n\t\t\tif (field_count < 4) {\n\t\t\t\tfield_count = 4;\n\t\t\t} else if (field_count > 10) {\n\t\t\t\tfield_count = 4;\n\t\t\t}\n\n\t\t\tme.dialog.set_value(\"total_fields\", field_count);\n\t\t}\n\n\t\tme.dialog.show();\n\t}\n\n\tsetup_fields() {\n\t\tfunction is_status_field(field) {\n\t\t\treturn field.fieldname === \"status_field\";\n\t\t}\n\n\t\tlet me = this;\n\n\t\tlet fields_html = me.dialog.get_field(\"fields_html\");\n\t\tlet wrapper = fields_html.$wrapper[0];\n\t\tlet fields = ``;\n\t\tlet total_fields = me.dialog.get_values().total_fields || me.settings.total_fields;\n\n\t\tfor (let idx in me.fields) {\n\t\t\tif (idx == parseInt(total_fields)) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tlet is_sortable = (idx == 0) ? `` : `sortable`;\n\t\t\tlet show_sortable_handle = (idx == 0) ? `hide` : ``;\n\t\t\tlet can_remove = (idx == 0 || is_status_field(me.fields[idx])) ? `hide` : ``;\n\n\t\t\tfields += `\n\t\t\t\t<div class=\"control-input flex align-center form-control fields_order ${is_sortable}\"\n\t\t\t\t\tstyle=\"display: block; margin-bottom: 5px;\" data-fieldname=\"${me.fields[idx].fieldname}\"\n\t\t\t\t\tdata-label=\"${me.fields[idx].label}\" data-type=\"${me.fields[idx].type}\">\n\n\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t<div class=\"col-md-1\">\n\t\t\t\t\t\t\t<i class=\"fa fa-bars text-muted sortable-handle ${show_sortable_handle}\" aria-hidden=\"true\"></i>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"col-md-10\" style=\"padding-left:0px;\">\n\t\t\t\t\t\t\t${me.fields[idx].label}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"col-md-1 ${can_remove}\">\n\t\t\t\t\t\t\t<a class=\"text-muted remove-field\" data-fieldname=\"${me.fields[idx].fieldname}\">\n\t\t\t\t\t\t\t\t<i class=\"fa fa-trash-o\" aria-hidden=\"true\"></i>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>`;\n\t\t}\n\n\t\tfields_html.html(`\n\t\t\t<div class=\"form-group\">\n\t\t\t\t<div class=\"clearfix\">\n\t\t\t\t\t<label class=\"control-label\" style=\"padding-right: 0px;\">Fields</label>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"control-input-wrapper\">\n\t\t\t\t${fields}\n\t\t\t\t</div>\n\t\t\t\t<p class=\"help-box small text-muted hidden-xs\">\n\t\t\t\t\t<a class=\"add-new-fields text-muted\">\n\t\t\t\t\t\t+ Add / Remove Fields\n\t\t\t\t\t</a>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t`);\n\n\t\tnew Sortable(wrapper.getElementsByClassName(\"control-input-wrapper\")[0], {\n\t\t\thandle: '.sortable-handle',\n\t\t\tdraggable: '.sortable',\n\t\t\tonUpdate: () => {\n\t\t\t\tme.update_fields();\n\t\t\t\tme.refresh();\n\t\t\t}\n\t\t});\n\t}\n\n\tadd_new_fields() {\n\t\tlet me = this;\n\n\t\tlet fields_html = me.dialog.get_field(\"fields_html\");\n\t\tlet add_new_fields = fields_html.$wrapper[0].getElementsByClassName(\"add-new-fields\")[0];\n\t\tadd_new_fields.onclick = () => me.column_selector();\n\t}\n\n\tsetup_remove_fields() {\n\t\tlet me = this;\n\n\t\tlet fields_html = me.dialog.get_field(\"fields_html\");\n\t\tlet remove_fields = fields_html.$wrapper[0].getElementsByClassName(\"remove-field\");\n\n\t\tfor (let idx = 0; idx < remove_fields.length; idx++) {\n\t\t\tremove_fields.item(idx).onclick = () => me.remove_fields(remove_fields.item(idx).getAttribute(\"data-fieldname\"));\n\t\t}\n\t}\n\n\tremove_fields(fieldname) {\n\t\tlet me = this;\n\t\tlet existing_fields = me.fields.map(f => f.fieldname);\n\n\t\tfor (let idx in me.fields) {\n\t\t\tlet field = me.fields[idx];\n\n\t\t\tif (field.fieldname == fieldname) {\n\t\t\t\tme.fields.splice(idx, 1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tme.set_removed_fields(me.get_removed_listview_fields(me.fields.map(f => f.fieldname), existing_fields));\n\t\tme.refresh();\n\t\tme.update_fields();\n\t}\n\n\tupdate_fields() {\n\t\tlet me = this;\n\n\t\tlet fields_html = me.dialog.get_field(\"fields_html\");\n\t\tlet wrapper = fields_html.$wrapper[0];\n\n\t\tlet fields_order = wrapper.getElementsByClassName(\"fields_order\");\n\t\tme.fields = [];\n\n\t\tfor (let idx = 0; idx < fields_order.length; idx++) {\n\t\t\tme.fields.push({\n\t\t\t\tfieldname: fields_order.item(idx).getAttribute(\"data-fieldname\"),\n\t\t\t\tlabel: fields_order.item(idx).getAttribute(\"data-label\")\n\t\t\t});\n\t\t}\n\n\t\tme.dialog.set_value(\"fields\", JSON.stringify(me.fields));\n\t\tme.dialog.get_value(\"fields\");\n\t}\n\n\tcolumn_selector() {\n\t\tlet me = this;\n\n\t\tlet d = new frappe.ui.Dialog({\n\t\t\ttitle: __(\"{0} Fields\", [__(me.doctype)]),\n\t\t\tfields: [\n\t\t\t\t{\n\t\t\t\t\tlabel: __(\"Reset Fields\"),\n\t\t\t\t\tfieldtype: \"Button\",\n\t\t\t\t\tfieldname: \"reset_fields\",\n\t\t\t\t\tclick: () => me.reset_listview_fields(d)\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: __(\"Select Fields\"),\n\t\t\t\t\tfieldtype: \"MultiCheck\",\n\t\t\t\t\tfieldname: \"fields\",\n\t\t\t\t\toptions: me.get_doctype_fields(me.meta, me.fields.map(f => f.fieldname)),\n\t\t\t\t\tcolumns: 2\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\t\td.set_primary_action(__('Save'), () => {\n\t\t\tlet values = d.get_values().fields;\n\n\t\t\tme.set_removed_fields(me.get_removed_listview_fields(values, me.fields.map(f => f.fieldname)));\n\n\t\t\tme.fields = [];\n\t\t\tme.set_subject_field(me.meta);\n\t\t\tme.set_status_field();\n\n\t\t\tfor (let idx in values) {\n\t\t\t\tlet value = values[idx];\n\n\t\t\t\tif (me.fields.length === parseInt(me.dialog.get_values().total_fields)) {\n\t\t\t\t\tbreak;\n\t\t\t\t} else if (value != me.subject_field.fieldname) {\n\t\t\t\t\tlet field = frappe.meta.get_docfield(me.doctype, value);\n\t\t\t\t\tif (field) {\n\t\t\t\t\t\tme.fields.push({\n\t\t\t\t\t\t\tlabel: field.label,\n\t\t\t\t\t\t\tfieldname: field.fieldname\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tme.refresh();\n\t\t\tme.dialog.set_value(\"fields\", JSON.stringify(me.fields));\n\t\t\td.hide();\n\t\t});\n\t\td.show();\n\t}\n\n\treset_listview_fields(dialog) {\n\t\tlet me = this;\n\n\t\tfrappe.xcall(\"frappe.desk.doctype.list_view_settings.list_view_settings.get_default_listview_fields\", {\n\t\t\tdoctype: me.doctype\n\t\t}).then((fields) => {\n\t\t\tlet field = dialog.get_field(\"fields\");\n\t\t\tfield.df.options = me.get_doctype_fields(me.meta, fields);\n\t\t\tdialog.refresh();\n\t\t});\n\n\t}\n\n\tget_listview_fields(meta) {\n\t\tlet me = this;\n\n\t\tif (!me.settings.fields) {\n\t\t\tme.set_list_view_fields(meta);\n\t\t} else {\n\t\t\tme.fields = JSON.parse(this.settings.fields);\n\t\t}\n\n\t\tme.fields.uniqBy(f => f.fieldname);\n\t}\n\n\tset_list_view_fields(meta) {\n\t\tlet me = this;\n\n\t\tme.set_subject_field(meta);\n\t\tme.set_status_field();\n\n\t\tmeta.fields.forEach(field => {\n\t\t\tif (field.in_list_view && !in_list(frappe.model.no_value_type, field.fieldtype) &&\n\t\t\t\tme.subject_field.fieldname != field.fieldname) {\n\n\t\t\t\tme.fields.push({\n\t\t\t\t\tlabel: field.label,\n\t\t\t\t\tfieldname: field.fieldname\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tset_subject_field(meta) {\n\t\tlet me = this;\n\n\t\tme.subject_field = {\n\t\t\tlabel: \"Name\",\n\t\t\tfieldname: \"name\"\n\t\t};\n\n\t\tif (meta.title_field) {\n\t\t\tlet field = frappe.meta.get_docfield(me.doctype, meta.title_field.trim());\n\n\t\t\tme.subject_field = {\n\t\t\t\tlabel: field.label,\n\t\t\t\tfieldname: field.fieldname\n\t\t\t};\n\t\t}\n\n\t\tme.fields.push(me.subject_field);\n\t}\n\n\tset_status_field() {\n\t\tlet me = this;\n\n\t\tif (frappe.has_indicator(me.doctype)) {\n\t\t\tme.fields.push({\n\t\t\t\ttype: \"Status\",\n\t\t\t\tlabel: \"Status\",\n\t\t\t\tfieldname: \"status_field\"\n\t\t\t});\n\t\t}\n\t}\n\n\tget_doctype_fields(meta, fields) {\n\t\tlet multiselect_fields = [];\n\n\t\tmeta.fields.forEach(field => {\n\t\t\tif (!in_list(frappe.model.no_value_type, field.fieldtype)) {\n\t\t\t\tmultiselect_fields.push({\n\t\t\t\t\tlabel: field.label,\n\t\t\t\t\tvalue: field.fieldname,\n\t\t\t\t\tchecked: in_list(fields, field.fieldname)\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\treturn multiselect_fields;\n\t}\n\n\tget_removed_listview_fields(new_fields, existing_fields) {\n\t\tlet me = this;\n\t\tlet removed_fields = [];\n\n\t\tif (frappe.has_indicator(me.doctype)) {\n\t\t\tnew_fields.push(\"status_field\");\n\t\t}\n\n\t\texisting_fields.forEach(column => {\n\t\t\tif (!in_list(new_fields, column)) {\n\t\t\t\tremoved_fields.push(column);\n\t\t\t}\n\t\t});\n\n\t\treturn removed_fields;\n\t}\n\n\tset_removed_fields(fields) {\n\t\tlet me = this;\n\n\t\tif (me.removed_fields) {\n\t\t\tme.removed_fields.concat(fields);\n\t\t} else {\n\t\t\tme.removed_fields = fields;\n\t\t}\n\t}\n}\n","import BulkOperations from \"./bulk_operations\";\nimport ListSettings from \"./list_settings\";\n\nfrappe.provide('frappe.views');\n\nfrappe.views.ListView = class ListView extends frappe.views.BaseList {\n\tstatic load_last_view() {\n\t\tconst route = frappe.get_route();\n\t\tconst doctype = route[1];\n\n\t\tif (route.length === 2) {\n\t\t\t// List/{doctype} => List/{doctype}/{last_view} or List\n\t\t\tconst user_settings = frappe.get_user_settings(doctype);\n\t\t\tconst last_view = user_settings.last_view;\n\t\t\tfrappe.set_route('List', doctype, frappe.views.is_valid(last_view) ? last_view : 'List');\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tconstructor(opts) {\n\t\tsuper(opts);\n\t\tthis.show();\n\t}\n\n\thas_permissions() {\n\t\tconst can_read = frappe.perm.has_perm(this.doctype, 0, 'read');\n\t\treturn can_read;\n\t}\n\n\tshow() {\n\t\tthis.parent.disable_scroll_to_top = true;\n\n\t\tif (!this.has_permissions()) {\n\t\t\tfrappe.set_route('');\n\t\t\tfrappe.msgprint(__(\"Not permitted to view {0}\", [this.doctype]));\n\t\t\treturn;\n\t\t}\n\n\t\tsuper.show();\n\t}\n\n\tget view_name() {\n\t\treturn 'List';\n\t}\n\n\tget view_user_settings() {\n\t\treturn this.user_settings[this.view_name] || {};\n\t}\n\n\tsetup_defaults() {\n\t\tsuper.setup_defaults();\n\n\t\tthis.view = 'List';\n\t\t// initialize with saved order by\n\t\tthis.sort_by = this.view_user_settings.sort_by || 'modified';\n\t\tthis.sort_order = this.view_user_settings.sort_order || 'desc';\n\n\t\t// set filters from user_settings or list_settings\n\t\tif (this.view_user_settings.filters && this.view_user_settings.filters.length) {\n\t\t\t// Priority 1: user_settings\n\t\t\tconst saved_filters = this.view_user_settings.filters;\n\t\t\tthis.filters = this.validate_filters(saved_filters);\n\t\t} else {\n\t\t\t// Priority 2: filters in listview_settings\n\t\t\tthis.filters = (this.settings.filters || []).map(f => {\n\t\t\t\tif (f.length === 3) {\n\t\t\t\t\tf = [this.doctype, f[0], f[1], f[2]];\n\t\t\t\t}\n\t\t\t\treturn f;\n\t\t\t});\n\t\t}\n\n\t\t// build menu items\n\t\tthis.menu_items = this.menu_items.concat(this.get_menu_items());\n\n\t\tif (this.view_user_settings.filters && this.view_user_settings.filters.length) {\n\t\t\t// Priority 1: saved filters\n\t\t\tconst saved_filters = this.view_user_settings.filters;\n\t\t\tthis.filters = this.validate_filters(saved_filters);\n\t\t} else {\n\t\t\t// Priority 2: filters in listview_settings\n\t\t\tthis.filters = (this.settings.filters || []).map(f => {\n\t\t\t\tif (f.length === 3) {\n\t\t\t\t\tf = [this.doctype, f[0], f[1], f[2]];\n\t\t\t\t}\n\t\t\t\treturn f;\n\t\t\t});\n\t\t}\n\n\t\tthis.patch_refresh_and_load_lib();\n\t\treturn this.get_list_view_settings();\n\t}\n\n\tget_list_view_settings() {\n\t\treturn frappe.call(\"frappe.desk.listview.get_list_settings\", {doctype: this.doctype})\n\t\t\t.then(doc => this.list_view_settings = doc.message || {});\n\t}\n\n\ton_sort_change(sort_by, sort_order) {\n\t\tthis.sort_by = sort_by;\n\t\tthis.sort_order = sort_order;\n\t\tsuper.on_sort_change();\n\t}\n\n\tvalidate_filters(filters) {\n\t\tconst valid_fields = this.meta.fields.map(df => df.fieldname);\n\t\treturn filters\n\t\t\t.filter(f => valid_fields.includes(f[1]))\n\t\t\t.uniqBy(f => f[1]);\n\t}\n\n\tsetup_page() {\n\t\tthis.parent.list_view = this;\n\t\tsuper.setup_page();\n\t}\n\n\tsetup_page_head() {\n\t\tsuper.setup_page_head();\n\t\tthis.set_primary_action();\n\t\tthis.set_actions_menu_items();\n\t}\n\n\tset_actions_menu_items() {\n\t\tthis.actions_menu_items = this.get_actions_menu_items();\n\t\tthis.workflow_action_menu_items = this.get_workflow_action_menu_items();\n\t\tthis.workflow_action_items = {};\n\n\t\tconst actions = this.actions_menu_items.concat(this.workflow_action_menu_items);\n\t\tactions.map(item => {\n\t\t\tconst $item = this.page.add_actions_menu_item(item.label, item.action, item.standard);\n\t\t\tif (item.class) {\n\t\t\t\t$item.addClass(item.class);\n\t\t\t}\n\t\t\tif (item.is_workflow_action && $item) {\n\t\t\t\t// can be used to dynamically show or hide action\n\t\t\t\tthis.workflow_action_items[item.name] = $item;\n\t\t\t}\n\t\t});\n\t}\n\n\tshow_restricted_list_indicator_if_applicable() {\n\t\tconst match_rules_list = frappe.perm.get_match_rules(this.doctype);\n\t\tif (match_rules_list.length) {\n\t\t\tthis.restricted_list = $(`<button class=\"restricted-button\">${__('Restricted')}</button>`)\n\t\t\t\t.prepend('<span class=\"octicon octicon-lock\"></span>')\n\t\t\t\t.click(() => this.show_restrictions(match_rules_list))\n\t\t\t\t.appendTo(this.page.page_form);\n\t\t}\n\t}\n\n\tshow_restrictions(match_rules_list=[]) {\n\t\tfrappe.msgprint(frappe.render_template('list_view_permission_restrictions', {\n\t\t\tcondition_list: match_rules_list\n\t\t}), __('Restrictions'));\n\t}\n\n\tset_fields() {\n\t\tlet fields = [].concat(\n\t\t\tfrappe.model.std_fields_list,\n\t\t\tthis.get_fields_in_list_view(),\n\t\t\t[this.meta.title_field, this.meta.image_field],\n\t\t\t(this.settings.add_fields || []),\n\t\t\tthis.meta.track_seen ? '_seen' : null,\n\t\t\tthis.sort_by,\n\t\t\t'enabled',\n\t\t\t'disabled',\n\t\t\t'color'\n\t\t);\n\n\t\tfields.forEach(f => this._add_field(f));\n\n\t\tthis.fields.forEach(f => {\n\t\t\tconst df = frappe.meta.get_docfield(f[1], f[0]);\n\t\t\tif (df && df.fieldtype === 'Currency' && df.options && !df.options.includes(':')) {\n\t\t\t\tthis._add_field(df.options);\n\t\t\t}\n\t\t});\n\t}\n\n\tpatch_refresh_and_load_lib() {\n\t\t// throttle refresh for 1s\n\t\tthis.refresh = this.refresh.bind(this);\n\t\tthis.refresh = frappe.utils.throttle(this.refresh, 1000);\n\t\tthis.load_lib = new Promise(resolve => {\n\t\t\tif (this.required_libs) {\n\t\t\t\tfrappe.require(this.required_libs, resolve);\n\t\t\t} else {\n\t\t\t\tresolve();\n\t\t\t}\n\t\t});\n\t\t// call refresh every 5 minutes\n\t\tconst interval = 5 * 60 * 1000;\n\t\tsetInterval(() => {\n\t\t\t// don't call if route is different\n\t\t\tif (frappe.get_route_str() === this.page_name) {\n\t\t\t\tthis.refresh();\n\t\t\t}\n\t\t}, interval);\n\t}\n\n\tset_primary_action() {\n\t\tif (this.can_create) {\n\t\t\tthis.page.set_primary_action(__('New'), () => {\n\t\t\t\tif (this.settings.primary_action) {\n\t\t\t\t\tthis.settings.primary_action();\n\t\t\t\t} else {\n\t\t\t\t\tthis.make_new_doc();\n\t\t\t\t}\n\t\t\t}, 'octicon octicon-plus');\n\t\t} else {\n\t\t\tthis.page.clear_primary_action();\n\t\t}\n\t}\n\n\tmake_new_doc() {\n\t\tconst doctype = this.doctype;\n\t\tconst options = {};\n\t\tthis.filter_area.get().forEach(f => {\n\t\t\tif (f[2] === \"=\" && frappe.model.is_non_std_field(f[1])) {\n\t\t\t\toptions[f[1]] = f[3];\n\t\t\t}\n\t\t});\n\t\tfrappe.new_doc(doctype, options);\n\t}\n\n\tsetup_view() {\n\t\tthis.setup_columns();\n\t\tthis.render_header();\n\t\tthis.render_skeleton();\n\t\tthis.setup_events();\n\t\tthis.settings.onload && this.settings.onload(this);\n\t\tthis.show_restricted_list_indicator_if_applicable();\n\n\t}\n\n\trefresh_columns(meta, list_view_settings) {\n\t\tthis.meta = meta;\n\t\tthis.list_view_settings = list_view_settings;\n\n\t\tthis.setup_columns();\n\t\tthis.refresh(true);\n\t}\n\n\trefresh(refresh_header=false) {\n\t\tsuper.refresh().then(() => {\n\t\t\tthis.render_header(refresh_header);\n\t\t});\n\t}\n\n\tsetup_freeze_area() {\n\t\tthis.$freeze =\n\t\t\t$(`<div class=\"freeze flex justify-center align-center text-muted\">${__('Loading')}...</div>`)\n\t\t\t\t.hide();\n\t\tthis.$result.append(this.$freeze);\n\t}\n\n\tsetup_columns() {\n\t\t// setup columns for list view\n\t\tthis.columns = [];\n\n\t\tconst get_df = frappe.meta.get_docfield.bind(null, this.doctype);\n\n\t\t// 1st column: title_field or name\n\t\tif (this.meta.title_field) {\n\t\t\tthis.columns.push({\n\t\t\t\ttype: 'Subject',\n\t\t\t\tdf: get_df(this.meta.title_field)\n\t\t\t});\n\t\t} else {\n\t\t\tthis.columns.push({\n\t\t\t\ttype: 'Subject',\n\t\t\t\tdf: {\n\t\t\t\t\tlabel: __('Name'),\n\t\t\t\t\tfieldname: 'name'\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t// 2nd column: Status indicator\n\t\tif (frappe.has_indicator(this.doctype)) {\n\t\t\t// indicator\n\t\t\tthis.columns.push({\n\t\t\t\ttype: 'Status'\n\t\t\t});\n\t\t}\n\n\t\tconst fields_in_list_view = this.get_fields_in_list_view();\n\t\t// Add rest from in_list_view docfields\n\t\tthis.columns = this.columns.concat(\n\t\t\tfields_in_list_view\n\t\t\t\t.filter(df => {\n\t\t\t\t\tif (frappe.has_indicator(this.doctype) && df.fieldname === 'status') {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tif (!df.in_list_view) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\treturn df.fieldname !== this.meta.title_field;\n\t\t\t\t})\n\t\t\t\t.map(df => ({\n\t\t\t\t\ttype: 'Field',\n\t\t\t\t\tdf\n\t\t\t\t}))\n\t\t);\n\n\t\tif (this.list_view_settings.fields) {\n\t\t\tthis.columns = this.reorder_listview_fields();\n\t\t}\n\n\t\t// limit max to 8 columns if no total_fields is set in List View Settings\n\t\t// Screen with low density no of columns 4\n\t\t// Screen with medium density no of columns 6\n\t\t// Screen with high density no of columns 8\n\t\tlet total_fields = 6;\n\n\t\tif (window.innerWidth <= 1366) {\n\t\t\ttotal_fields = 4;\n\t\t} else if (window.innerWidth >= 1920) {\n\t\t\ttotal_fields = 8;\n\t\t}\n\n\t\tthis.columns = this.columns.slice(0, this.list_view_settings.total_fields || total_fields);\n\t}\n\n\treorder_listview_fields() {\n\t\tlet fields_order = [];\n\t\tlet fields = JSON.parse(this.list_view_settings.fields);\n\n\t\t//title_field is fixed\n\t\tfields_order.push(this.columns[0]);\n\t\tthis.columns.splice(0, 1);\n\n\t\tfor (let fld in fields) {\n\t\t\tfor (let col in this.columns) {\n\t\t\t\tlet field = fields[fld];\n\t\t\t\tlet column = this.columns[col];\n\n\t\t\t\tif (column.type == \"Status\" && field.fieldname == \"status_field\") {\n\t\t\t\t\tfields_order.push(column);\n\t\t\t\t\tbreak;\n\t\t\t\t} else if (column.type == \"Field\" && field.fieldname === column.df.fieldname) {\n\t\t\t\t\tfields_order.push(column);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn fields_order;\n\t}\n\n\tget_documentation_link() {\n\t\tif (this.meta.documentation) {\n\t\t\treturn `<a href=\"${this.meta.documentation}\" target=\"blank\" class=\"meta-description small text-muted\">Need Help?</a>`;\n\t\t}\n\t\treturn '';\n\t}\n\n\tget_no_result_message() {\n\t\tlet help_link = this.get_documentation_link();\n\t\tlet filters = this.filter_area.get();\n\t\tlet no_result_message = filters.length ? __('No {0} found', [__(this.doctype)]) : __('You haven\\'t created a {0} yet', [__(this.doctype)]);\n\t\tlet new_button_label = filters.length ? __('Create a new {0}', [__(this.doctype)]) : __('Create your first {0}', [__(this.doctype)]);\n\t\tlet empty_state_image = this.settings.empty_state_image || '/assets/frappe/images/ui-states/empty.png';\n\n\t\tconst new_button = this.can_create ?\n\t\t\t`<p><button class=\"btn btn-primary btn-sm btn-new-doc\">\n\t\t\t\t${new_button_label}\n\t\t\t</button></p>` : '';\n\n\t\treturn `<div class=\"msg-box no-border\">\n\t\t\t<div>\n\t\t\t\t<img src=\"${empty_state_image}\" alt=\"Generic Empty State\" class=\"null-state\">\n\t\t\t</div>\n\t\t\t<p>${no_result_message}</p>\n\t\t\t${new_button}\n\t\t\t${help_link}\n\t\t</div>`;\n\t}\n\n\tfreeze() {\n\t\tif (this.list_view_settings && !this.list_view_settings.disable_count) {\n\t\t\tthis.$result.find('.list-count').html(`<span>${__('Refreshing')}...</span>`);\n\t\t}\n\t}\n\n\tget_args() {\n\t\tconst args = super.get_args();\n\n\t\treturn Object.assign(args, {\n\t\t\twith_comment_count: true\n\t\t});\n\t}\n\n\tbefore_refresh() {\n\t\tif (frappe.route_options) {\n\t\t\tthis.filters = this.parse_filters_from_route_options();\n\t\t\tfrappe.route_options = null;\n\n\t\t\tif (this.filters.length > 0) {\n\t\t\t\treturn this.filter_area.clear(false)\n\t\t\t\t\t.then(() => this.filter_area.set(this.filters));\n\t\t\t}\n\t\t}\n\n\t\treturn Promise.resolve();\n\t}\n\n\tparse_filters_from_settings() {\n\t\treturn (this.settings.filters || []).map(f => {\n\t\t\tif (f.length === 3) {\n\t\t\t\tf = [this.doctype, f[0], f[1], f[2]];\n\t\t\t}\n\t\t\treturn f;\n\t\t});\n\t}\n\n\ttoggle_result_area() {\n\t\tsuper.toggle_result_area();\n\t\tthis.toggle_actions_menu_button(\n\t\t\tthis.$result.find('.list-row-check:checked').length > 0\n\t\t);\n\t}\n\n\ttoggle_actions_menu_button(toggle) {\n\t\tif (toggle) {\n\t\t\tthis.page.show_actions_menu();\n\t\t\tthis.page.clear_primary_action();\n\t\t\tthis.toggle_workflow_actions();\n\t\t} else {\n\t\t\tthis.page.hide_actions_menu();\n\t\t\tthis.set_primary_action();\n\t\t}\n\t}\n\n\trender_header(refresh_header=false) {\n\t\tif (refresh_header) {\n\t\t\tthis.$result.find('.list-row-head').remove();\n\t\t}\n\n\t\tif (this.$result.find('.list-row-head').length === 0) {\n\t\t\t// append header once\n\t\t\tthis.$result.prepend(this.get_header_html());\n\t\t}\n\t}\n\n\trender_skeleton() {\n\t\tconst $row = this.get_list_row_html_skeleton('<div><input type=\"checkbox\" /></div>');\n\t\tthis.$result.append($row);\n\t}\n\n\tbefore_render() {\n\t\tthis.settings.before_render && this.settings.before_render();\n\t\tfrappe.model.user_settings.save(this.doctype, 'last_view', this.view_name);\n\t\tthis.save_view_user_settings({\n\t\t\tfilters: this.filter_area.get(),\n\t\t\tsort_by: this.sort_selector.sort_by,\n\t\t\tsort_order: this.sort_selector.sort_order\n\t\t});\n\t}\n\n\tafter_render() {\n\t\tthis.$no_result.html(`\n\t\t\t<div class=\"no-result text-muted flex justify-center align-center\">\n\t\t\t\t${this.get_no_result_message()}\n\t\t\t</div>\n\t\t`);\n\t\tthis.setup_new_doc_event();\n\t\tthis.list_sidebar.reload_stats();\n\t}\n\n\trender() {\n\t\tthis.render_list();\n\t\tthis.on_row_checked();\n\t\tthis.render_count();\n\t\tthis.render_tags();\n\t}\n\n\trender_list() {\n\t\t// clear rows\n\t\tthis.$result.find('.list-row-container').remove();\n\t\tif (this.data.length > 0) {\n\t\t\t// append rows\n\t\t\tthis.$result.append(\n\t\t\t\tthis.data.map((doc, i) => {\n\t\t\t\t\tdoc._idx = i;\n\t\t\t\t\treturn this.get_list_row_html(doc);\n\t\t\t\t}).join('')\n\t\t\t);\n\t\t}\n\t}\n\n\trender_count() {\n\t\tif (!this.list_view_settings.disable_count) {\n\t\t\tthis.get_count_str().then(str => {\n\t\t\t\tthis.$result.find('.list-count').html(`<span>${str}</span>`);\n\t\t\t});\n\t\t}\n\t}\n\n\trender_tags() {\n\t\tconst $list_rows = this.$result.find('.list-row-container');\n\n\t\tthis.data.forEach((d, i) => {\n\t\t\tlet tag_html = $(`<div class='tag-row'>\n\t\t\t\t<div class='list-tag hidden-xs'></div>\n\t\t\t</div>`).appendTo($list_rows.get(i));\n\n\t\t\t// add tags\n\t\t\tlet tag_editor = new frappe.ui.TagEditor({\n\t\t\t\tparent: tag_html.find('.list-tag'),\n\t\t\t\tfrm: {\n\t\t\t\t\tdoctype: this.doctype,\n\t\t\t\t\tdocname: d.name\n\t\t\t\t},\n\t\t\t\tlist_sidebar: this.list_sidebar,\n\t\t\t\tuser_tags: d._user_tags,\n\t\t\t\ton_change: (user_tags) => {\n\t\t\t\t\td._user_tags = user_tags;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\ttag_editor.wrapper.on('click', '.tagit-label', (e) => {\n\t\t\t\tconst $this = $(e.currentTarget);\n\t\t\t\tthis.filter_area.add(this.doctype, '_user_tags', '=', $this.text());\n\t\t\t});\n\t\t});\n\t}\n\n\tget_header_html() {\n\t\tif (!this.columns) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst subject_field = this.columns[0].df;\n\t\tlet subject_html = `\n\t\t\t<input class=\"level-item list-check-all hidden-xs\" type=\"checkbox\" title=\"${__(\"Select All\")}\">\n\t\t\t<span class=\"level-item list-liked-by-me\">\n\t\t\t\t<i class=\"octicon octicon-heart text-extra-muted\" title=\"${__(\"Likes\")}\"></i>\n\t\t\t</span>\n\t\t\t<span class=\"level-item\">${__(subject_field.label)}</span>\n\t\t`;\n\t\tconst $columns = this.columns.map(col => {\n\t\t\tlet classes = [\n\t\t\t\t'list-row-col ellipsis',\n\t\t\t\tcol.type == 'Subject' ? 'list-subject level' : 'hidden-xs',\n\t\t\t\tfrappe.model.is_numeric_field(col.df) ? 'text-right' : ''\n\t\t\t].join(' ');\n\n\t\t\treturn `\n\t\t\t\t<div class=\"${classes}\">\n\t\t\t\t\t${col.type === 'Subject' ? subject_html : `\n\t\t\t\t\t<span>${__(col.df && col.df.label || col.type)}</span>`}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}).join('');\n\n\t\treturn this.get_header_html_skeleton($columns, '<span class=\"list-count\"></span>');\n\t}\n\n\tget_header_html_skeleton(left = '', right = '') {\n\t\treturn `\n\t\t\t<header class=\"level list-row list-row-head text-muted small\">\n\t\t\t\t<div class=\"level-left list-header-subject\">\n\t\t\t\t\t${left}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"level-left checkbox-actions\">\n\t\t\t\t\t<div class=\"level list-subject\">\n\t\t\t\t\t\t<input class=\"level-item list-check-all hidden-xs\" type=\"checkbox\" title=\"${__(\"Select All\")}\">\n\t\t\t\t\t\t<span class=\"level-item list-header-meta\"></span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"level-right\">\n\t\t\t\t\t${right}\n\t\t\t\t</div>\n\t\t\t</header>\n\t\t`;\n\t}\n\n\tget_left_html(doc) {\n\t\treturn this.columns.map(col => this.get_column_html(col, doc)).join('');\n\t}\n\n\tget_right_html(doc) {\n\t\treturn this.get_meta_html(doc);\n\t}\n\n\tget_list_row_html(doc) {\n\t\treturn this.get_list_row_html_skeleton(this.get_left_html(doc),\n\t\t\tthis.get_right_html(doc));\n\t}\n\n\tget_list_row_html_skeleton(left = '', right = '') {\n\t\treturn `\n\t\t\t<div class=\"list-row-container\" tabindex=\"1\">\n\t\t\t\t<div class=\"level list-row small\">\n\t\t\t\t\t<div class=\"level-left ellipsis\">\n\t\t\t\t\t\t${left}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"level-right text-muted ellipsis\">\n\t\t\t\t\t\t${right}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tget_column_html(col, doc) {\n\t\tif (col.type === 'Status') {\n\t\t\treturn `\n\t\t\t\t<div class=\"list-row-col hidden-xs ellipsis\">\n\t\t\t\t\t${this.get_indicator_html(doc)}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\tconst df = col.df || {};\n\t\tconst label = df.label;\n\t\tconst fieldname = df.fieldname;\n\t\tconst value = doc[fieldname] || '';\n\n\t\tconst format = () => {\n\t\t\tif (df.fieldtype === 'Code') {\n\t\t\t\treturn value;\n\t\t\t} else if (df.fieldtype === 'Percent') {\n\t\t\t\treturn `<div class=\"progress level\" style=\"margin: 0px;\">\n\t\t\t\t\t\t<div class=\"progress-bar progress-bar-success\" role=\"progressbar\"\n\t\t\t\t\t\t\taria-valuenow=\"${value}\"\n\t\t\t\t\t\t\taria-valuemin=\"0\" aria-valuemax=\"100\" style=\"width: ${Math.round(value)}%;\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>`;\n\t\t\t} else {\n\t\t\t\treturn frappe.format(value, df, null, doc);\n\t\t\t}\n\t\t};\n\n\t\tconst field_html = () => {\n\t\t\tlet html;\n\t\t\tlet _value;\n\t\t\t// listview_setting formatter\n\t\t\tif (this.settings.formatters && this.settings.formatters[fieldname]) {\n\t\t\t\t_value = this.settings.formatters[fieldname](value, df, doc);\n\t\t\t} else {\n\t\t\t\tlet strip_html_required = df.fieldtype == 'Text Editor'\n\t\t\t\t\t|| (df.fetch_from && ['Text', 'Small Text'].includes(df.fieldtype));\n\t\t\t\tif (strip_html_required) {\n\t\t\t\t\t_value = strip_html(value);\n\t\t\t\t} else {\n\t\t\t\t\t_value = typeof value === 'string' ? frappe.utils.escape_html(value) : value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (df.fieldtype === 'Image') {\n\t\t\t\thtml = df.options ?\n\t\t\t\t\t`<img src=\"${doc[df.options]}\" style=\"max-height: 30px; max-width: 100%;\">` :\n\t\t\t\t\t`<div class=\"missing-image small\">\n\t\t\t\t\t\t<span class=\"octicon octicon-circle-slash\"></span>\n\t\t\t\t\t</div>`;\n\t\t\t} else if (df.fieldtype === 'Select') {\n\t\t\t\thtml = `<span class=\"filterable indicator ${frappe.utils.guess_colour(_value)} ellipsis\"\n\t\t\t\t\tdata-filter=\"${fieldname},=,${value}\">\n\t\t\t\t\t${__(_value)}\n\t\t\t\t</span>`;\n\t\t\t} else if (df.fieldtype === 'Link') {\n\t\t\t\thtml = `<a class=\"filterable text-muted ellipsis\"\n\t\t\t\t\tdata-filter=\"${fieldname},=,${value}\">\n\t\t\t\t\t${_value}\n\t\t\t\t</a>`;\n\t\t\t} else if (['Text Editor', 'Text', 'Small Text', 'HTML Editor'].includes(df.fieldtype)) {\n\t\t\t\thtml = `<span class=\"text-muted ellipsis\">\n\t\t\t\t\t${_value}\n\t\t\t\t</span>`;\n\t\t\t} else {\n\t\t\t\thtml = `<a class=\"filterable text-muted ellipsis\"\n\t\t\t\t\tdata-filter=\"${fieldname},=,${value}\">\n\t\t\t\t\t${format()}\n\t\t\t\t</a>`;\n\t\t\t}\n\n\t\t\treturn `<span class=\"ellipsis\"\n\t\t\t\ttitle=\"${__(label)}: ${escape(_value)}\">\n\t\t\t\t${html}\n\t\t\t</span>`;\n\t\t};\n\n\t\tconst class_map = {\n\t\t\tSubject: 'list-subject level',\n\t\t\tField: 'hidden-xs'\n\t\t};\n\t\tconst css_class = [\n\t\t\t'list-row-col ellipsis',\n\t\t\tclass_map[col.type],\n\t\t\tfrappe.model.is_numeric_field(df) ? 'text-right' : ''\n\t\t].join(' ');\n\n\t\tconst html_map = {\n\t\t\tSubject: this.get_subject_html(doc),\n\t\t\tField: field_html()\n\t\t};\n\t\tconst column_html = html_map[col.type];\n\n\t\treturn `\n\t\t\t<div class=\"${css_class}\">\n\t\t\t\t${column_html}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tget_meta_html(doc) {\n\t\tlet html = '';\n\t\tif (!this.settings.hide_name_column && doc[this.meta.title_field || ''] !== doc.name) {\n\t\t\thtml += `\n\t\t\t\t<div class=\"level-item hidden-xs hidden-sm ellipsis\">\n\t\t\t\t\t<a class=\"text-muted ellipsis\" href=\"${this.get_form_link(doc)}\">\n\t\t\t\t\t\t${doc.name}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\tif (this.settings.button && this.settings.button.show(doc)) {\n\t\t\thtml += `\n\t\t\t\t<div class=\"level-item hidden-xs\">\n\t\t\t\t\t<button class=\"btn btn-action btn-default btn-xs\"\n\t\t\t\t\t\tdata-name=\"${doc.name}\" data-idx=\"${doc._idx}\"\n\t\t\t\t\t\ttitle=\"${this.settings.button.get_description(doc)}\">\n\t\t\t\t\t\t${this.settings.button.get_label(doc)}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\tconst modified = comment_when(doc.modified, true);\n\n\t\tconst last_assignee = JSON.parse(doc._assign || '[]').slice(-1)[0];\n\t\tconst assigned_to = last_assignee ?\n\t\t\t`<span class=\"filterable\"\n\t\t\t\tdata-filter=\"_assign,like,%${last_assignee}%\">\n\t\t\t\t${frappe.avatar(last_assignee)}\n\t\t\t</span>` :\n\t\t\t`<span class=\"avatar avatar-small avatar-empty\"></span>`;\n\n\t\tconst comment_count =\n\t\t\t`<span class=\"${!doc._comment_count ? 'text-extra-muted' : ''} comment-count\">\n\t\t\t\t<i class=\"octicon octicon-comment-discussion\"></i>\n\t\t\t\t${doc._comment_count > 99 ? \"99+\" : doc._comment_count}\n\t\t\t</span>`;\n\n\t\thtml += `\n\t\t\t<div class=\"level-item hidden-xs list-row-activity\">\n\t\t\t\t${modified}\n\t\t\t\t${assigned_to}\n\t\t\t\t${comment_count}\n\t\t\t</div>\n\t\t\t<div class=\"level-item visible-xs text-right\">\n\t\t\t\t${this.get_indicator_dot(doc)}\n\t\t\t</div>\n\t\t`;\n\n\t\treturn html;\n\t}\n\n\tget_count_str() {\n\t\tlet current_count = this.data.length;\n\t\tlet count_without_children = this.data.uniqBy(d => d.name).length;\n\n\t\treturn frappe.db.count(this.doctype, {\n\t\t\tfilters: this.get_filters_for_args()\n\t\t}).then(total_count => {\n\t\t\tthis.total_count = total_count || current_count;\n\t\t\tlet str = __('{0} of {1}', [current_count, this.total_count]);\n\t\t\tif (count_without_children !== current_count) {\n\t\t\t\tstr = __('{0} of {1} ({2} rows with children)', [count_without_children, this.total_count, current_count]);\n\t\t\t}\n\t\t\treturn str;\n\t\t});\n\t}\n\n\tget_form_link(doc) {\n\t\tif (this.settings.get_form_link) {\n\t\t\treturn this.settings.get_form_link(doc);\n\t\t}\n\n\t\tconst docname = doc.name.match(/[%'\"]/)\n\t\t\t? encodeURIComponent(doc.name)\n\t\t\t: doc.name;\n\n\t\treturn '#Form/' + this.doctype + '/' + docname;\n\t}\n\n\tget_seen_class(doc) {\n\t\treturn JSON.parse(doc._seen || '[]').includes(frappe.session.user)\n\t\t\t? ''\n\t\t\t: 'bold';\n\t}\n\n\tget_subject_html(doc) {\n\t\tlet user = frappe.session.user;\n\t\tlet subject_field = this.columns[0].df;\n\t\tlet value = doc[subject_field.fieldname] || doc.name;\n\t\tlet subject = strip_html(value.toString());\n\t\tlet escaped_subject = frappe.utils.escape_html(subject);\n\n\t\tconst liked_by = JSON.parse(doc._liked_by || '[]');\n\t\tlet heart_class = liked_by.includes(user) ?\n\t\t\t'liked-by' : 'text-extra-muted not-liked';\n\n\t\tconst seen = this.get_seen_class(doc);\n\n\t\tlet subject_html = `\n\t\t\t<input class=\"level-item list-row-checkbox hidden-xs\" type=\"checkbox\" data-name=\"${escape(doc.name)}\">\n\t\t\t<span class=\"level-item\" style=\"margin-bottom: 1px;\">\n\t\t\t\t<i class=\"octicon octicon-heart like-action ${heart_class}\"\n\t\t\t\t\tdata-name=\"${doc.name}\" data-doctype=\"${this.doctype}\"\n\t\t\t\t\tdata-liked-by=\"${encodeURI(doc._liked_by) || '[]'}\"\n\t\t\t\t>\n\t\t\t\t</i>\n\t\t\t\t<span class=\"likes-count\">\n\t\t\t\t\t${ liked_by.length > 99 ? __(\"99\") + '+' : __(liked_by.length || '')}\n\t\t\t\t</span>\n\t\t\t</span>\n\t\t\t<span class=\"level-item ${seen} ellipsis\" title=\"${escaped_subject}\">\n\t\t\t\t<a class=\"ellipsis\" href=\"${this.get_form_link(doc)}\" title=\"${escaped_subject}\" data-doctype=\"${this.doctype}\" data-name=\"${doc.name}\">\n\t\t\t\t${subject}\n\t\t\t\t</a>\n\t\t\t</span>\n\t\t`;\n\n\t\treturn subject_html;\n\t}\n\n\tget_indicator_html(doc) {\n\t\tconst indicator = frappe.get_indicator(doc, this.doctype);\n\t\tif (indicator) {\n\t\t\treturn `<span class=\"indicator ${indicator[1]} filterable\"\n\t\t\t\tdata-filter='${indicator[2]}'>\n\t\t\t\t${__(indicator[0])}\n\t\t\t<span>`;\n\t\t}\n\t\treturn '';\n\t}\n\n\tget_indicator_dot(doc) {\n\t\tconst indicator = frappe.get_indicator(doc, this.doctype);\n\t\tif (!indicator) return '';\n\t\treturn `<span class='indicator ${indicator[1]}' title='${__(indicator[0])}'></span>`;\n\t}\n\n\tsetup_events() {\n\t\tthis.setup_filterable();\n\t\tthis.setup_list_click();\n\t\tthis.setup_tag_event();\n\t\tthis.setup_new_doc_event();\n\t\tthis.setup_check_events();\n\t\tthis.setup_like();\n\t\tthis.setup_realtime_updates();\n\t\tthis.setup_action_handler();\n\t\tthis.setup_keyboard_navigation();\n\t}\n\n\tsetup_keyboard_navigation() {\n\t\tlet focus_first_row = () => {\n\t\t\tthis.$result.find('.list-row-container:first').focus();\n\t\t};\n\t\tlet focus_next = () => {\n\t\t\t$(document.activeElement).next().focus();\n\t\t};\n\t\tlet focus_prev = () => {\n\t\t\t$(document.activeElement).prev().focus();\n\t\t};\n\t\tlet list_row_focused = () => {\n\t\t\treturn $(document.activeElement).is('.list-row-container');\n\t\t};\n\t\tlet check_row = ($row) => {\n\t\t\tlet $input = $row.find('input[type=checkbox]');\n\t\t\t$input.click();\n\t\t};\n\t\tlet get_list_row_if_focused = () =>\n\t\t\tlist_row_focused() ? $(document.activeElement) : null;\n\n\t\tlet is_current_page = () => this.page.wrapper.is(':visible');\n\t\tlet is_input_focused = () => $(document.activeElement).is('input');\n\n\t\tlet handle_navigation = (direction) => {\n\t\t\tif (!is_current_page() || is_input_focused()) return false;\n\n\t\t\tlet $list_row = get_list_row_if_focused();\n\t\t\tif ($list_row) {\n\t\t\t\tdirection === 'down' ? focus_next() : focus_prev();\n\t\t\t} else {\n\t\t\t\tfocus_first_row();\n\t\t\t}\n\t\t};\n\n\t\tfrappe.ui.keys.add_shortcut({\n\t\t\tshortcut: 'down',\n\t\t\taction: () => handle_navigation('down'),\n\t\t\tdescription: __('Navigate list down'),\n\t\t\tpage: this.page\n\t\t});\n\n\t\tfrappe.ui.keys.add_shortcut({\n\t\t\tshortcut: 'up',\n\t\t\taction: () => handle_navigation('up'),\n\t\t\tdescription: __('Navigate list up'),\n\t\t\tpage: this.page\n\t\t});\n\n\t\tfrappe.ui.keys.add_shortcut({\n\t\t\tshortcut: 'shift+down',\n\t\t\taction: () => {\n\t\t\t\tif (!is_current_page() || is_input_focused()) return false;\n\t\t\t\tlet $list_row = get_list_row_if_focused();\n\t\t\t\tcheck_row($list_row);\n\t\t\t\tfocus_next();\n\t\t\t},\n\t\t\tdescription: __('Select multiple list items'),\n\t\t\tpage: this.page\n\t\t});\n\n\t\tfrappe.ui.keys.add_shortcut({\n\t\t\tshortcut: 'shift+up',\n\t\t\taction: () => {\n\t\t\t\tif (!is_current_page() || is_input_focused()) return false;\n\t\t\t\tlet $list_row = get_list_row_if_focused();\n\t\t\t\tcheck_row($list_row);\n\t\t\t\tfocus_prev();\n\t\t\t},\n\t\t\tdescription: __('Select multiple list items'),\n\t\t\tpage: this.page\n\t\t});\n\n\t\tfrappe.ui.keys.add_shortcut({\n\t\t\tshortcut: 'enter',\n\t\t\taction: () => {\n\t\t\t\tlet $list_row = get_list_row_if_focused();\n\t\t\t\tif ($list_row) {\n\t\t\t\t\t$list_row.find('a[data-name]')[0].click();\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tdescription: __('Open list item'),\n\t\t\tpage: this.page\n\t\t});\n\n\t\tfrappe.ui.keys.add_shortcut({\n\t\t\tshortcut: 'space',\n\t\t\taction: () => {\n\t\t\t\tlet $list_row = get_list_row_if_focused();\n\t\t\t\tif ($list_row) {\n\t\t\t\t\tcheck_row($list_row);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tdescription: __('Select list item'),\n\t\t\tpage: this.page\n\t\t});\n\t}\n\n\tsetup_filterable() {\n\t\t// filterable events\n\t\tthis.$result.on('click', '.filterable', e => {\n\t\t\tif (e.metaKey || e.ctrlKey) return;\n\t\t\te.stopPropagation();\n\t\t\tconst $this = $(e.currentTarget);\n\t\t\tconst filters = $this.attr('data-filter').split('|');\n\n\t\t\tconst filters_to_apply = filters.map(f => {\n\t\t\t\tf = f.split(',');\n\t\t\t\tif (f[2] === 'Today') {\n\t\t\t\t\tf[2] = frappe.datetime.get_today();\n\t\t\t\t} else if (f[2] == 'User') {\n\t\t\t\t\tf[2] = frappe.session.user;\n\t\t\t\t}\n\t\t\t\treturn [this.doctype, f[0], f[1], f.slice(2).join(',')];\n\t\t\t});\n\t\t\tthis.filter_area.add(filters_to_apply);\n\t\t});\n\t}\n\n\tsetup_list_click() {\n\t\tthis.$result.on('click', '.list-row, .image-view-header', (e) => {\n\t\t\tconst $target = $(e.target);\n\t\t\t// tick checkbox if Ctrl/Meta key is pressed\n\t\t\tif (e.ctrlKey || e.metaKey && !$target.is('a')) {\n\t\t\t\tconst $list_row = $(e.currentTarget);\n\t\t\t\tconst $check = $list_row.find('.list-row-checkbox');\n\t\t\t\t$check.prop('checked', !$check.prop('checked'));\n\t\t\t\te.preventDefault();\n\t\t\t\tthis.on_row_checked();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// don't open form when checkbox, like, filterable are clicked\n\t\t\tif ($target.hasClass('filterable') ||\n\t\t\t\t$target.hasClass('octicon-heart') ||\n\t\t\t\t$target.is(':checkbox') ||\n\t\t\t\t$target.is('a')) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// open form\n\t\t\tconst $row = $(e.currentTarget);\n\t\t\tconst link = $row.find('.list-subject a').get(0);\n\t\t\tif (link) {\n\t\t\t\twindow.location.href = link.href;\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t}\n\n\tsetup_action_handler() {\n\t\tthis.$result.on('click', '.btn-action', (e) => {\n\t\t\tconst $button = $(e.currentTarget);\n\t\t\tconst doc = this.data[$button.attr('data-idx')];\n\t\t\tthis.settings.button.action(doc);\n\t\t\te.stopPropagation();\n\t\t\treturn false;\n\t\t});\n\t}\n\n\tsetup_check_events() {\n\t\tthis.$result.on('change', 'input[type=checkbox]', e => {\n\t\t\tconst $target = $(e.currentTarget);\n\n\t\t\tif ($target.is('.list-header-subject .list-check-all')) {\n\t\t\t\tconst $check = this.$result.find('.checkbox-actions .list-check-all');\n\t\t\t\t$check.prop('checked', $target.prop('checked'));\n\t\t\t\t$check.trigger('change');\n\t\t\t} else if ($target.is('.checkbox-actions .list-check-all')) {\n\t\t\t\tconst $check = this.$result.find('.list-header-subject .list-check-all');\n\t\t\t\t$check.prop('checked', $target.prop('checked'));\n\n\t\t\t\tthis.$result.find('.list-row-checkbox')\n\t\t\t\t\t.prop('checked', $target.prop('checked'));\n\t\t\t}\n\n\t\t\tthis.on_row_checked();\n\t\t});\n\n\t\tthis.$result.on('click', '.list-row-checkbox', e => {\n\t\t\tconst $target = $(e.currentTarget);\n\n\t\t\t// shift select checkboxes\n\t\t\tif (e.shiftKey && this.$checkbox_cursor && !$target.is(this.$checkbox_cursor)) {\n\t\t\t\tconst name_1 = this.$checkbox_cursor.data().name;\n\t\t\t\tconst name_2 = $target.data().name;\n\t\t\t\tconst index_1 = this.data.findIndex(d => d.name === name_1);\n\t\t\t\tconst index_2 = this.data.findIndex(d => d.name === name_2);\n\t\t\t\tlet [min_index, max_index] = [index_1, index_2];\n\n\t\t\t\tif (min_index > max_index) {\n\t\t\t\t\t[min_index, max_index] = [max_index, min_index];\n\t\t\t\t}\n\n\t\t\t\tlet docnames = this.data.slice(min_index + 1, max_index).map(d => d.name);\n\t\t\t\tconst selector = docnames.map(name => `.list-row-checkbox[data-name=\"${name}\"]`).join(',');\n\t\t\t\tthis.$result.find(selector).prop('checked', true);\n\t\t\t}\n\n\t\t\tthis.$checkbox_cursor = $target;\n\t\t});\n\t}\n\n\tsetup_like() {\n\t\tthis.$result.on('click', '.like-action', frappe.ui.click_toggle_like);\n\t\tthis.$result.on('click', '.list-liked-by-me', e => {\n\t\t\tconst $this = $(e.currentTarget);\n\t\t\t$this.toggleClass('active');\n\n\t\t\tif ($this.hasClass('active')) {\n\t\t\t\tthis.filter_area.add(this.doctype, '_liked_by', 'like', '%' + frappe.session.user + '%');\n\t\t\t} else {\n\t\t\t\tthis.filter_area.remove('_liked_by');\n\t\t\t}\n\t\t});\n\n\t\tfrappe.ui.setup_like_popover(this.$result, '.liked-by');\n\t}\n\n\tsetup_new_doc_event() {\n\t\tthis.$no_result.find('.btn-new-doc').click(() => {\n\t\t\tif (this.settings.primary_action) {\n\t\t\t\tthis.settings.primary_action();\n\t\t\t} else {\n\t\t\t\tthis.make_new_doc();\n\t\t\t}\n\t\t});\n\t}\n\n\tsetup_tag_event() {\n\t\tthis.list_sidebar.parent.on('click', '.list-tag-preview', () => {\n\t\t\tthis.toggle_tags();\n\t\t});\n\t}\n\n\tsetup_realtime_updates() {\n\t\tif (this.list_view_settings && this.list_view_settings.disable_auto_refresh) {\n\t\t\treturn;\n\t\t}\n\t\tfrappe.realtime.on('list_update', data => {\n\t\t\tif (this.filter_area.is_being_edited()) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { doctype, name } = data;\n\t\t\tif (doctype !== this.doctype) return;\n\n\t\t\t// filters to get only the doc with this name\n\t\t\tconst call_args = this.get_call_args();\n\t\t\tcall_args.args.filters.push([this.doctype, 'name', '=', name]);\n\t\t\tcall_args.args.start = 0;\n\n\t\t\tfrappe.call(call_args)\n\t\t\t\t.then(({ message }) => {\n\t\t\t\t\tif (!message) return;\n\t\t\t\t\tconst data = frappe.utils.dict(message.keys, message.values);\n\t\t\t\t\tif (!(data && data.length)) {\n\t\t\t\t\t\t// this doc was changed and should not be visible\n\t\t\t\t\t\t// in the listview according to filters applied\n\t\t\t\t\t\t// let's remove it manually\n\t\t\t\t\t\tthis.data = this.data.filter(d => d.name !== name);\n\t\t\t\t\t\tthis.render_list();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst datum = data[0];\n\t\t\t\t\tconst index = this.data.findIndex(d => d.name === datum.name);\n\n\t\t\t\t\tif (index === -1) {\n\t\t\t\t\t\t// append new data\n\t\t\t\t\t\tthis.data.push(datum);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// update this data in place\n\t\t\t\t\t\tthis.data[index] = datum;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.data.sort((a, b) => {\n\t\t\t\t\t\tconst a_value = a[this.sort_by] || '';\n\t\t\t\t\t\tconst b_value = b[this.sort_by] || '';\n\n\t\t\t\t\t\tlet return_value = 0;\n\t\t\t\t\t\tif (a_value > b_value) {\n\t\t\t\t\t\t\treturn_value = 1;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (b_value > a_value) {\n\t\t\t\t\t\t\treturn_value = -1;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (this.sort_order === 'desc') {\n\t\t\t\t\t\t\treturn_value = -return_value;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn return_value;\n\t\t\t\t\t});\n\t\t\t\t\tthis.toggle_result_area();\n\t\t\t\t\tthis.render_list();\n\t\t\t\t\tif (this.$checks && this.$checks.length) {\n\t\t\t\t\t\tthis.set_rows_as_checked();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t});\n\t}\n\n\tset_rows_as_checked() {\n\t\t$.each(this.$checks, (i, el) => {\n\t\t\tlet docname = $(el).attr('data-name');\n\t\t\tthis.$result.find(`.list-row-checkbox[data-name='${docname}']`).prop('checked', true);\n\t\t});\n\t\tthis.on_row_checked();\n\t}\n\n\ton_row_checked() {\n\t\tthis.$list_head_subject = this.$list_head_subject || this.$result.find('header .list-header-subject');\n\t\tthis.$checkbox_actions = this.$checkbox_actions || this.$result.find('header .checkbox-actions');\n\n\t\tthis.$checks = this.$result.find('.list-row-checkbox:checked');\n\n\t\tthis.$list_head_subject.toggle(this.$checks.length === 0);\n\t\tthis.$checkbox_actions.toggle(this.$checks.length > 0);\n\n\t\tif (this.$checks.length === 0) {\n\t\t\tthis.$list_head_subject.find('.list-check-all').prop('checked', false);\n\t\t} else {\n\t\t\tthis.$checkbox_actions.find('.list-header-meta').html(\n\t\t\t\t__('{0} items selected', [this.$checks.length])\n\t\t\t);\n\t\t\tthis.$checkbox_actions.show();\n\t\t\tthis.$list_head_subject.hide();\n\t\t}\n\t\tthis.toggle_actions_menu_button(this.$checks.length > 0);\n\t}\n\n\ttoggle_tags() {\n\t\tthis.$result.toggleClass('tags-shown');\n\t}\n\n\tget_checked_items(only_docnames) {\n\t\tconst docnames = Array.from(this.$checks || [])\n\t\t\t.map(check => cstr(unescape($(check).data().name)));\n\n\t\tif (only_docnames) return docnames;\n\n\t\treturn this.data.filter(d => docnames.includes(d.name));\n\t}\n\n\tsave_view_user_settings(obj) {\n\t\treturn frappe.model.user_settings.save(this.doctype, this.view_name, obj);\n\t}\n\n\ton_update() {\n\n\t}\n\n\tget_share_url() {\n\t\tconst query_params = this.get_filters_for_args().map(filter => {\n\t\t\tfilter[3] = encodeURIComponent(filter[3]);\n\t\t\tif (filter[2] === '=') {\n\t\t\t\treturn `${filter[1]}=${filter[3]}`;\n\t\t\t}\n\t\t\treturn [filter[1], '=', JSON.stringify([filter[2], filter[3]])].join('');\n\t\t}).join('&');\n\n\t\tlet full_url = window.location.href;\n\t\tif (query_params) {\n\t\t\tfull_url += '?' + query_params;\n\t\t}\n\t\treturn full_url;\n\t}\n\n\tshare_url() {\n\t\tconst d = new frappe.ui.Dialog({\n\t\t\ttitle: __('Share URL'),\n\t\t\tfields: [\n\t\t\t\t{\n\t\t\t\t\tfieldtype: 'Code',\n\t\t\t\t\tfieldname: 'url',\n\t\t\t\t\tlabel: 'URL',\n\t\t\t\t\tdefault: this.get_share_url(),\n\t\t\t\t\tread_only: 1\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\t\td.show();\n\t}\n\n\tget_menu_items() {\n\t\tconst doctype = this.doctype;\n\t\tconst items = [];\n\n\t\tif (frappe.model.can_import(doctype)) {\n\t\t\titems.push({\n\t\t\t\tlabel: __('Import'),\n\t\t\t\taction: () => frappe.set_route('List', 'Data Import', {\n\t\t\t\t\treference_doctype: doctype\n\t\t\t\t}),\n\t\t\t\tstandard: true\n\t\t\t});\n\t\t}\n\n\t\tif (frappe.model.can_set_user_permissions(doctype)) {\n\t\t\titems.push({\n\t\t\t\tlabel: __('User Permissions'),\n\t\t\t\taction: () => frappe.set_route('List', 'User Permission', {\n\t\t\t\t\tallow: doctype\n\t\t\t\t}),\n\t\t\t\tstandard: true\n\t\t\t});\n\t\t}\n\n\t\tif (frappe.user_roles.includes('System Manager')) {\n\t\t\titems.push({\n\t\t\t\tlabel: __('Role Permissions Manager'),\n\t\t\t\taction: () => frappe.set_route('permission-manager', {\n\t\t\t\t\tdoctype\n\t\t\t\t}),\n\t\t\t\tstandard: true\n\t\t\t});\n\n\t\t\titems.push({\n\t\t\t\tlabel: __('Customize'),\n\t\t\t\taction: () => {\n\t\t\t\t\tif (!this.meta) return;\n\t\t\t\t\tif (this.meta.custom) {\n\t\t\t\t\t\tfrappe.set_route('Form', 'DocType', doctype);\n\t\t\t\t\t} else if (!this.meta.custom) {\n\t\t\t\t\t\tfrappe.set_route('Form', 'Customize Form', {\n\t\t\t\t\t\t\tdoc_type: doctype\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tstandard: true,\n\t\t\t\tshortcut: 'Ctrl+J',\n\t\t\t});\n\t\t}\n\n\t\titems.push({\n\t\t\tlabel: __('Toggle Sidebar'),\n\t\t\taction: () => this.toggle_side_bar(),\n\t\t\tstandard: true,\n\t\t\tshortcut: 'Ctrl+K',\n\t\t});\n\n\t\titems.push({\n\t\t\tlabel: __('Share URL'),\n\t\t\taction: () => this.share_url(),\n\t\t\tstandard: true,\n\t\t\tshortcut: 'Ctrl+L',\n\t\t});\n\n\t\tif (frappe.user.has_role('System Manager') && frappe.boot.developer_mode === 1) {\n\t\t\t// edit doctype\n\t\t\titems.push({\n\t\t\t\tlabel: __('Edit DocType'),\n\t\t\t\taction: () => frappe.set_route('Form', 'DocType', doctype),\n\t\t\t\tstandard: true\n\t\t\t});\n\t\t}\n\n\t\tif (frappe.user.has_role('System Manager')) {\n\t\t\titems.push({\n\t\t\t\tlabel: __('Settings'),\n\t\t\t\taction: () => this.show_list_settings(),\n\t\t\t\tstandard: true\n\t\t\t});\n\t\t}\n\t\treturn items;\n\t}\n\n\tshow_list_settings() {\n\t\tfrappe.model.with_doctype(this.doctype, () => {\n\t\t\tnew ListSettings({\n\t\t\t\tlistview: this,\n\t\t\t\tdoctype: this.doctype,\n\t\t\t\tsettings: this.list_view_settings,\n\t\t\t\tmeta: frappe.get_meta(this.doctype)\n\t\t\t});\n\t\t});\n\t}\n\n\tget_workflow_action_menu_items() {\n\t\tconst workflow_actions = [];\n\t\tif (frappe.model.has_workflow(this.doctype)) {\n\t\t\tconst actions = frappe.workflow.get_all_transition_actions(this.doctype);\n\t\t\tactions.forEach(action => {\n\t\t\t\tworkflow_actions.push({\n\t\t\t\t\tlabel: __(action),\n\t\t\t\t\tname: action,\n\t\t\t\t\taction: () => {\n\t\t\t\t\t\tfrappe.xcall('frappe.model.workflow.bulk_workflow_approval', {\n\t\t\t\t\t\t\tdocnames: this.get_checked_items(true),\n\t\t\t\t\t\t\tdoctype: this.doctype,\n\t\t\t\t\t\t\taction: action\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tis_workflow_action: true\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\treturn workflow_actions;\n\t}\n\n\ttoggle_workflow_actions() {\n\t\tif (!frappe.model.has_workflow(this.doctype)) return;\n\t\tconst checked_items = this.get_checked_items();\n\t\tfrappe.xcall('frappe.model.workflow.get_common_transition_actions', {\n\t\t\tdocs: checked_items,\n\t\t\tdoctype: this.doctype\n\t\t}).then(actions => {\n\t\t\tObject.keys(this.workflow_action_items).forEach((key) => {\n\t\t\t\tthis.workflow_action_items[key].toggle(actions.includes(key));\n\t\t\t});\n\t\t});\n\t}\n\n\tget_actions_menu_items() {\n\t\tconst doctype = this.doctype;\n\t\tconst actions_menu_items = [];\n\t\tconst bulk_operations = new BulkOperations({ doctype: this.doctype });\n\n\t\tconst is_field_editable = (field_doc) => {\n\t\t\treturn field_doc.fieldname && frappe.model.is_value_type(field_doc)\n\t\t\t\t&& field_doc.fieldtype !== 'Read Only' && !field_doc.hidden && !field_doc.read_only;\n\t\t};\n\n\t\tconst has_editable_fields = (doctype) => {\n\t\t\treturn frappe.meta.get_docfields(doctype).some(field_doc => is_field_editable(field_doc));\n\t\t};\n\n\t\tconst has_submit_permission = (doctype) => {\n\t\t\treturn frappe.perm.has_perm(doctype, 0, 'submit');\n\t\t};\n\n\t\t// utility\n\t\tconst bulk_assignment = () => {\n\t\t\treturn {\n\t\t\t\tlabel: __('Assign To'),\n\t\t\t\taction: () => bulk_operations.assign(this.get_checked_items(true), this.refresh),\n\t\t\t\tstandard: true\n\t\t\t};\n\t\t};\n\n\t\tconst bulk_assignment_rule = () => {\n\t\t\treturn {\n\t\t\t\tlabel: __('Apply Assignment Rule'),\n\t\t\t\taction: () => bulk_operations.apply_assignment_rule(this.get_checked_items(true), this.refresh),\n\t\t\t\tstandard: true\n\t\t\t};\n\t\t};\n\n\t\tconst bulk_printing = () => {\n\t\t\treturn {\n\t\t\t\tlabel: __('Print'),\n\t\t\t\taction: () => bulk_operations.print(this.get_checked_items()),\n\t\t\t\tstandard: true\n\t\t\t};\n\t\t};\n\n\t\tconst bulk_delete = () => {\n\t\t\treturn {\n\t\t\t\tlabel: __('Delete'),\n\t\t\t\taction: () => {\n\t\t\t\t\tconst docnames = this.get_checked_items(true).map(docname => docname.toString());\n\t\t\t\t\tfrappe.confirm(__('Delete {0} items permanently?', [docnames.length]),\n\t\t\t\t\t\t() => bulk_operations.delete(docnames, this.refresh));\n\t\t\t\t},\n\t\t\t\tstandard: true,\n\t\t\t};\n\t\t};\n\n\t\tconst bulk_cancel = () => {\n\t\t\treturn {\n\t\t\t\tlabel: __('Cancel'),\n\t\t\t\taction: () => {\n\t\t\t\t\tconst docnames = this.get_checked_items(true);\n\t\t\t\t\tif (docnames.length > 0) {\n\t\t\t\t\t\tfrappe.confirm(__('Cancel {0} documents?', [docnames.length]),\n\t\t\t\t\t\t\t() => bulk_operations.submit_or_cancel(docnames, 'cancel', this.refresh));\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tstandard: true\n\t\t\t};\n\t\t};\n\n\t\tconst bulk_submit = () => {\n\t\t\treturn {\n\t\t\t\tlabel: __('Submit'),\n\t\t\t\taction: () => {\n\t\t\t\t\tconst docnames = this.get_checked_items(true);\n\t\t\t\t\tif (docnames.length > 0) {\n\t\t\t\t\t\tfrappe.confirm(__('Submit {0} documents?', [docnames.length]),\n\t\t\t\t\t\t\t() => bulk_operations.submit_or_cancel(docnames, 'submit', this.refresh));\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tstandard: true\n\t\t\t};\n\t\t};\n\n\t\tconst bulk_edit = () => {\n\t\t\treturn {\n\t\t\t\tlabel: __('Edit'),\n\t\t\t\taction: () => {\n\t\t\t\t\tlet field_mappings = {};\n\n\t\t\t\t\tfrappe.meta.get_docfields(doctype).forEach(field_doc => {\n\t\t\t\t\t\tif (is_field_editable(field_doc)) {\n\t\t\t\t\t\t\tfield_mappings[field_doc.label] = Object.assign({}, field_doc);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tconst docnames = this.get_checked_items(true);\n\n\t\t\t\t\tbulk_operations.edit(docnames, field_mappings, this.refresh);\n\t\t\t\t},\n\t\t\t\tstandard: true\n\t\t\t};\n\t\t};\n\n\t\t// bulk edit\n\t\tif (has_editable_fields(doctype)) {\n\t\t\tactions_menu_items.push(bulk_edit());\n\t\t}\n\n\t\t// bulk assignment\n\t\tactions_menu_items.push(bulk_assignment());\n\n\t\tactions_menu_items.push(bulk_assignment_rule());\n\n\t\t// bulk printing\n\t\tif (frappe.model.can_print(doctype)) {\n\t\t\tactions_menu_items.push(bulk_printing());\n\t\t}\n\n\t\t// bulk submit\n\t\tif (frappe.model.is_submittable(doctype) && has_submit_permission(doctype) && !(frappe.model.has_workflow(doctype))) {\n\t\t\tactions_menu_items.push(bulk_submit());\n\t\t}\n\n\t\t// bulk cancel\n\t\tif (frappe.model.can_cancel(doctype) && !(frappe.model.has_workflow(doctype))) {\n\t\t\tactions_menu_items.push(bulk_cancel());\n\t\t}\n\n\t\t// bulk delete\n\t\tif (frappe.model.can_delete(doctype)) {\n\t\t\tactions_menu_items.push(bulk_delete());\n\t\t}\n\n\t\treturn actions_menu_items;\n\t}\n\n\tparse_filters_from_route_options() {\n\t\tconst filters = [];\n\n\t\tfor (let field in frappe.route_options) {\n\n\t\t\tlet doctype = null;\n\t\t\tlet value = frappe.route_options[field];\n\n\t\t\tlet value_array;\n\t\t\tif ($.isArray(value) && value[0].startsWith('[') && value[0].endsWith(']')) {\n\t\t\t\tvalue_array = [];\n\t\t\t\tfor(var i=0; i<value.length; i++) {\n\t\t\t\t\tvalue_array.push(JSON.parse(value[i]));\n\t\t\t\t}\n\t\t\t} else if (typeof value === 'string' && value.startsWith('[') && value.endsWith(']')) {\n\t\t\t\tvalue = JSON.parse(value);\n\t\t\t}\n\n\t\t\t// if `Child DocType.fieldname`\n\t\t\tif (field.includes('.')) {\n\t\t\t\tdoctype = field.split('.')[0];\n\t\t\t\tfield = field.split('.')[1];\n\t\t\t}\n\n\t\t\t// find the table in which the key exists\n\t\t\t// for example the filter could be {\"item_code\": \"X\"}\n\t\t\t// where item_code is in the child table.\n\n\t\t\t// we can search all tables for mapping the doctype\n\t\t\tif (!doctype) {\n\t\t\t\tdoctype = frappe.meta.get_doctype_for_field(this.doctype, field);\n\t\t\t}\n\n\t\t\tif (doctype) {\n\t\t\t\tif (value_array) {\n\t\t\t\t\tfor(var j=0; j<value_array.length; j++){\n\t\t\t\t\t\tif ($.isArray(value_array[j])) {\n\t\t\t\t\t\t\tfilters.push([doctype, field, value_array[j][0], value_array[j][1]]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfilters.push([doctype, field, \"=\", value_array[j]]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if ($.isArray(value)) {\n\t\t\t\t\tfilters.push([doctype, field, value[0], value[1]]);\n\t\t\t\t} else {\n\t\t\t\t\tfilters.push([doctype, field, \"=\", value]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn filters;\n\t}\n\n\tstatic trigger_list_update(data) {\n\t\tconst doctype = data.doctype;\n\t\tif (!doctype) return;\n\t\tfrappe.provide('frappe.views.trees');\n\n\t\t// refresh tree view\n\t\tif (frappe.views.trees[doctype]) {\n\t\t\tfrappe.views.trees[doctype].tree.refresh();\n\t\t\treturn;\n\t\t}\n\n\t\t// refresh list view\n\t\tconst page_name = frappe.get_route_str();\n\t\tconst list_view = frappe.views.list_view[page_name];\n\t\tlist_view && list_view.on_update(data);\n\t}\n};\n\n$(document).on('save', (event, doc) => {\n\tfrappe.views.ListView.trigger_list_update(doc);\n});\n\nfrappe.get_list_view = (doctype) => {\n\tlet route = `List/${doctype}/List`;\n\treturn frappe.views.list_view[route];\n};\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.provide('frappe.views.list_view');\n\nwindow.cur_list = null;\nfrappe.views.ListFactory = class ListFactory extends frappe.views.Factory {\n\tmake (route) {\n\t\tvar me = this;\n\t\tvar doctype = route[1];\n\n\t\tfrappe.model.with_doctype(doctype, function () {\n\t\t\tif (locals['DocType'][doctype].issingle) {\n\t\t\t\tfrappe.set_re_route('Form', doctype);\n\t\t\t} else {\n\t\t\t\t// List / Gantt / Kanban / etc\n\t\t\t\t// File is a special view\n\t\t\t\tconst view_name = doctype !== 'File' ? route[2] : 'File';\n\t\t\t\tlet view_class = frappe.views[view_name + 'View'];\n\t\t\t\tif (!view_class) view_class = frappe.views.ListView;\n\n\t\t\t\tif (view_class && view_class.load_last_view && view_class.load_last_view()) {\n\t\t\t\t\t// view can have custom routing logic\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tfrappe.provide('frappe.views.list_view.' + doctype);\n\t\t\t\tconst page_name = frappe.get_route_str();\n\n\t\t\t\tif (!frappe.views.list_view[page_name]) {\n\t\t\t\t\tfrappe.views.list_view[page_name] = new view_class({\n\t\t\t\t\t\tdoctype: doctype,\n\t\t\t\t\t\tparent: me.make_page(true, page_name)\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tfrappe.container.change_to(page_name);\n\t\t\t\t}\n\t\t\t\tme.set_cur_list();\n\t\t\t}\n\t\t});\n\t}\n\n\tshow() {\n\t\tif(this.re_route_to_view()) {\n\t\t\treturn;\n\t\t}\n\t\tthis.set_module_breadcrumb();\n\t\tsuper.show();\n\t\tthis.set_cur_list();\n\t\tcur_list && cur_list.show();\n\t}\n\n\tre_route_to_view() {\n\t\tvar route = frappe.get_route();\n\t\tvar doctype = route[1];\n\t\tvar last_route = frappe.route_history.slice(-2)[0];\n\t\tif (route[0] === 'List' && route.length === 2 && frappe.views.list_view[doctype]) {\n\t\t\tif(last_route && last_route[0]==='List' && last_route[1]===doctype) {\n\t\t\t\t// last route same as this route, so going back.\n\t\t\t\t// this happens because #List/Item will redirect to #List/Item/List\n\t\t\t\t// while coming from back button, the last 2 routes will be same, so\n\t\t\t\t// we know user is coming in the reverse direction (via back button)\n\n\t\t\t\t// example:\n\t\t\t\t// Step 1: #List/Item redirects to #List/Item/List\n\t\t\t\t// Step 2: User hits \"back\" comes back to #List/Item\n\t\t\t\t// Step 3: Now we cannot send the user back to #List/Item/List so go back one more step\n\t\t\t\twindow.history.go(-1);\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n\n\tset_module_breadcrumb() {\n\t\tif (frappe.route_history.length > 1) {\n\t\t\tvar prev_route = frappe.route_history[frappe.route_history.length - 2];\n\t\t\tif (prev_route[0] === 'modules') {\n\t\t\t\tvar doctype = frappe.get_route()[1],\n\t\t\t\t\tmodule = prev_route[1];\n\t\t\t\tif (frappe.module_links[module] && frappe.module_links[module].includes(doctype)) {\n\t\t\t\t\t// save the last page from the breadcrumb was accessed\n\t\t\t\t\tfrappe.breadcrumbs.set_doctype_module(doctype, module);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tset_cur_list() {\n\t\tvar route = frappe.get_route();\n\t\tvar page_name = frappe.get_route_str();\n\t\tcur_list = frappe.views.list_view[page_name];\n\t\tif (cur_list && cur_list.doctype !== route[1]) {\n\t\t\t// changing...\n\t\t\twindow.cur_list = null;\n\t\t}\n\t}\n}\n","frappe.provide('frappe.ui');\n\nexport default class ListFilter {\n\tconstructor({ wrapper, doctype }) {\n\t\tObject.assign(this, arguments[0]);\n\t\tthis.can_add_global = frappe.user.has_role(['System Manager', 'Administrator']);\n\t\tthis.filters = [];\n\t\tthis.make();\n\t\tthis.bind();\n\t\tthis.refresh();\n\t}\n\n\tmake() {\n\t\t// init dom\n\t\tthis.wrapper.html('<li class=\"input-area\"></li>');\n\t\tthis.$input_area = this.wrapper.find('.input-area');\n\t\tthis.$list_filters = this.wrapper.find('.list-filters');\n\n\t\tthis.filter_input = frappe.ui.form.make_control({\n\t\t\tdf: {\n\t\t\t\tfieldtype: 'Data',\n\t\t\t\tlabel: __('Save Filter').toUpperCase(),\n\t\t\t\tplaceholder: __('Filter Name'),\n\t\t\t\tinput_class: 'input-xs'\n\t\t\t},\n\t\t\tparent: this.$input_area,\n\t\t\trender_input: 1,\n\t\t});\n\n\t\t$(this.filter_input.label_area).css('font-size', 10);\n\n\t\tthis.is_global_input = frappe.ui.form.make_control({\n\t\t\tdf: {\n\t\t\t\tfieldtype: 'Check',\n\t\t\t\tlabel: __('Is Global')\n\t\t\t},\n\t\t\tparent: this.$input_area,\n\t\t\trender_input: 1\n\t\t});\n\n\t}\n\n\tbind() {\n\t\tthis.bind_save_filter();\n\t\tthis.bind_click_filter();\n\t\tthis.bind_remove_filter();\n\t}\n\n\trefresh() {\n\t\tthis.get_list_filters()\n\t\t\t.then(() => {\n\t\t\t\tconst html = this.filters.map(filter => this.filter_template(filter));\n\t\t\t\tthis.wrapper.find('.list-link').remove();\n\t\t\t\tthis.wrapper.append(html);\n\t\t\t});\n\t\tthis.is_global_input.toggle(false);\n\t\tthis.filter_input.set_description('');\n\t}\n\n\tfilter_template(filter) {\n\t\treturn `<li class=\"list-link\" data-name=\"${filter.name}\">\n\t\t\t<a style=\"max-width: 90%;\">${filter.filter_name}</a>\n\t\t\t<a class=\"text-muted pull-right\"><span class=\"remove octicon octicon-x\"></span></a>\n\t\t</li>`;\n\t}\n\n\tbind_click_filter() {\n\t\tthis.wrapper.on('click', '.list-link', e => {\n\t\t\tconst name = $(e.currentTarget).attr('data-name');\n\t\t\tthis.list_view.filter_area.clear()\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.list_view.filter_area.add(this.get_filters_values(name));\n\t\t\t\t});\n\t\t});\n\t}\n\n\tbind_remove_filter() {\n\t\tthis.wrapper.on('click', '.list-link .remove', e => {\n\t\t\tconst $li = $(e.currentTarget).closest('.list-link')\n\t\t\tconst name = $li.attr('data-name');\n\t\t\t$li.remove();\n\t\t\tthis.remove_filter(name)\n\t\t\t\t.then(() => this.refresh());\n\t\t});\n\t}\n\n\tbind_save_filter() {\n\t\tthis.filter_input.$input.keydown(frappe.utils.debounce(e => {\n\t\t\tconst value = this.filter_input.get_value();\n\t\t\tconst has_value = Boolean(value);\n\n\t\t\tif (e.which === frappe.ui.keyCode['ENTER']) {\n\t\t\t\tif (!has_value || this.filter_name_exists(value)) return;\n\n\t\t\t\tthis.filter_input.set_value('');\n\t\t\t\tthis.save_filter(value)\n\t\t\t\t\t.then(() => this.refresh());\n\t\t\t} else {\n\t\t\t\tlet help_text = __('Press Enter to save');\n\n\t\t\t\tif (this.filter_name_exists(value)) {\n\t\t\t\t\thelp_text = __('Duplicate Filter Name');\n\t\t\t\t}\n\n\t\t\t\tthis.filter_input.set_description(has_value ? help_text : '');\n\n\t\t\t\tif (this.can_add_global) {\n\t\t\t\t\tthis.is_global_input.toggle(has_value);\n\t\t\t\t}\n\t\t\t}\n\t\t}, 300));\n\t}\n\n\tsave_filter(filter_name) {\n\t\treturn frappe.db.insert({\n\t\t\tdoctype: 'List Filter',\n\t\t\treference_doctype: this.list_view.doctype,\n\t\t\tfilter_name,\n\t\t\tfor_user: this.is_global_input.get_value() ? '' : frappe.session.user,\n\t\t\tfilters: JSON.stringify(this.get_current_filters())\n\t\t});\n\t}\n\n\tremove_filter(name) {\n\t\tif (!name) return;\n\t\treturn frappe.db.delete_doc('List Filter', name);\n\t}\n\n\tget_filters_values(name) {\n\t\tconst filter = this.filters.find(filter => filter.name === name);\n\t\treturn  JSON.parse(filter.filters || '[]');\n\t}\n\n\tget_current_filters() {\n\t\treturn this.list_view.filter_area.get();\n\t}\n\n\tfilter_name_exists(filter_name) {\n\t\treturn (this.filters || []).find(f => f.filter_name === filter_name);\n\t}\n\n\tget_list_filters() {\n\t\treturn frappe.db.get_list('List Filter', {\n\t\t\tfields: ['name', 'filter_name', 'for_user', 'filters'],\n\t\t\tfilters: { reference_doctype: this.list_view.doctype },\n\t\t\tor_filters: [['for_user', '=', frappe.session.user], ['for_user', '=', '']]\n\t\t}).then((filters) => {\n\t\t\tthis.filters = filters || [];\n\t\t});\n\t}\n}\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\nimport ListFilter from './list_filter';\nfrappe.provide('frappe.views');\n\n// opts:\n// stats = list of fields\n// doctype\n// parent\n// set_filter = function called on click\n\nfrappe.views.ListSidebar = class ListSidebar {\n\tconstructor(opts) {\n\t\t$.extend(this, opts);\n\t\tthis.make();\n\t\tthis.cat_tags = [];\n\t}\n\n\tmake() {\n\t\tvar sidebar_content = frappe.render_template(\"list_sidebar\", { doctype: this.doctype });\n\n\t\tthis.sidebar = $('<div class=\"list-sidebar overlay-sidebar hidden-xs hidden-sm\"></div>')\n\t\t\t.html(sidebar_content)\n\t\t\t.appendTo(this.page.sidebar.empty());\n\n\t\tthis.setup_reports();\n\t\tthis.setup_list_filter();\n\t\tthis.setup_views();\n\t\tthis.setup_kanban_boards();\n\t\tthis.setup_calendar_view();\n\t\tthis.setup_email_inbox();\n\t\tthis.setup_keyboard_shortcuts();\n\t\tthis.setup_list_group_by();\n\n\t\t// do not remove\n\t\t// used to trigger custom scripts\n\t\t$(document).trigger('list_sidebar_setup');\n\n\t\tif (this.list_view.list_view_settings && this.list_view.list_view_settings.disable_sidebar_stats) {\n\t\t\tthis.sidebar.find('.sidebar-stat').remove();\n\t\t} else {\n\t\t\tthis.sidebar.find('.list-stats').on('click', (e) => {\n\t\t\t\tthis.reload_stats();\n\t\t\t});\n\t\t}\n\n\t}\n\n\tsetup_views() {\n\t\tvar show_list_link = false;\n\n\t\tif (frappe.views.calendar[this.doctype]) {\n\t\t\tthis.sidebar.find('.list-link[data-view=\"Calendar\"]').removeClass(\"hide\");\n\t\t\tthis.sidebar.find('.list-link[data-view=\"Gantt\"]').removeClass('hide');\n\t\t\tshow_list_link = true;\n\t\t}\n\t\t//show link for kanban view\n\t\tthis.sidebar.find('.list-link[data-view=\"Kanban\"]').removeClass('hide');\n\t\tif (this.doctype === \"Communication\" && frappe.boot.email_accounts.length) {\n\t\t\tthis.sidebar.find('.list-link[data-view=\"Inbox\"]').removeClass('hide');\n\t\t\tshow_list_link = true;\n\t\t}\n\n\t\tif (frappe.treeview_settings[this.doctype] || frappe.get_meta(this.doctype).is_tree) {\n\t\t\tthis.sidebar.find(\".tree-link\").removeClass(\"hide\");\n\t\t}\n\n\t\tthis.current_view = 'List';\n\t\tvar route = frappe.get_route();\n\t\tif (route.length > 2 && frappe.views.view_modes.includes(route[2])) {\n\t\t\tthis.current_view = route[2];\n\n\t\t\tif (this.current_view === 'Kanban') {\n\t\t\t\tthis.kanban_board = route[3];\n\t\t\t} else if (this.current_view === 'Inbox') {\n\t\t\t\tthis.email_account = route[3];\n\t\t\t}\n\t\t}\n\n\t\t// disable link for current view\n\t\tthis.sidebar.find('.list-link[data-view=\"' + this.current_view + '\"] a')\n\t\t\t.attr('disabled', 'disabled').addClass('disabled');\n\n\t\t//enable link for Kanban view\n\t\tthis.sidebar.find('.list-link[data-view=\"Kanban\"] a, .list-link[data-view=\"Inbox\"] a')\n\t\t\t.attr('disabled', null).removeClass('disabled');\n\n\t\t// show image link if image_view\n\t\tif (this.list_view.meta.image_field) {\n\t\t\tthis.sidebar.find('.list-link[data-view=\"Image\"]').removeClass('hide');\n\t\t\tshow_list_link = true;\n\t\t}\n\n\t\tif (show_list_link) {\n\t\t\tthis.sidebar.find('.list-link[data-view=\"List\"]').removeClass('hide');\n\t\t}\n\t}\n\n\tsetup_reports() {\n\t\t// add reports linked to this doctype to the dropdown\n\t\tvar me = this;\n\t\tvar added = [];\n\t\tvar dropdown = this.page.sidebar.find('.reports-dropdown');\n\t\tvar divider = false;\n\n\t\tvar add_reports = function(reports) {\n\t\t\t$.each(reports, function(name, r) {\n\t\t\t\tif (!r.ref_doctype || r.ref_doctype == me.doctype) {\n\t\t\t\t\tvar report_type = r.report_type === 'Report Builder' ?\n\t\t\t\t\t\t`List/${r.ref_doctype}/Report` : 'query-report';\n\n\t\t\t\t\tvar route = r.route || report_type + '/' + (r.title || r.name);\n\n\t\t\t\t\tif (added.indexOf(route) === -1) {\n\t\t\t\t\t\t// don't repeat\n\t\t\t\t\t\tadded.push(route);\n\n\t\t\t\t\t\tif (!divider) {\n\t\t\t\t\t\t\tme.get_divider().appendTo(dropdown);\n\t\t\t\t\t\t\tdivider = true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t$('<li><a href=\"#' + route + '\">' +\n\t\t\t\t\t\t\t__(r.title || r.name) + '</a></li>').appendTo(dropdown);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\t// from reference doctype\n\t\tif (this.list_view.settings.reports) {\n\t\t\tadd_reports(this.list_view.settings.reports);\n\t\t}\n\n\t\t// Sort reports alphabetically\n\t\tvar reports = Object.values(frappe.boot.user.all_reports).sort((a,b) => a.title.localeCompare(b.title)) || [];\n\n\t\t// from specially tagged reports\n\t\tadd_reports(reports);\n\t}\n\n\tsetup_list_filter() {\n\t\tthis.list_filter = new ListFilter({\n\t\t\twrapper: this.page.sidebar.find('.list-filters'),\n\t\t\tdoctype: this.doctype,\n\t\t\tlist_view: this.list_view\n\t\t});\n\t}\n\n\tsetup_kanban_boards() {\n\t\tconst $dropdown = this.page.sidebar.find('.kanban-dropdown');\n\t\tfrappe.views.KanbanView.setup_dropdown_in_sidebar(this.doctype, $dropdown);\n\t}\n\n\tsetup_calendar_view() {\n\t\tconst doctype = this.doctype;\n\n\t\tfrappe.db.get_list('Calendar View', {\n\t\t\tfilters: {\n\t\t\t\treference_doctype: doctype\n\t\t\t}\n\t\t}).then(result => {\n\t\t\tif (!(result && Array.isArray(result) && result.length)) return;\n\t\t\tconst calendar_views = result;\n\t\t\tconst $link_calendar = this.sidebar.find('.list-link[data-view=\"Calendar\"]');\n\n\t\t\tlet default_link = '';\n\t\t\tif (frappe.views.calendar[this.doctype]) {\n\t\t\t\t// has standard calendar view\n\t\t\t\tdefault_link = `<li><a href=\"#List/${doctype}/Calendar/Default\">\n\t\t\t\t\t${ __(\"Default\") }</a></li>`;\n\t\t\t}\n\t\t\tconst other_links = calendar_views.map(\n\t\t\t\tcalendar_view => `<li><a href=\"#List/${doctype}/Calendar/${calendar_view.name}\">\n\t\t\t\t\t${ __(calendar_view.name) }</a>\n\t\t\t\t</li>`\n\t\t\t).join('');\n\n\t\t\tconst dropdown_html = `\n\t\t\t\t<div class=\"btn-group\">\n\t\t\t\t\t<a class=\"dropdown-toggle\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n\t\t\t\t\t\t${ __(\"Calendar\") } <span class=\"caret\"></span>\n\t\t\t\t\t</a>\n\t\t\t\t\t<ul class=\"dropdown-menu calendar-dropdown\" style=\"max-height: 300px; overflow-y: auto;\">\n\t\t\t\t\t\t${default_link}\n\t\t\t\t\t\t${other_links}\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t\t$link_calendar.removeClass('hide');\n\t\t\t$link_calendar.html(dropdown_html);\n\t\t});\n\t}\n\n\tsetup_email_inbox() {\n\t\t// get active email account for the user and add in dropdown\n\t\tif (this.doctype != \"Communication\")\n\t\t\treturn;\n\n\t\tlet $dropdown = this.page.sidebar.find('.email-account-dropdown');\n\t\tlet divider = false;\n\n\t\tif (has_common(frappe.user_roles, [\"System Manager\", \"Administrator\"])) {\n\t\t\t$(`<li class=\"new-email-account\"><a>${__(\"New Email Account\")}</a></li>`)\n\t\t\t\t.appendTo($dropdown);\n\t\t}\n\n\t\tlet accounts = frappe.boot.email_accounts;\n\t\taccounts.forEach((account) => {\n\t\t\tlet email_account = (account.email_id == \"All Accounts\") ? \"All Accounts\" : account.email_account;\n\t\t\tlet route = [\"List\", \"Communication\", \"Inbox\", email_account].join('/');\n\t\t\tlet display_name = [\"All Accounts\", \"Sent Mail\", \"Spam\", \"Trash\"].includes(account.email_id) ? __(account.email_id) : account.email_id;\n\t\t\t\n\t\t\tif (!divider) {\n\t\t\t\tthis.get_divider().appendTo($dropdown);\n\t\t\t\tdivider = true;\n\t\t\t}\n\t\t\t$(`<li><a href=\"#${route}\">${display_name}</a></li>`).appendTo($dropdown);\n\t\t\tif (account.email_id === \"Sent Mail\")\n\t\t\t\tdivider = false;\n\t\t});\n\n\t\t$dropdown.find('.new-email-account').click(function() {\n\t\t\tfrappe.new_doc(\"Email Account\");\n\t\t});\n\t}\n\n\tsetup_keyboard_shortcuts() {\n\t\tthis.sidebar.find('.list-link > a, .list-link > .btn-group > a').each((i, el) => {\n\t\t\tfrappe.ui.keys\n\t\t\t\t.get_shortcut_group(this.page)\n\t\t\t\t.add($(el));\n\t\t});\n\t}\n\n\tsetup_list_group_by() {\n\t\tthis.list_group_by = new frappe.views.ListGroupBy({\n\t\t\tdoctype: this.doctype,\n\t\t\tsidebar: this,\n\t\t\tlist_view: this.list_view,\n\t\t\tpage: this.page\n\t\t});\n\t}\n\n\tget_cat_tags() {\n\t\treturn this.cat_tags;\n\t}\n\n\tget_stats() {\n\t\tvar me = this;\n\t\tfrappe.call({\n\t\t\tmethod: 'frappe.desk.reportview.get_sidebar_stats',\n\t\t\ttype: 'GET',\n\t\t\targs: {\n\t\t\t\tstats: me.stats,\n\t\t\t\tdoctype: me.doctype,\n\t\t\t\t// wait for list filter area to be generated before getting filters, or fallback to default filters\n\t\t\t\tfilters: (me.list_view.filter_area ? me.list_filter.get_current_filters() : me.default_filters) || []\n\t\t\t},\n\t\t\tcallback: function(r) {\n\t\t\t\tme.render_stat(\"_user_tags\", (r.message.stats || {})[\"_user_tags\"]);\n\t\t\t\tlet stats_dropdown = me.sidebar.find('.list-stats-dropdown');\n\t\t\t\tfrappe.utils.setup_search(stats_dropdown, '.stat-link', '.stat-label');\n\t\t\t}\n\t\t});\n\t}\n\n\trender_stat(field, stat, tags) {\n\t\tvar me = this;\n\t\tvar sum = 0;\n\t\tvar stats = [];\n\t\tvar label = frappe.meta.docfield_map[this.doctype][field] ?\n\t\t\tfrappe.meta.docfield_map[this.doctype][field].label : field;\n\n\t\tstat = (stat || []).sort(function(a, b) {\n\t\t\treturn b[1] - a[1];\n\t\t});\n\t\t$.each(stat, function(i, v) {\n\t\t\tsum = sum + v[1];\n\t\t});\n\n\t\tif (tags) {\n\t\t\tfor (var t in tags) {\n\t\t\t\tvar nfound = -1;\n\t\t\t\tfor (var i in stat) {\n\t\t\t\t\tif (tags[t] === stat[i][0]) {\n\t\t\t\t\t\tstats.push(stat[i]);\n\t\t\t\t\t\tnfound = i;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (nfound < 0) {\n\t\t\t\t\tstats.push([tags[t], 0]);\n\t\t\t\t} else {\n\t\t\t\t\tme.tempstats[\"_user_tags\"].splice(nfound, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t\tfield = \"_user_tags\";\n\t\t} else {\n\t\t\tstats = stat;\n\t\t}\n\t\tvar context = {\n\t\t\tfield: field,\n\t\t\tstat: stats,\n\t\t\tsum: sum,\n\t\t\tlabel: field === '_user_tags' ? (tags ? __(label) : __(\"Tags\")) : __(label),\n\t\t};\n\t\t$(frappe.render_template(\"list_sidebar_stat\", context))\n\t\t\t.on(\"click\", \".stat-link\", function() {\n\t\t\t\tvar fieldname = $(this).attr('data-field');\n\t\t\t\tvar label = $(this).attr('data-label');\n\t\t\t\tvar condition = \"like\";\n\t\t\t\tvar existing = me.list_view.filter_area.filter_list.get_filter(fieldname);\n\t\t\t\tif(existing) {\n\t\t\t\t\texisting.remove();\n\t\t\t\t}\n\t\t\t\tif (label == \"No Tags\") {\n\t\t\t\t\tlabel = \"%,%\";\n\t\t\t\t\tcondition = \"not like\";\n\t\t\t\t}\n\t\t\t\tme.list_view.filter_area.filter_list.add_filter(me.list_view.doctype, fieldname, condition, label)\n\t\t\t\t\t.then(function() {\n\t\t\t\t\t\tme.list_view.refresh();\n\t\t\t\t\t});\n\t\t\t})\n\t\t\t.appendTo(this.sidebar.find(\".list-stats-dropdown\"));\n\t}\n\n\tset_fieldtype(df) {\n\n\t\t// scrub\n\t\tif (df.fieldname == \"docstatus\") {\n\t\t\tdf.fieldtype = \"Select\",\n\t\t\tdf.options = [\n\t\t\t\t{ value: 0, label: \"Draft\" },\n\t\t\t\t{ value: 1, label: \"Submitted\" },\n\t\t\t\t{ value: 2, label: \"Cancelled\" },\n\t\t\t];\n\t\t} else if (df.fieldtype == 'Check') {\n\t\t\tdf.fieldtype = 'Select';\n\t\t\tdf.options = [{ value: 0, label: 'No' },\n\t\t\t\t{ value: 1, label: 'Yes' }\n\t\t\t];\n\t\t} else if (['Text', 'Small Text', 'Text Editor', 'Code', 'Tag', 'Comments',\n\t\t\t'Dynamic Link', 'Read Only', 'Assign'\n\t\t].indexOf(df.fieldtype) != -1) {\n\t\t\tdf.fieldtype = 'Data';\n\t\t} else if (df.fieldtype == 'Link' && this.$w.find('.condition').val() != \"=\") {\n\t\t\tdf.fieldtype = 'Data';\n\t\t}\n\t\tif (df.fieldtype === \"Data\" && (df.options || \"\").toLowerCase() === \"email\") {\n\t\t\tdf.options = null;\n\t\t}\n\t}\n\n\treload_stats() {\n\t\tthis.sidebar.find(\".stat-link\").remove();\n\t\tthis.sidebar.find(\".stat-no-records\").remove();\n\t\tthis.get_stats();\n\t}\n\n\tget_divider() {\n\t\treturn $('<li role=\"separator\" class=\"divider\"></li>');\n\t}\n};\n","\nfrappe.provide('frappe.views');\n\nfrappe.views.ListGroupBy = class ListGroupBy {\n\tconstructor(opts) {\n\t\t$.extend(this, opts);\n\t\tthis.make_wrapper();\n\n\t\tthis.user_settings = frappe.get_user_settings(this.doctype);\n\t\tthis.group_by_fields = ['assigned_to', 'owner'];\n\t\tif(this.user_settings.group_by_fields) {\n\t\t\tthis.group_by_fields = this.group_by_fields.concat(this.user_settings.group_by_fields);\n\t\t}\n\t\tthis.render_group_by_items();\n\t\tthis.make_group_by_fields_modal();\n\t\tthis.setup_dropdown();\n\t\tthis.setup_filter_by();\n\t}\n\n\tmake_group_by_fields_modal() {\n\t\tlet d = new frappe.ui.Dialog ({\n\t\t\ttitle: __(\"Select Filters\"),\n\t\t\tfields: this.get_group_by_dropdown_fields()\n\t\t});\n\n\t\td.set_primary_action(\"Save\", ({ group_by_fields }) => {\n\t\t\tfrappe.model.user_settings.save(this.doctype, 'group_by_fields', group_by_fields || null);\n\t\t\tthis.group_by_fields = group_by_fields ? ['assigned_to', 'owner', ...group_by_fields] : ['assigned_to', 'owner'];\n\t\t\tthis.render_group_by_items();\n\t\t\td.hide();\n\t\t});\n\n\t\td.$body.prepend(`<div class=\"filters-search\">\n\t\t\t<input type=\"text\" placeholder=\"${__('Search')}\" data-element=\"search\" class=\"form-control input-xs\">\n\t\t</div>`);\n\n\t\tthis.page.sidebar.find(\".add-list-group-by a\").on(\"click\", () => {\n\t\t\tfrappe.utils.setup_search(d.$body, '.unit-checkbox', '.label-area');\n\t\t\td.show();\n\t\t});\n\t}\n\n\tmake_wrapper() {\n\t\tthis.$wrapper = this.sidebar.sidebar.find('.list-group-by');\n\t\tlet html = `\n\t\t\t<li class=\"list-sidebar-label\">\n\t\t\t\t${__('Filter By')}\n\t\t\t</li>\n\t\t\t<div class=\"list-group-by-fields\">\n\t\t\t</div>\n\t\t\t<li class=\"add-list-group-by list-link\">\n\t\t\t\t<a class=\"add-group-by hidden-xs text-muted\">\n\t\t\t\t\t${__(\"Add Fields\")} <i class=\"octicon octicon-plus\" style=\"margin-left: 2px;\"></i>\n\t\t\t\t</a>\n\t\t\t</li>\n\t\t`;\n\t\tthis.$wrapper.html(html);\n\t}\n\n\trender_group_by_items() {\n\t\tlet get_item_html = (fieldname) => {\n\t\t\tlet label, fieldtype;\n\t\t\tif (fieldname === 'assigned_to') {\n\t\t\t\tlabel = __('Assigned To');\n\t\t\t} else if (fieldname === 'owner') {\n\t\t\t\tlabel = __('Created By');\n\t\t\t} else {\n\t\t\t\tlabel = frappe.meta.get_label(this.doctype, fieldname);\n\t\t\t\tlet docfield = frappe.meta.get_docfield(this.doctype, fieldname);\n\t\t\t\tif (!docfield) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tfieldtype = docfield.fieldtype;\n\t\t\t}\n\n\t\t\treturn `<li class=\"group-by-field list-link\">\n\t\t\t\t<div class=\"btn-group\">\n\t\t\t\t\t<a class = \"dropdown-toggle\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\"\n\t\t\t\t\tdata-label=\"${label}\" data-fieldname=\"${fieldname}\" data-fieldtype=\"${fieldtype}\"\n\t\t\t\t\thref=\"#\" onclick=\"return false;\">\n\t\t\t\t\t\t${__(label)} <span class=\"caret\"></span>\n\t\t\t\t\t</a>\n\t\t\t\t\t<ul class=\"dropdown-menu group-by-dropdown\" role=\"menu\">\n\t\t\t\t\t\t<li><div class=\"list-loading text-center group-by-loading text-muted\">\n\t\t\t\t\t\t\t${__(\"Loading...\")}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</li>`;\n\t\t};\n\t\tlet html = this.group_by_fields.map(get_item_html).join('');\n\t\tthis.$wrapper.find('.list-group-by-fields').html(html);\n\t}\n\n\tsetup_dropdown() {\n\t\tthis.$wrapper.on('click', '.group-by-field', (e)=> {\n\t\t\tlet dropdown = $(e.currentTarget).find('.group-by-dropdown');\n\t\t\tlet fieldname = $(e.currentTarget).find('a').attr('data-fieldname');\n\t\t\tlet fieldtype = $(e.currentTarget).find('a').attr('data-fieldtype');\n\t\t\tthis.get_group_by_count(fieldname).then(field_count_list => {\n\t\t\t\tif (field_count_list.length) {\n\t\t\t\t\tthis.render_dropdown_items(field_count_list, fieldtype, dropdown);\n\t\t\t\t\tfrappe.utils.setup_search(dropdown, '.group-by-item', '.group-by-value', 'data-name');\n\t\t\t\t} else {\n\t\t\t\t\tdropdown.html(\n\t\t\t\t\t\t`<div class=\"list-loading text-center group-by-empty text-muted\">\n\t\t\t\t\t\t${__(\"No filters found\")}\n\t\t\t\t\t\t</div>`\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tget_group_by_dropdown_fields() {\n\t\tlet group_by_fields = [];\n\t\tlet fields = this.list_view.meta.fields.filter((f)=> [\"Select\", \"Link\", \"Data\", \"Int\", \"Check\"].includes(f.fieldtype));\n\t\tgroup_by_fields.push({\n\t\t\tlabel: __(this.doctype),\n\t\t\tfieldname: 'group_by_fields',\n\t\t\tfieldtype: 'MultiCheck',\n\t\t\tcolumns: 2,\n\t\t\toptions: fields\n\t\t\t\t.map(df => ({\n\t\t\t\t\tlabel: __(df.label),\n\t\t\t\t\tvalue: df.fieldname,\n\t\t\t\t\tchecked: this.group_by_fields.includes(df.fieldname)\n\t\t\t\t}))\n\t\t});\n\t\treturn group_by_fields;\n\t}\n\n\tget_group_by_count(field) {\n\t\tlet current_filters = this.list_view.get_filters_for_args();\n\n\t\t// remove filter of the current field\n\t\tcurrent_filters =\n\t\t\tcurrent_filters.filter((f_arr) => !f_arr.includes(field === 'assigned_to' ? '_assign': field));\n\n\t\tlet args =  {\n\t\t\tdoctype: this.doctype,\n\t\t\tcurrent_filters: current_filters,\n\t\t\tfield: field,\n\t\t};\n\n\n\t\treturn frappe.call('frappe.desk.listview.get_group_by_count', args).then((r) => {\n\t\t\tlet field_counts = r.message || [];\n\t\t\tfield_counts = field_counts.filter(f => f.count !== 0);\n\t\t\tlet current_user = field_counts.find(f => f.name === frappe.session.user);\n\t\t\tfield_counts = field_counts.filter(f => !['Guest', 'Administrator', frappe.session.user].includes(f.name));\n\t\t\t// Set frappe.session.user on top of the list\n\t\t\tif (current_user) field_counts.unshift(current_user);\n\t\t\treturn field_counts;\n\t\t});\n\t}\n\n\trender_dropdown_items(fields, fieldtype, dropdown) {\n\t\tlet get_dropdown_html = (field) => {\n\t\t\tlet label = field.name == null ? __('Not Specified') : field.name;\n\t\t\tif (label === frappe.session.user) {\n\t\t\t\tlabel = __('Me');\n\t\t\t} else if (fieldtype && fieldtype == 'Check') {\n\t\t\t\tlabel = label == '0'? __('No'): __('Yes');\n\t\t\t}\n\t\t\tlet value = field.name == null ? '' : encodeURIComponent(field.name);\n\n\t\t\treturn `<li class=\"group-by-item\" data-value=\"${value}\">\n\t\t\t\t<a class=\"badge-hover\" href=\"#\" onclick=\"return false;\">\n\t\t\t\t\t<span class=\"group-by-value\" data-name=\"${field.name}\">${label}</span>\n\t\t\t\t\t<span class=\"badge pull-right group-by-count\">${field.count}</span>\n\t\t\t\t</a>\n\t\t\t</li>`;\n\t\t};\n\t\tlet standard_html = `\n\t\t\t<div class=\"dropdown-search\">\n\t\t\t\t<input type=\"text\" placeholder=\"${__('Search')}\" data-element=\"search\" class=\"dropdown-search-input form-control input-xs\">\n\t\t\t</div>\n\t\t`;\n\n\t\tlet dropdown_html = standard_html + fields.map(get_dropdown_html).join('');\n\t\tdropdown.html(dropdown_html);\n\t}\n\n\tsetup_filter_by() {\n\t\tthis.$wrapper.on('click', '.group-by-item', (e) => {\n\t\t\tlet $target = $(e.currentTarget);\n\t\t\tlet fieldname = $target.parents('.group-by-field').find('a').data('fieldname');\n\t\t\tlet value = typeof $target.data('value') === 'string'\n\t\t\t\t? decodeURIComponent($target.data('value').trim())\n\t\t\t\t: $target.data('value');\n\t\t\tfieldname = fieldname === 'assigned_to' ? '_assign': fieldname;\n\n\t\t\treturn this.list_view.filter_area.remove(fieldname)\n\t\t\t\t.then(() => {\n\t\t\t\t\tlet operator = '=';\n\t\t\t\t\tif (value === '') {\n\t\t\t\t\t\toperator = 'is';\n\t\t\t\t\t\tvalue = 'not set';\n\t\t\t\t\t}\n\t\t\t\t\tif (fieldname === '_assign') {\n\t\t\t\t\t\toperator = 'like';\n\t\t\t\t\t\tvalue = `%${value}%`;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this.list_view.filter_area.add(this.doctype, fieldname, operator, value);\n\t\t\t\t});\n\t\t});\n\t}\n\n};\n","frappe.provide('frappe.views');\n\nfrappe.views.GanttView = class GanttView extends frappe.views.ListView {\n\tget view_name() {\n\t\treturn 'Gantt';\n\t}\n\n\tsetup_defaults() {\n\t\treturn super.setup_defaults()\n\t\t\t.then(() => {\n\t\t\t\tthis.page_title = this.page_title + ' ' + __('Gantt');\n\t\t\t\tthis.calendar_settings = frappe.views.calendar[this.doctype] || {};\n\t\t\t\tif(this.calendar_settings.order_by) {\n\t\t\t\t\tthis.sort_by = this.calendar_settings.order_by;\n\t\t\t\t\tthis.sort_order = 'asc';\n\t\t\t\t} else {\n\t\t\t\t\tthis.sort_by = this.view_user_settings.sort_by || this.calendar_settings.field_map.start;\n\t\t\t\t\tthis.sort_order = this.view_user_settings.sort_order || 'asc';\n\t\t\t\t}\n\t\t\t})\n\t}\n\n\tsetup_view() {\n\n\t}\n\n\tprepare_data(data) {\n\t\tsuper.prepare_data(data);\n\t\tthis.prepare_tasks();\n\t}\n\n\tprepare_tasks() {\n\t\tvar me = this;\n\t\tvar meta = this.meta;\n\t\tvar field_map = this.calendar_settings.field_map;\n\n\t\tthis.tasks = this.data.map(function (item) {\n\t\t\t// set progress\n\t\t\tvar progress = 0;\n\t\t\tif (field_map.progress && $.isFunction(field_map.progress)) {\n\t\t\t\tprogress = field_map.progress(item);\n\t\t\t} else if (field_map.progress) {\n\t\t\t\tprogress = item[field_map.progress];\n\t\t\t}\n\n\t\t\t// title\n\t\t\tvar label;\n\t\t\tif (meta.title_field) {\n\t\t\t\tlabel = $.format(\"{0} ({1})\", [item[meta.title_field], item.name]);\n\t\t\t} else {\n\t\t\t\tlabel = item[field_map.title];\n\t\t\t}\n\n\t\t\tvar r = {\n\t\t\t\tstart: item[field_map.start],\n\t\t\t\tend: item[field_map.end],\n\t\t\t\tname: label,\n\t\t\t\tid: item[field_map.id || 'name'],\n\t\t\t\tdoctype: me.doctype,\n\t\t\t\tprogress: progress,\n\t\t\t\tdependencies: item.depends_on_tasks || \"\"\n\t\t\t};\n\n\t\t\tif (item.color && frappe.ui.color.validate_hex(item.color)) {\n\t\t\t\tr['custom_class'] = 'color-' + item.color.substr(1);\n\t\t\t}\n\n\t\t\tif (item.is_milestone) {\n\t\t\t\tr['custom_class'] = 'bar-milestone';\n\t\t\t}\n\n\t\t\treturn r;\n\t\t});\n\t}\n\n\trender() {\n\t\tthis.load_lib.then(() => {\n\t\t\tthis.render_gantt();\n\t\t});\n\t}\n\n\trender_header() {\n\n\t}\n\n\trender_gantt() {\n\t\tconst me = this;\n\t\tconst gantt_view_mode = this.view_user_settings.gantt_view_mode || 'Day';\n\t\tconst field_map = this.calendar_settings.field_map;\n\t\tconst date_format = 'YYYY-MM-DD';\n\n\t\tthis.$result.empty();\n\n\t\tthis.gantt = new Gantt(this.$result[0], this.tasks, {\n\t\t\tview_mode: gantt_view_mode,\n\t\t\tdate_format: \"YYYY-MM-DD\",\n\t\t\ton_click: task => {\n\t\t\t\tfrappe.set_route('Form', task.doctype, task.id);\n\t\t\t},\n\t\t\ton_date_change: (task, start, end) => {\n\t\t\t\tif (!me.can_write) return;\n\t\t\t\tfrappe.db.set_value(task.doctype, task.id, {\n\t\t\t\t\t[field_map.start]: moment(start).format(date_format),\n\t\t\t\t\t[field_map.end]: moment(end).format(date_format)\n\t\t\t\t});\n\t\t\t},\n\t\t\ton_progress_change: (task, progress) => {\n\t\t\t\tif (!me.can_write) return;\n\t\t\t\tvar progress_fieldname = 'progress';\n\n\t\t\t\tif ($.isFunction(field_map.progress)) {\n\t\t\t\t\tprogress_fieldname = null;\n\t\t\t\t} else if (field_map.progress) {\n\t\t\t\t\tprogress_fieldname = field_map.progress;\n\t\t\t\t}\n\n\t\t\t\tif (progress_fieldname) {\n\t\t\t\t\tfrappe.db.set_value(task.doctype, task.id, {\n\t\t\t\t\t\t[progress_fieldname]: parseInt(progress)\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\ton_view_change: mode => {\n\t\t\t\t// save view mode\n\t\t\t\tme.save_view_user_settings({\n\t\t\t\t\tgantt_view_mode: mode\n\t\t\t\t});\n\t\t\t},\n\t\t\tcustom_popup_html: task => {\n\t\t\t\tvar item = me.get_item(task.id);\n\n\t\t\t\tvar html =\n\t\t\t\t\t`<div class=\"title\">${task.name}</div>\n\t\t\t\t\t<div class=\"subtitle\">${moment(task._start).format('MMM D')} - ${moment(task._end).format('MMM D')}</div>`;\n\n\t\t\t\t// custom html in doctype settings\n\t\t\t\tvar custom = me.settings.gantt_custom_popup_html;\n\t\t\t\tif (custom && $.isFunction(custom)) {\n\t\t\t\t\tvar ganttobj = task;\n\t\t\t\t\thtml = custom(ganttobj, item);\n\t\t\t\t}\n\t\t\t\treturn '<div class=\"details-container\">' + html + '</div>';\n\t\t\t}\n\t\t});\n\t\tthis.setup_view_mode_buttons();\n\t\tthis.set_colors();\n\t}\n\n\tsetup_view_mode_buttons() {\n\t\t// view modes (for translation) __(\"Day\"), __(\"Week\"), __(\"Month\"),\n\t\t//__(\"Half Day\"), __(\"Quarter Day\")\n\n\t\tlet $btn_group = this.$paging_area.find('.gantt-view-mode');\n\t\tif ($btn_group.length > 0) return;\n\n\t\tconst view_modes = this.gantt.options.view_modes || [];\n\t\tconst active_class = view_mode => this.gantt.view_is(view_mode) ? 'btn-info' : '';\n\t\tconst html =\n\t\t\t`<div class=\"btn-group gantt-view-mode\">\n\t\t\t\t${view_modes.map(value => `<button type=\"button\"\n\t\t\t\t\t\tclass=\"btn btn-default btn-sm btn-view-mode ${active_class(value)}\"\n\t\t\t\t\t\tdata-value=\"${value}\">\n\t\t\t\t\t\t${__(value)}\n\t\t\t\t\t</button>`).join('')}\n\t\t\t</div>`;\n\n\t\tthis.$paging_area.find('.level-left').append(html);\n\n\t\t// change view mode asynchronously\n\t\tconst change_view_mode = (value) => setTimeout(() => this.gantt.change_view_mode(value), 0);\n\n\t\tthis.$paging_area.on('click', '.btn-view-mode', e => {\n\t\t\tconst $btn = $(e.currentTarget);\n\t\t\tthis.$paging_area.find('.btn-view-mode').removeClass('btn-info');\n\t\t\t$btn.addClass('btn-info');\n\n\t\t\tconst value = $btn.data().value;\n\t\t\tchange_view_mode(value);\n\t\t});\n\t}\n\n\tset_colors() {\n\t\tconst classes = this.tasks\n\t\t\t.map(t => t.custom_class)\n\t\t\t.filter(c => c && c.startsWith('color-'));\n\n\t\tlet style = classes.map(c => {\n\t\t\tconst class_name = c.replace('#', '');\n\t\t\tconst bar_color = '#' + c.substr(6);\n\t\t\tconst progress_color = frappe.ui.color.get_contrast_color(bar_color);\n\t\t\treturn `\n\t\t\t\t.gantt .bar-wrapper.${class_name} .bar {\n\t\t\t\t\tfill: ${bar_color};\n\t\t\t\t}\n\t\t\t\t.gantt .bar-wrapper.${class_name} .bar-progress {\n\t\t\t\t\tfill: ${progress_color};\n\t\t\t\t}\n\t\t\t`;\n\t\t}).join(\"\");\n\n\t\tstyle = `<style>${style}</style>`;\n\t\tthis.$result.prepend(style);\n\t}\n\n\tget_item(name) {\n\t\treturn this.data.find(item => item.name === name);\n\t}\n\n\tget required_libs() {\n\t\treturn [\n\t\t\t\"assets/frappe/node_modules/frappe-gantt/dist/frappe-gantt.css\",\n\t\t\t\"assets/frappe/node_modules/frappe-gantt/dist/frappe-gantt.min.js\"\n\t\t];\n\t}\n};\n\n","// Copyright (c) 2018, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.provide(\"frappe.views.calendar\");\nfrappe.provide(\"frappe.views.calendars\");\n\nfrappe.views.CalendarView = class CalendarView extends frappe.views.ListView {\n\tstatic load_last_view() {\n\t\tconst route = frappe.get_route();\n\t\tif (route.length === 3) {\n\t\t\tconst doctype = route[1];\n\t\t\tconst user_settings = frappe.get_user_settings(doctype)['Calendar'] || {};\n\t\t\troute.push(user_settings.last_calendar || 'Default');\n\t\t\tfrappe.set_route(route);\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\ttoggle_result_area() {}\n\n\tget view_name() {\n\t\treturn 'Calendar';\n\t}\n\n\tsetup_defaults() {\n\t\treturn super.setup_defaults()\n\t\t\t.then(() => {\n\t\t\t\tthis.page_title = __('{0} Calendar', [this.page_title]);\n\t\t\t\tthis.calendar_settings = frappe.views.calendar[this.doctype] || {};\n\t\t\t\tthis.calendar_name = frappe.get_route()[3];\n\t\t\t});\n\t}\n\n\tsetup_view() {\n\n\t}\n\n\tbefore_render() {\n\t\tsuper.before_render();\n\t\tthis.save_view_user_settings({\n\t\t\tlast_calendar: this.calendar_name\n\t\t});\n\t}\n\n\trender() {\n\t\tif (this.calendar) {\n\t\t\tthis.calendar.refresh();\n\t\t\treturn;\n\t\t}\n\n\t\tthis.load_lib\n\t\t\t.then(() => this.get_calendar_preferences())\n\t\t\t.then(options => {\n\t\t\t\tthis.calendar = new frappe.views.Calendar(options);\n\t\t\t});\n\t}\n\n\tget_calendar_preferences() {\n\t\tconst options = {\n\t\t\tdoctype: this.doctype,\n\t\t\tparent: this.$result,\n\t\t\tpage: this.page,\n\t\t\tlist_view: this\n\t\t};\n\t\tconst calendar_name = this.calendar_name;\n\n\t\treturn new Promise(resolve => {\n\t\t\tif (calendar_name === 'Default') {\n\t\t\t\tObject.assign(options, frappe.views.calendar[this.doctype]);\n\t\t\t\tresolve(options);\n\t\t\t} else {\n\t\t\t\tfrappe.model.with_doc('Calendar View', calendar_name, () => {\n\t\t\t\t\tconst doc = frappe.get_doc('Calendar View', calendar_name);\n\t\t\t\t\tObject.assign(options, {\n\t\t\t\t\t\tfield_map: {\n\t\t\t\t\t\t\tid: \"name\",\n\t\t\t\t\t\t\tstart: doc.start_date_field,\n\t\t\t\t\t\t\tend: doc.end_date_field,\n\t\t\t\t\t\t\ttitle: doc.subject_field,\n\t\t\t\t\t\t\tallDay: doc.all_day ? 1 : 0\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tresolve(options);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tget required_libs() {\n\t\treturn [\n\t\t\t'assets/frappe/js/lib/fullcalendar/fullcalendar.min.css',\n\t\t\t'assets/frappe/js/lib/fullcalendar/fullcalendar.min.js',\n\t\t\t'assets/frappe/js/lib/fullcalendar/locale-all.js'\n\t\t];\n\t}\n};\n\nfrappe.views.Calendar = Class.extend({\n\tinit: function(options) {\n\t\t$.extend(this, options);\n\t\tthis.get_default_options();\n\t},\n\tget_default_options: function() {\n\t\treturn new Promise ((resolve) => {\n\t\t\tlet defaultView = localStorage.getItem('cal_defaultView');\n\t\t\tlet weekends = localStorage.getItem('cal_weekends');\n\t\t\tlet defaults = {\n\t\t\t\t'defaultView': defaultView ? defaultView : \"month\",\n\t\t\t\t'weekends': weekends ? weekends : true\n\t\t\t};\n\t\t\tresolve(defaults);\n\t\t}).then(defaults => {\n\t\t\tthis.make_page();\n\t\t\tthis.setup_options(defaults);\n\t\t\tthis.make();\n\t\t\tthis.setup_view_mode_button(defaults);\n\t\t\tthis.bind();\n\t\t});\n\t},\n\tmake_page: function() {\n\t\tvar me = this;\n\n\t\t// add links to other calendars\n\t\tme.page.clear_user_actions();\n\t\t$.each(frappe.boot.calendars, function(i, doctype) {\n\t\t\tif(frappe.model.can_read(doctype)) {\n\t\t\t\tme.page.add_menu_item(__(doctype), function() {\n\t\t\t\t\tfrappe.set_route(\"List\", doctype, \"Calendar\");\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\t$(this.parent).on(\"show\", function() {\n\t\t\tme.$cal.fullCalendar(\"refetchEvents\");\n\t\t});\n\t},\n\n\tmake: function() {\n\t\tthis.$wrapper = this.parent;\n\t\tthis.$cal = $(\"<div>\").appendTo(this.$wrapper);\n\t\tthis.footnote_area = frappe.utils.set_footnote(this.footnote_area, this.$wrapper,\n\t\t\t__(\"Select or drag across time slots to create a new event.\"));\n\t\tthis.footnote_area.css({\"border-top\": \"0px\"});\n\n\t\tthis.$cal.fullCalendar(this.cal_options);\n\t\tthis.set_css();\n\t},\n\tsetup_view_mode_button: function(defaults) {\n\t\tvar me = this;\n\t\t$(me.footnote_area).find('.btn-weekend').detach();\n\t\tlet btnTitle = (defaults.weekends) ? __('Hide Weekends') : __('Show Weekends');\n\t\tconst btn = `<button class=\"btn btn-default btn-xs btn-weekend\">${btnTitle}</button>`;\n\t\tme.footnote_area.append(btn);\n\t},\n\tset_localStorage_option: function(option, value) {\n\t\tlocalStorage.removeItem(option);\n\t\tlocalStorage.setItem(option, value);\n\t},\n\tbind: function() {\n\t\tconst me = this;\n\t\tlet btn_group = me.$wrapper.find(\".fc-button-group\");\n\t\tbtn_group.on(\"click\", \".btn\", function() {\n\t\t\tlet value = ($(this).hasClass('fc-agendaWeek-button')) ? 'agendaWeek' : (($(this).hasClass('fc-agendaDay-button')) ? 'agendaDay' : 'month');\n\t\t\tme.set_localStorage_option(\"cal_defaultView\", value);\n\t\t});\n\n\t\tme.$wrapper.on(\"click\", \".btn-weekend\", function() {\n\t\t\tme.cal_options.weekends = !me.cal_options.weekends;\n\t\t\tme.$cal.fullCalendar('option', 'weekends', me.cal_options.weekends);\n\t\t\tme.set_localStorage_option(\"cal_weekends\", me.cal_options.weekends);\n\t\t\tme.set_css();\n\t\t\tme.setup_view_mode_button(me.cal_options);\n\t\t});\n\t},\n\tset_css: function() {\n\t\t// flatify buttons\n\t\tthis.$wrapper.find(\"button.fc-state-default\")\n\t\t\t.removeClass(\"fc-state-default\")\n\t\t\t.addClass(\"btn btn-default\");\n\n\t\tthis.$wrapper.find(\".fc-button-group\").addClass(\"btn-group\");\n\n\t\tthis.$wrapper.find('.fc-prev-button span')\n\t\t\t.attr('class', '').addClass('fa fa-chevron-left');\n\t\tthis.$wrapper.find('.fc-next-button span')\n\t\t\t.attr('class', '').addClass('fa fa-chevron-right');\n\n\t\tvar btn_group = this.$wrapper.find(\".fc-button-group\");\n\t\tbtn_group.find(\".fc-state-active\").addClass(\"active\");\n\n\t\tbtn_group.find(\".btn\").on(\"click\", function() {\n\t\t\tbtn_group.find(\".btn\").removeClass(\"active\");\n\t\t\t$(this).addClass(\"active\");\n\t\t});\n\t},\n\tfield_map: {\n\t\t\"id\": \"name\",\n\t\t\"start\": \"start\",\n\t\t\"end\": \"end\",\n\t\t\"allDay\": \"all_day\",\n\t},\n\tcolor_map: {\n\t\t\"danger\": \"red\",\n\t\t\"success\": \"green\",\n\t\t\"warning\": \"orange\",\n\t\t\"default\": \"blue\"\n\t},\n\tget_system_datetime: function(date) {\n\t\tdate._offset = (moment(date).tz(frappe.sys_defaults.time_zone)._offset);\n\t\treturn frappe.datetime.convert_to_system_tz(date);\n\t},\n\tsetup_options: function(defaults) {\n\t\tvar me = this;\n\t\tthis.cal_options = {\n\t\t\tlocale: frappe.boot.user.language || \"en\",\n\t\t\theader: {\n\t\t\t\tleft: 'title',\n\t\t\t\tcenter: '',\n\t\t\t\tright: 'prev,today,next month,agendaWeek,agendaDay'\n\t\t\t},\n\t\t\teditable: true,\n\t\t\tselectable: true,\n\t\t\tselectHelper: true,\n\t\t\tforceEventDuration: true,\n\t\t\tdefaultView: defaults.defaultView,\n\t\t\tweekends: defaults.weekends,\n\t\t\tnowIndicator: true,\n\t\t\tevents: function(start, end, timezone, callback) {\n\t\t\t\treturn frappe.call({\n\t\t\t\t\tmethod: me.get_events_method || \"frappe.desk.calendar.get_events\",\n\t\t\t\t\ttype: \"GET\",\n\t\t\t\t\targs: me.get_args(start, end),\n\t\t\t\t\tcallback: function(r) {\n\t\t\t\t\t\tvar events = r.message || [];\n\t\t\t\t\t\tevents = me.prepare_events(events);\n\t\t\t\t\t\tcallback(events);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\teventRender: function(event, element) {\n\t\t\t\telement.attr('title', event.tooltip);\n\t\t\t},\n\t\t\teventClick: function(event) {\n\t\t\t\t// edit event description or delete\n\t\t\t\tvar doctype = event.doctype || me.doctype;\n\t\t\t\tif(frappe.model.can_read(doctype)) {\n\t\t\t\t\tfrappe.set_route(\"Form\", doctype, event.name);\n\t\t\t\t}\n\t\t\t},\n\t\t\teventDrop: function(event, delta, revertFunc) {\n\t\t\t\tme.update_event(event, revertFunc);\n\t\t\t},\n\t\t\teventResize: function(event, delta, revertFunc) {\n\t\t\t\tme.update_event(event, revertFunc);\n\t\t\t},\n\t\t\tselect: function(startDate, endDate, jsEvent, view) {\n\t\t\t\tif (view.name===\"month\" && (endDate - startDate)===86400000) {\n\t\t\t\t\t// detect single day click in month view\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar event = frappe.model.get_new_doc(me.doctype);\n\n\t\t\t\tevent[me.field_map.start] = me.get_system_datetime(startDate);\n\n\t\t\t\tif(me.field_map.end)\n\t\t\t\t\tevent[me.field_map.end] = me.get_system_datetime(endDate);\n\n\t\t\t\tif(me.field_map.allDay) {\n\t\t\t\t\tvar all_day = (startDate._ambigTime && endDate._ambigTime) ? 1 : 0;\n\n\t\t\t\t\tevent[me.field_map.allDay] = all_day;\n\n\t\t\t\t\tif (all_day)\n\t\t\t\t\t\tevent[me.field_map.end] = me.get_system_datetime(moment(endDate).subtract(1, \"s\"));\n\t\t\t\t}\n\n\t\t\t\tfrappe.set_route(\"Form\", me.doctype, event.name);\n\t\t\t},\n\t\t\tdayClick: function(date, jsEvent, view) {\n\t\t\t\tif(view.name === 'month') {\n\t\t\t\t\tconst $date_cell = $('td[data-date=' + date.format('YYYY-MM-DD') + \"]\");\n\n\t\t\t\t\tif($date_cell.hasClass('date-clicked')) {\n\t\t\t\t\t\tme.$cal.fullCalendar('changeView', 'agendaDay');\n\t\t\t\t\t\tme.$cal.fullCalendar('gotoDate', date);\n\t\t\t\t\t\tme.$wrapper.find('.date-clicked').removeClass('date-clicked');\n\n\t\t\t\t\t\t// update \"active view\" btn\n\t\t\t\t\t\tme.$wrapper.find('.fc-month-button').removeClass('active');\n\t\t\t\t\t\tme.$wrapper.find('.fc-agendaDay-button').addClass('active');\n\t\t\t\t\t}\n\n\t\t\t\t\tme.$wrapper.find('.date-clicked').removeClass('date-clicked');\n\t\t\t\t\t$date_cell.addClass('date-clicked');\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t};\n\n\t\tif(this.options) {\n\t\t\t$.extend(this.cal_options, this.options);\n\t\t}\n\t},\n\tget_args: function(start, end) {\n\t\tvar args = {\n\t\t\tdoctype: this.doctype,\n\t\t\tstart: this.get_system_datetime(start),\n\t\t\tend: this.get_system_datetime(end),\n\t\t\tfields: this.fields,\n\t\t\tfilters: this.list_view.filter_area.get(),\n\t\t\tfield_map: this.field_map\n\t\t};\n\t\treturn args;\n\t},\n\trefresh: function() {\n\t\tthis.$cal.fullCalendar('refetchEvents');\n\t},\n\tprepare_events: function(events) {\n\t\tvar me = this;\n\n\t\treturn (events || []).map(d => {\n\t\t\td.id = d.name;\n\t\t\td.editable = frappe.model.can_write(d.doctype || me.doctype);\n\n\t\t\t// do not allow submitted/cancelled events to be moved / extended\n\t\t\tif(d.docstatus && d.docstatus > 0) {\n\t\t\t\td.editable = false;\n\t\t\t}\n\n\t\t\t$.each(me.field_map, function(target, source) {\n\t\t\t\td[target] = d[source];\n\t\t\t});\n\n\t\t\tif(!me.field_map.allDay)\n\t\t\t\td.allDay = 1;\n\n\t\t\t// convert to user tz\n\t\t\td.start = frappe.datetime.convert_to_user_tz(d.start);\n\t\t\td.end = frappe.datetime.convert_to_user_tz(d.end);\n\n\t\t\t// show event on single day if start or end date is invalid\n\t\t\tif (!frappe.datetime.validate(d.start) && d.end) {\n\t\t\t\td.start = frappe.datetime.add_days(d.end, -1);\n\t\t\t}\n\n\t\t\tif (d.start && !frappe.datetime.validate(d.end)) {\n\t\t\t\td.end = frappe.datetime.add_days(d.start, 1);\n\t\t\t}\n\n\t\t\tme.fix_end_date_for_event_render(d);\n\t\t\tme.prepare_colors(d);\n\n\t\t\td.title = frappe.utils.html2text(d.title);\n\t\t\t\n\t\t\treturn d;\n\t\t});\n\t},\n\tprepare_colors: function(d) {\n\t\tlet color, color_name;\n\t\tif(this.get_css_class) {\n\t\t\tcolor_name = this.color_map[this.get_css_class(d)] || 'blue';\n\n\t\t\tif (color_name.startsWith(\"#\")) {\n\t\t\t\tcolor_name = frappe.ui.color.validate_hex(color_name) ?\n\t\t\t\t\tcolor_name : 'blue';\n\t\t\t}\n\n\t\t\td.backgroundColor = frappe.ui.color.get(color_name, 'extra-light');\n\t\t\td.textColor = frappe.ui.color.get(color_name, 'dark');\n\t\t} else {\n\t\t\tcolor = d.color;\n\t\t\tif (!frappe.ui.color.validate_hex(color) || !color) {\n\t\t\t\tcolor = frappe.ui.color.get('blue', 'extra-light');\n\t\t\t}\n\t\t\td.backgroundColor = color;\n\t\t\td.textColor = frappe.ui.color.get_contrast_color(color);\n\t\t}\n\t\treturn d;\n\t},\n\tupdate_event: function(event, revertFunc) {\n\t\tvar me = this;\n\t\tfrappe.model.remove_from_locals(me.doctype, event.name);\n\t\treturn frappe.call({\n\t\t\tmethod: me.update_event_method || \"frappe.desk.calendar.update_event\",\n\t\t\targs: me.get_update_args(event),\n\t\t\tcallback: function(r) {\n\t\t\t\tif(r.exc) {\n\t\t\t\t\tfrappe.show_alert(__(\"Unable to update event\"));\n\t\t\t\t\trevertFunc();\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: function() {\n\t\t\t\trevertFunc();\n\t\t\t}\n\t\t});\n\t},\n\tget_update_args: function(event) {\n\t\tvar me = this;\n\t\tvar args = {\n\t\t\tname: event[this.field_map.id]\n\t\t};\n\n\t\targs[this.field_map.start] = me.get_system_datetime(event.start);\n\n\t\tif(this.field_map.allDay)\n\t\t\targs[this.field_map.allDay] = (event.start._ambigTime && event.end._ambigTime) ? 1 : 0;\n\n\t\tif(this.field_map.end) {\n\t\t\tif (!event.end) {\n\t\t\t\tevent.end = event.start.add(1, \"hour\");\n\t\t\t}\n\n\t\t\targs[this.field_map.end] = me.get_system_datetime(event.end);\n\n\t\t\tif (args[this.field_map.allDay]) {\n\t\t\t\targs[this.field_map.end] = me.get_system_datetime(moment(event.end).subtract(1, \"s\"));\n\t\t\t}\n\t\t}\n\n\t\targs.doctype = event.doctype || this.doctype;\n\n\t\treturn { args: args, field_map: this.field_map };\n\t},\n\n\tfix_end_date_for_event_render: function(event) {\n\t\tif (event.allDay) {\n\t\t\t// We use inclusive end dates. This workaround fixes the rendering of events\n\t\t\tevent.start = event.start ? $.fullCalendar.moment(event.start).stripTime() : null;\n\t\t\tevent.end = event.end ? $.fullCalendar.moment(event.end).add(1, \"day\").stripTime() : null;\n\t\t}\n\t}\n});\n","frappe.provide('frappe.views');\n\nfrappe.views.DashboardView = class DashboardView extends frappe.views.ListView {\n\tget view_name() {\n\t\treturn 'Dashboard';\n\t}\n\n\tsetup_defaults() {\n\t\treturn super.setup_defaults()\n\t\t\t.then(() => {\n\t\t\t\tthis.dashboard_settings = frappe.get_user_settings(this.doctype)['dashboard_settings'] || null;\n\t\t\t});\n\t}\n\n\trender() {\n\n\t}\n\n\tsetup_view() {\n\t\tif (this.chart_group || this.number_card_group) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.setup_dashboard_page();\n\t\tthis.setup_dashboard_customization();\n\t\tthis.make_dashboard();\n\t\tthis.setup_events();\n\t}\n\n\tsetup_dashboard_customization() {\n\t\tthis.$customize = this.$chart_header.find('.customize-dashboard');\n\t\tthis.$save_or_discard = this.$chart_header.find('.customize-options');\n\t}\n\n\tsetup_dashboard_page() {\n\t\tconst dashboard_name = __('{0} Dashboard', [this.doctype]);\n\t\tconst chart_wrapper_html = `<div class=\"dashboard-view\"></div>`;\n\n\t\tthis.$frappe_list.html(chart_wrapper_html);\n\t\tthis.page.clear_secondary_action();\n\t\tthis.$dashboard_page = this.$page.find('.layout-main-section-wrapper').addClass('dashboard-page');\n\t\tthis.$page.find('.page-form').empty().html(\n\t\t\t`<div class=\"dashboard-header\">\n\t\t\t\t<div class=\"text-muted\">\n\t\t\t\t\t<span class=\"uppercase header-title\"> ${dashboard_name} </span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"text-muted customize-dashboard\" data-action=\"customize\">${__('Customize')}</div>\n\t\t\t\t<div class=\"small text-muted customize-options small-bounce\">\n\t\t\t\t\t<span class=\"reset-customization customize-option\" data-action=\"reset_dashboard_customization\">${__('Reset')}</span>\n\t\t\t\t\t<span> / </span>\n\t\t\t\t\t<span class=\"save-customization customize-option\" data-action=\"save_dashboard_customization\">${__('Save')}</span>\n\t\t\t\t\t<span> / </span>\n\t\t\t\t\t<span class=\"discard-customization customize-option\" data-action=\"discard_dashboard_customization\">${__('Discard')}</span>\n\t\t\t\t</div>\n\t\t\t</div>`);\n\n\t\tthis.$dashboard_wrapper = this.$page.find('.dashboard-view');\n\t\tthis.$chart_header = this.$page.find('.dashboard-header');\n\n\t\tfrappe.utils.bind_actions_with_object(this.$dashboard_page, this);\n\t}\n\n\tmake_dashboard() {\n\t\tif (this.dashboard_settings) {\n\t\t\tthis.charts = this.dashboard_settings.charts;\n\t\t\tthis.number_cards = this.dashboard_settings.number_cards;\n\t\t\tthis.render_dashboard();\n\t\t} else {\n\t\t\tfrappe.run_serially([\n\t\t\t\t() => this.fetch_dashboard_items(\n\t\t\t\t\t'Dashboard Chart',\n\t\t\t\t\t{\n\t\t\t\t\t\tchart_type: ['in', ['Count', 'Sum', 'Group By']],\n\t\t\t\t\t\tdocument_type: this.doctype,\n\t\t\t\t\t\tis_public: 1,\n\t\t\t\t\t},\n\t\t\t\t\t'charts'\n\t\t\t\t),\n\t\t\t\t() => this.fetch_dashboard_items('Number Card',\n\t\t\t\t\t{\n\t\t\t\t\t\tdocument_type: this.doctype,\n\t\t\t\t\t\tis_public: 1,\n\t\t\t\t\t},\n\t\t\t\t\t'number_cards'\n\t\t\t\t),\n\t\t\t\t() => this.render_dashboard()\n\t\t\t]);\n\t\t}\n\t}\n\n\trender_dashboard() {\n\t\tthis.$dashboard_wrapper.empty();\n\n\t\tfrappe.dashboard_utils.get_dashboard_settings().then(settings => {\n\t\t\tthis.dashboard_chart_settings = settings.chart_config ? JSON.parse(settings.chart_config) : {};\n\t\t\tthis.charts.map(chart => {\n\t\t\t\tchart.label = chart.chart_name;\n\t\t\t\tchart.chart_settings = this.dashboard_chart_settings[chart.chart_name] || {};\n\t\t\t});\n\t\t\tthis.render_dashboard_charts();\n\t\t});\n\t\tthis.render_number_cards();\n\n\t\tif (!this.charts.length && !this.number_cards.length) {\n\t\t\tthis.render_empty_state();\n\t\t}\n\t}\n\n\tsetup_events() {\n\t\t$(document.body).on('toggleFullWidth', () => this.render_dashboard());\n\t\t$(document.body).on('toggleListSidebar', () => this.render_dashboard());\n\t}\n\n\tfetch_dashboard_items(doctype, filters, obj_name) {\n\t\treturn frappe.db.get_list(doctype, {\n\t\t\tfilters: filters,\n\t\t\tfields: ['*']\n\t\t}).then(items => {\n\t\t\tthis[obj_name] = items;\n\t\t});\n\t}\n\n\trender_number_cards() {\n\t\tthis.number_card_group = new frappe.widget.WidgetGroup({\n\t\t\tcontainer: this.$dashboard_wrapper,\n\t\t\ttype: \"number_card\",\n\t\t\tcolumns: 3,\n\t\t\toptions: {\n\t\t\t\tallow_sorting: true,\n\t\t\t\tallow_create: true,\n\t\t\t\tallow_delete: true,\n\t\t\t\tallow_hiding: true,\n\t\t\t},\n\t\t\tdefault_values: {doctype: this.doctype},\n\t\t\twidgets: this.number_cards || [],\n\t\t\tin_customize_mode: this.in_customize_mode || false,\n\t\t});\n\n\t\tthis.in_customize_mode && this.number_card_group.customize();\n\t}\n\n\trender_dashboard_charts() {\n\t\tthis.chart_group = new frappe.widget.WidgetGroup({\n\t\t\tcontainer: this.$dashboard_wrapper,\n\t\t\ttype: \"chart\",\n\t\t\tcolumns: 2,\n\t\t\toptions: {\n\t\t\t\tallow_sorting: true,\n\t\t\t\tallow_create: true,\n\t\t\t\tallow_delete: true,\n\t\t\t\tallow_hiding: true,\n\t\t\t\tallow_resize: true,\n\t\t\t},\n\t\t\tcustom_dialog: () => this.show_add_chart_dialog(),\n\t\t\twidgets: this.charts,\n\t\t\tin_customize_mode: this.in_customize_mode || false,\n\t\t});\n\n\t\tthis.in_customize_mode && this.chart_group.customize();\n\t\tthis.chart_group.container.find('.widget-group-head').hide();\n\t}\n\n\trender_empty_state() {\n\t\tconst no_result_message_html =\n\t\t\t`<p>${__(\"You haven't added any Dashboard Charts or Number Cards yet.\")}\n\t\t\t<br>${__(\"Click On Customize to add your first widget\")}</p>`;\n\n\t\tconst customize_button =\n\t\t\t`<p><button class=\"btn btn-primary btn-sm\" data-action=\"customize\">\n\t\t\t\t${__('Customize')}\n\t\t\t</button></p>`;\n\n\t\tconst empty_state_image = '/assets/frappe/images/ui-states/empty.png';\n\n\t\tconst empty_state_html = `<div class=\"msg-box no-border empty-dashboard\">\n\t\t\t<div>\n\t\t\t\t<img src=\"${empty_state_image}\" alt=\"Generic Empty State\" class=\"null-state\">\n\t\t\t</div>\n\t\t\t${no_result_message_html}\n\t\t\t${customize_button}\n\t\t</div>`;\n\n\t\tthis.$dashboard_wrapper.append(empty_state_html);\n\t\tthis.$empty_state = this.$dashboard_wrapper.find('.empty-dashboard');\n\t}\n\n\tcustomize() {\n\t\tif (this.in_customize_mode) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.$empty_state) {\n\t\t\tthis.$empty_state.remove();\n\t\t}\n\n\t\tthis.toggle_customize(true);\n\t\tthis.in_customize_mode = true;\n\t\tthis.chart_group.customize();\n\t\tthis.number_card_group.customize();\n\t}\n\n\tget_widgets_to_save(widget_group) {\n\t\tconst config = widget_group.get_widget_config();\n\t\tlet widgets = [];\n\t\tconfig.order.map(widget_name => {\n\t\t\twidgets.push(config.widgets[widget_name]);\n\t\t});\n\t\treturn this.remove_duplicates(widgets);\n\t}\n\n\tsave_dashboard_customization() {\n\t\tthis.toggle_customize(false);\n\n\t\tconst charts = this.get_widgets_to_save(this.chart_group);\n\t\tconst number_cards = this.get_widgets_to_save(this.number_card_group);\n\n\t\tthis.dashboard_settings = {\n\t\t\tcharts: charts,\n\t\t\tnumber_cards: number_cards,\n\t\t};\n\n\t\tfrappe.model.user_settings.save(this.doctype, 'dashboard_settings', this.dashboard_settings);\n\t\tthis.make_dashboard();\n\t}\n\n\tdiscard_dashboard_customization() {\n\t\tthis.dashboard_settings = frappe.get_user_settings(this.doctype)['dashboard_settings'] || null;\n\t\tthis.toggle_customize(false);\n\t\tthis.render_dashboard();\n\t}\n\n\treset_dashboard_customization() {\n\t\tfrappe.confirm(__(\"Are you sure you want to reset all customizations?\"), () => {\n\t\t\tthis.dashboard_settings = null;\n\t\t\tfrappe.model.user_settings.save(\n\t\t\t\tthis.doctype, 'dashboard_settings', this.dashboard_settings\n\t\t\t).then(() => this.make_dashboard());\n\n\t\t\tthis.toggle_customize(false);\n\t\t});\n\t}\n\n\ttoggle_customize(show) {\n\t\tthis.$customize.toggle(!show);\n\t\tthis.$save_or_discard.toggle(show);\n\t\tthis.in_customize_mode = show;\n\t}\n\n\tshow_add_chart_dialog() {\n\t\tlet fields = this.get_field_options();\n\t\tconst dialog = new frappe.ui.Dialog({\n\t\t\ttitle: __(\"Add a {0} Chart\", [this.doctype]),\n\t\t\tfields: [\n\t\t\t\t{\n\t\t\t\t\tfieldname: 'new_or_existing',\n\t\t\t\t\tfieldtype: 'Select',\n\t\t\t\t\tlabel: 'Choose an existing chart or create a new chart',\n\t\t\t\t\toptions: ['New Chart', 'Existing Chart'],\n\t\t\t\t\treqd: 1,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Chart',\n\t\t\t\t\tfieldname: 'chart',\n\t\t\t\t\tfieldtype: 'Link',\n\t\t\t\t\tget_query: () => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t'query': 'frappe.desk.doctype.dashboard_chart.dashboard_chart.get_charts_for_user',\n\t\t\t\t\t\t\tfilters: {\n\t\t\t\t\t\t\t\tdocument_type: this.doctype,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t},\n\t\t\t\t\toptions: 'Dashboard Chart',\n\t\t\t\t\tdepends_on: 'eval: doc.new_or_existing == \"Existing Chart\"'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: 'sb_2',\n\t\t\t\t\tfieldtype: 'Section Break',\n\t\t\t\t\tdepends_on: 'eval: doc.new_or_existing == \"New Chart\"'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Chart Label',\n\t\t\t\t\tfieldname: 'label',\n\t\t\t\t\tfieldtype: 'Data',\n\t\t\t\t\tmandatory_depends_on: 'eval: doc.new_or_existing == \"New Chart\"'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: 'cb_1',\n\t\t\t\t\tfieldtype: 'Column Break'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Chart Type',\n\t\t\t\t\tfieldname: 'chart_type',\n\t\t\t\t\tfieldtype: 'Select',\n\t\t\t\t\toptions: ['Time Series', 'Group By'],\n\t\t\t\t\tmandatory_depends_on: 'eval: doc.new_or_existing == \"New Chart\"',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: 'sb_2',\n\t\t\t\t\tfieldtype: 'Section Break',\n\t\t\t\t\tlabel: 'Chart Config',\n\t\t\t\t\tdepends_on: 'eval: doc.chart_type == \"Time Series\" && doc.new_or_existing == \"New Chart\"',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Function',\n\t\t\t\t\tfieldname: 'chart_function',\n\t\t\t\t\tfieldtype: 'Select',\n\t\t\t\t\toptions: ['Count', 'Sum', 'Average'],\n\t\t\t\t\tdefault: 'Count',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Timespan',\n\t\t\t\t\tfieldtype: 'Select',\n\t\t\t\t\tfieldname: 'timespan',\n\t\t\t\t\tdepends_on: 'eval: doc.chart_type == \"Time Series\"',\n\t\t\t\t\toptions: ['Last Year', 'Last Quarter', 'Last Month', 'Last Week'],\n\t\t\t\t\tdefault: 'Last Year',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: 'cb_2',\n\t\t\t\t\tfieldtype: 'Column Break'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Value Based On',\n\t\t\t\t\tfieldtype: 'Select',\n\t\t\t\t\tfieldname: 'based_on',\n\t\t\t\t\toptions: fields.value_fields,\n\t\t\t\t\tdepends_on: 'eval: doc.chart_function==\"Sum\"'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Time Series Based On',\n\t\t\t\t\tfieldtype: 'Select',\n\t\t\t\t\tfieldname: 'based_on',\n\t\t\t\t\toptions: fields.date_fields,\n\t\t\t\t\tmandatory_depends_on: 'eval: doc.chart_type == \"Time Series\"'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Time Interval',\n\t\t\t\t\tfieldname: 'time_interval',\n\t\t\t\t\tfieldtype: 'Select',\n\t\t\t\t\tdepends_on: 'eval: doc.chart_type == \"Time Series\"',\n\t\t\t\t\toptions: ['Yearly', 'Quarterly', 'Monthly', 'Weekly', 'Daily'],\n\t\t\t\t\tdefault: 'Monthly'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: 'sb_2',\n\t\t\t\t\tfieldtype: 'Section Break',\n\t\t\t\t\tlabel: 'Chart Config',\n\t\t\t\t\tdepends_on: 'eval: doc.chart_type == \"Group By\" && doc.new_or_existing == \"New Chart\"',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Group By Type',\n\t\t\t\t\tfieldname: 'group_by_type',\n\t\t\t\t\tfieldtype: 'Select',\n\t\t\t\t\toptions: ['Count', 'Sum', 'Average'],\n\t\t\t\t\tdefault: 'Count',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Aggregate Function Based On',\n\t\t\t\t\tfieldtype: 'Select',\n\t\t\t\t\tfieldname: 'aggregate_function_based_on',\n\t\t\t\t\toptions: fields.aggregate_function_fields,\n\t\t\t\t\tdepends_on: 'eval: [\"Sum\", \"Avergage\"].includes(doc.group_by_type)',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: 'cb_2',\n\t\t\t\t\tfieldtype: 'Column Break'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Group By Based On',\n\t\t\t\t\tfieldtype: 'Select',\n\t\t\t\t\tfieldname: 'group_by_based_on',\n\t\t\t\t\toptions: fields.group_by_fields,\n\t\t\t\t\tdefault: 'Last Year',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Number of Groups',\n\t\t\t\t\tfieldtype: 'Int',\n\t\t\t\t\tfieldname: 'number_of_groups',\n\t\t\t\t\tdefault: 0,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: 'sb_3',\n\t\t\t\t\tfieldtype: 'Section Break',\n\t\t\t\t\tdepends_on: 'eval: doc.new_or_existing == \"New Chart\"'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Chart Type',\n\t\t\t\t\tfieldname: 'type',\n\t\t\t\t\tfieldtype: 'Select',\n\t\t\t\t\toptions: ['Line', 'Bar', 'Percentage', 'Pie'],\n\t\t\t\t\tdepends_on: 'eval: doc.new_or_existing == \"New Chart\"'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: 'cb_1',\n\t\t\t\t\tfieldtype: 'Column Break'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Chart Color',\n\t\t\t\t\tfieldname: 'color',\n\t\t\t\t\tfieldtype: 'Color',\n\t\t\t\t\tdepends_on: 'eval: doc.new_or_existing == \"New Chart\"',\n\t\t\t\t},\n\t\t\t],\n\t\t\tprimary_action_label: __('Add'),\n\t\t\tprimary_action: (values) => {\n\t\t\t\tlet chart = values;\n\t\t\t\tif (chart.new_or_existing == 'New Chart') {\n\t\t\t\t\tchart.chart_name = chart.label;\n\t\t\t\t\tchart.chart_type = chart.chart_type == 'Time Series' ? chart.chart_function : chart.chart_type;\n\t\t\t\t\tchart.document_type = this.doctype;\n\t\t\t\t\tchart.filters_json = '[]';\n\t\t\t\t\tfrappe.xcall('frappe.desk.doctype.dashboard_chart.dashboard_chart.create_dashboard_chart', {'args': chart}).then((doc)=> {\n\t\t\t\t\t\tthis.chart_group.new_widget.on_create({'chart_name': doc.chart_name, 'name': doc.chart_name, 'label': chart.label});\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthis.chart_group.new_widget.on_create({'chart_name': chart.chart, 'label': chart.chart, 'name': chart.chart});\n\t\t\t\t}\n\t\t\t\tdialog.hide();\n\t\t\t}\n\t\t});\n\t\tdialog.show();\n\t}\n\n\tget_field_options() {\n\t\tlet date_fields = [\n\t\t\t{label: __('Created On'), value: 'creation'},\n\t\t\t{label: __('Last Modified On'), value: 'modified'}\n\t\t];\n\t\tlet value_fields = [];\n\t\tlet group_by_fields = [];\n\t\tlet aggregate_function_fields = [];\n\n\t\tfrappe.get_meta(this.doctype).fields.map(df => {\n\t\t\tif (['Date', 'Datetime'].includes(df.fieldtype)) {\n\t\t\t\tdate_fields.push({label: df.label, value: df.fieldname});\n\t\t\t}\n\t\t\tif (frappe.model.numeric_fieldtypes.includes(df.fieldtype)) {\n\t\t\t\tif (df.fieldtype == 'Currency') {\n\t\t\t\t\tif (!df.options || df.options !== 'Company:company:default_currency') {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvalue_fields.push({label: df.label, value: df.fieldname});\n\t\t\t\taggregate_function_fields.push({label: df.label, value: df.fieldname});\n\t\t\t}\n\t\t\tif (['Link', 'Select'].includes(df.fieldtype)) {\n\t\t\t\tgroup_by_fields.push({label: df.label, value: df.fieldname});\n\t\t\t}\n\t\t});\n\n\t\treturn {\n\t\t\tdate_fields: date_fields,\n\t\t\tvalue_fields: value_fields,\n\t\t\tgroup_by_fields: group_by_fields,\n\t\t\taggregate_function_fields: aggregate_function_fields\n\t\t};\n\t}\n\n\tremove_duplicates(items) {\n\t\treturn items.filter((item, index) => items.indexOf(item) === index);\n\t}\n\n};\n","/**\n * frappe.views.ImageView\n */\nfrappe.provide(\"frappe.views\");\n\nfrappe.views.ImageView = class ImageView extends frappe.views.ListView {\n\tget view_name() {\n\t\treturn 'Image';\n\t}\n\n\tsetup_defaults() {\n\t\treturn super.setup_defaults()\n\t\t\t.then(() => {\n\t\t\t\tthis.page_title = this.page_title + ' ' + __('Images');\n\t\t\t})\n\t}\n\n\tsetup_view() {\n\t\tthis.setup_columns();\n\t\tthis.setup_check_events();\n\t}\n\n\tset_fields() {\n\t\tthis.fields = [\n\t\t\t'name',\n\t\t\t...this.get_fields_in_list_view().map((el)=> el.fieldname),\n\t\t\tthis.meta.title_field,\n\t\t\tthis.meta.image_field\n\t\t];\n\t}\n\n\tprepare_data(data) {\n\t\tsuper.prepare_data(data);\n\t\tthis.items = this.data.map(d => {\n\t\t\t// absolute url if cordova, else relative\n\t\t\td._image_url = this.get_image_url(d);\n\t\t\treturn d;\n\t\t});\n\t}\n\n\trender() {\n\t\tthis.get_attached_images()\n\t\t\t.then(() => {\n\t\t\t\tthis.render_image_view();\n\n\t\t\t\tif (!this.gallery) {\n\t\t\t\t\tthis.setup_gallery();\n\t\t\t\t} else {\n\t\t\t\t\tthis.gallery.prepare_pswp_items(this.items, this.images_map);\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\trender_image_view() {\n\t\tvar html = this.items.map(this.item_html.bind(this)).join(\"\");\n\n\t\tthis.$result.html(`\n\t\t\t${this.get_header_html()}\n\t\t\t<div class=\"image-view-container small\">\n\t\t\t\t${html}\n\t\t\t</div>\n\t\t`);\n\t}\n\n\titem_details_html(item) {\n\t\tconst info_fields = this.get_fields_in_list_view().map((el)=> el.fieldname)  || [];\n\t\tlet info_html = `<div><ul class=\"list-unstyled image-view-info\">`;\n\t\tinfo_fields.forEach((field, index) => {\n\t\t\tif (item[field]) {\n\t\t\t\tif (index == 0) info_html += `<li>${item[field]}</li>`;\n\t\t\t\telse info_html += `<li class=\"text-muted\">${item[field]}</li>`;\n\t\t\t}\n\t\t})\n\t\tinfo_html += `</ul></div>`;\n\t\treturn info_html;\n\t}\n\n\titem_html(item) {\n\t\titem._name = encodeURI(item.name);\n\t\tconst encoded_name = item._name;\n\t\tconst title = strip_html(item[this.meta.title_field || 'name']);\n\t\tconst _class = !item._image_url ? 'no-image' : '';\n\t\tconst _html = item._image_url ?\n\t\t\t`<img data-name=\"${encoded_name}\" src=\"${ item._image_url }\" alt=\"${ title }\">` :\n\t\t\t`<span class=\"placeholder-text\">\n\t\t\t\t${ frappe.get_abbr(title) }\n\t\t\t</span>`;\n\n\t\tlet details = this.item_details_html(item);\n\n\t\treturn `\n\t\t\t<div class=\"image-view-item\">\n\t\t\t\t<div class=\"image-view-header\">\n\t\t\t\t\t<div class=\"list-row-col list-subject ellipsis level\">\n\t\t\t\t\t\t${this.get_subject_html(item)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"image-view-body\">\n\t\t\t\t\t<a  data-name=\"${encoded_name}\"\n\t\t\t\t\t\ttitle=\"${encoded_name}\"\n\t\t\t\t\t\thref=\"${this.get_form_link(item)}\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"image-field ${_class}\"\n\t\t\t\t\t\t\tdata-name=\"${encoded_name}\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t${_html}\n\t\t\t\t\t\t\t<button class=\"btn btn-default zoom-view\" data-name=\"${encoded_name}\">\n\t\t\t\t\t\t\t\t<i class=\"fa fa-search-plus\"></i>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t\t${details}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tget_image_url(data) {\n\t\tvar url;\n\t\turl = data.image ? data.image : data[this.meta.image_field];\n\n\t\t// absolute url for mobile\n\t\tif (window.cordova && !frappe.utils.is_url(url)) {\n\t\t\turl = frappe.base_url + url;\n\t\t}\n\t\tif (url) {\n\t\t\treturn url;\n\t\t}\n\t\treturn null;\n\t}\n\n\tget_attached_images() {\n\t\treturn frappe.call({\n\t\t\tmethod: 'frappe.core.doctype.file.file.get_attached_images',\n\t\t\targs: {\n\t\t\t\tdoctype: this.doctype,\n\t\t\t\tnames: this.items.map(i => i.name)\n\t\t\t}\n\t\t}).then(r => {\n\t\t\tthis.images_map = Object.assign(this.images_map || {}, r.message);\n\t\t});\n\t}\n\n\tget_header_html() {\n\t\treturn this.get_header_html_skeleton(`\n\t\t\t<div class=\"list-row-col list-subject level \">\n\t\t\t\t<input class=\"level-item list-check-all hidden-xs\" type=\"checkbox\" title=\"Select All\">\n\t\t\t\t<span class=\"level-item list-liked-by-me\">\n\t\t\t\t\t<i class=\"octicon octicon-heart text-extra-muted\" title=\"Likes\"></i>\n\t\t\t\t</span>\n\t\t\t\t<span class=\"level-item\"></span>\n\t\t\t</div>\n\t\t`);\n\t}\n\n\tsetup_gallery() {\n\t\tvar me = this;\n\t\tthis.gallery = new frappe.views.GalleryView({\n\t\t\tdoctype: this.doctype,\n\t\t\titems: this.items,\n\t\t\twrapper: this.$result,\n\t\t\timages_map: this.images_map\n\t\t});\n\t\tthis.$result.on('click', '.btn.zoom-view', function (e) {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t\tvar name = $(this).data().name;\n\t\t\tname = decodeURIComponent(name);\n\t\t\tme.gallery.show(name);\n\t\t\treturn false;\n\t\t});\n\t}\n};\n\nfrappe.views.GalleryView = Class.extend({\n\tinit: function (opts) {\n\t\t$.extend(this, opts);\n\t\tvar me = this;\n\n\t\tthis.lib_ready = this.load_lib();\n\t\tthis.lib_ready.then(function () {\n\t\t\tme.prepare();\n\t\t});\n\t},\n\tprepare: function () {\n\t\t// keep only one pswp dom element\n\t\tthis.pswp_root = $('body > .pswp');\n\t\tif (this.pswp_root.length === 0) {\n\t\t\tvar pswp = frappe.render_template('photoswipe_dom');\n\t\t\tthis.pswp_root = $(pswp).appendTo('body');\n\t\t}\n\t},\n\tprepare_pswp_items: function (_items, _images_map) {\n\t\tvar me = this;\n\n\t\tif (_items) {\n\t\t\t// passed when more button clicked\n\t\t\tthis.items = this.items.concat(_items);\n\t\t\tthis.images_map = _images_map;\n\t\t}\n\n\t\treturn new Promise(resolve => {\n\t\t\tconst items = this.items.map(function (i) {\n\t\t\t\tconst query = 'img[data-name=\"' + i._name + '\"]';\n\t\t\t\tlet el = me.wrapper.find(query).get(0);\n\n\t\t\t\tlet width, height;\n\t\t\t\tif (el) {\n\t\t\t\t\twidth = el.naturalWidth;\n\t\t\t\t\theight = el.naturalHeight;\n\t\t\t\t}\n\n\t\t\t\tif (!el) {\n\t\t\t\t\tel = me.wrapper.find('.image-field[data-name=\"' + i._name + '\"]').get(0);\n\t\t\t\t\twidth = el.getBoundingClientRect().width;\n\t\t\t\t\theight = el.getBoundingClientRect().height;\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tsrc: i._image_url,\n\t\t\t\t\tmsrc: i._image_url,\n\t\t\t\t\tname: i.name,\n\t\t\t\t\tw: width,\n\t\t\t\t\th: height,\n\t\t\t\t\tel: el\n\t\t\t\t};\n\t\t\t});\n\t\t\tthis.pswp_items = items;\n\t\t\tresolve();\n\t\t});\n\t},\n\tshow: function (docname) {\n\t\tthis.lib_ready\n\t\t\t.then(() => this.prepare_pswp_items())\n\t\t\t.then(() => this._show(docname));\n\t},\n\t_show: function (docname) {\n\t\tconst me = this;\n\t\tconst items = this.pswp_items;\n\t\tconst item_index = items.findIndex(item => item.name === docname);\n\n\t\tvar options = {\n\t\t\tindex: item_index,\n\t\t\tgetThumbBoundsFn: function (index) {\n\t\t\t\tconst query = 'img[data-name=\"' + items[index]._name + '\"]';\n\t\t\t\tlet thumbnail = me.wrapper.find(query).get(0);\n\n\t\t\t\tif (!thumbnail) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar pageYScroll = window.pageYOffset || document.documentElement.scrollTop,\n\t\t\t\t\trect = thumbnail.getBoundingClientRect();\n\n\t\t\t\treturn {\n\t\t\t\t\tx: rect.left,\n\t\t\t\t\ty: rect.top + pageYScroll,\n\t\t\t\t\tw: rect.width\n\t\t\t\t};\n\t\t\t},\n\t\t\thistory: false,\n\t\t\tshareEl: false,\n\t\t\tshowHideOpacity: true\n\t\t};\n\n\t\t// init\n\t\tthis.pswp = new PhotoSwipe(\n\t\t\tthis.pswp_root.get(0),\n\t\t\tPhotoSwipeUI_Default,\n\t\t\titems,\n\t\t\toptions\n\t\t);\n\t\tthis.browse_images();\n\t\tthis.pswp.init();\n\t},\n\tbrowse_images: function () {\n\t\tconst $more_items = this.pswp_root.find('.pswp__more-items');\n\t\tconst images_map = this.images_map;\n\t\tlet last_hide_timeout = null;\n\n\t\tthis.pswp.listen('afterChange', function () {\n\t\t\tconst images = images_map[this.currItem.name];\n\t\t\tif (!images || images.length === 1) {\n\t\t\t\t$more_items.html('');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\thide_more_items_after_2s();\n\t\t\tconst html = images.map(img_html).join(\"\");\n\t\t\t$more_items.html(html);\n\t\t});\n\n\t\tthis.pswp.listen('beforeChange', hide_more_items);\n\t\tthis.pswp.listen('initialZoomOut', hide_more_items);\n\t\tthis.pswp.listen('destroy', () => {\n\t\t\t$(document).off('mousemove', hide_more_items_after_2s);\n\t\t});\n\n\t\t// Replace current image on click\n\t\t$more_items.on('click', '.pswp__more-item', (e) => {\n\t\t\tconst img_el = e.target;\n\t\t\tconst index = this.pswp.items.findIndex(i => i.name === this.pswp.currItem.name);\n\n\t\t\tthis.pswp.goTo(index);\n\t\t\tthis.pswp.items.splice(index, 1, {\n\t\t\t\tsrc: img_el.src,\n\t\t\t\tw: img_el.naturalWidth,\n\t\t\t\th: img_el.naturalHeight,\n\t\t\t\tname: this.pswp.currItem.name\n\t\t\t});\n\t\t\tthis.pswp.invalidateCurrItems();\n\t\t\tthis.pswp.updateSize(true);\n\t\t});\n\n\t\t// hide more-images 2s after mousemove\n\t\t$(document).on('mousemove', hide_more_items_after_2s);\n\n\t\tfunction hide_more_items_after_2s() {\n\t\t\tclearTimeout(last_hide_timeout);\n\t\t\tshow_more_items();\n\t\t\tlast_hide_timeout = setTimeout(hide_more_items, 2000);\n\t\t}\n\n\t\tfunction show_more_items() {\n\t\t\t$more_items.show();\n\t\t}\n\n\t\tfunction hide_more_items() {\n\t\t\t$more_items.hide();\n\t\t}\n\n\t\tfunction img_html(src) {\n\t\t\treturn `<div class=\"pswp__more-item\">\n\t\t\t\t<img src=\"${src}\">\n\t\t\t</div>`;\n\t\t}\n\t},\n\tload_lib: function () {\n\t\treturn new Promise(resolve => {\n\t\t\tvar asset_dir = 'assets/frappe/js/lib/photoswipe/';\n\t\t\tfrappe.require([\n\t\t\t\tasset_dir + 'photoswipe.css',\n\t\t\t\tasset_dir + 'default-skin.css',\n\t\t\t\tasset_dir + 'photoswipe.js',\n\t\t\t\tasset_dir + 'photoswipe-ui-default.js'\n\t\t\t], resolve);\n\t\t});\n\t}\n});","frappe.provide('frappe.views');\n\nfrappe.views.KanbanView = class KanbanView extends frappe.views.ListView {\n\tstatic load_last_view() {\n\t\tconst route = frappe.get_route();\n\t\tif (route.length === 3) {\n\t\t\tconst doctype = route[1];\n\t\t\tconst user_settings = frappe.get_user_settings(doctype)['Kanban'] || {};\n\t\t\tif (!user_settings.last_kanban_board) {\n\t\t\t\tfrappe.msgprint({\n\t\t\t\t\ttitle: __('Error'),\n\t\t\t\t\tindicator: 'red',\n\t\t\t\t\tmessage: __('Missing parameter Kanban Board Name')\n\t\t\t\t});\n\t\t\t\tfrappe.set_route('List', doctype, 'List');\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\troute.push(user_settings.last_kanban_board);\n\t\t\tfrappe.set_route(route);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tget view_name() {\n\t\treturn 'Kanban';\n\t}\n\n\tsetup_defaults() {\n\t\treturn super.setup_defaults()\n\t\t\t.then(() => {\n\t\t\t\tthis.board_name = frappe.get_route()[3];\n\t\t\t\tthis.page_title = this.board_name;\n\t\t\t\tthis.card_meta = this.get_card_meta();\n\n\t\t\t\tthis.menu_items.push({\n\t\t\t\t\tlabel: __('Save filters'),\n\t\t\t\t\taction: () => {\n\t\t\t\t\t\tthis.save_kanban_board_filters();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn this.get_board();\n\t\t\t});\n\t}\n\n\tget_board() {\n\t\treturn frappe.db.get_doc('Kanban Board', this.board_name)\n\t\t\t.then(board => {\n\t\t\t\tthis.board = board;\n\t\t\t\tthis.board.filters_array = JSON.parse(this.board.filters || '[]');\n\t\t\t\tthis.filters = this.board.filters_array;\n\t\t\t});\n\t}\n\n\tbefore_refresh() {\n\n\t}\n\n\tsetup_view() {\n\t\tthis.setup_realtime_updates();\n\t}\n\n\tset_fields() {\n\t\tsuper.set_fields();\n\t\tthis._add_field(this.card_meta.title_field);\n\t}\n\n\tbefore_render() {\n\t\tfrappe.model.user_settings.save(this.doctype, 'last_view', this.view_name);\n\t\tthis.save_view_user_settings({\n\t\t\tlast_kanban_board: this.board_name\n\t\t});\n\t}\n\n\trender_list() {\n\n\t}\n\n\ton_filter_change() {\n\t\tif (JSON.stringify(this.board.filters_array) !== JSON.stringify(this.filter_area.get())) {\n\t\t\tthis.page.set_indicator(__('Not Saved'), 'orange');\n\t\t} else {\n\t\t\tthis.page.clear_indicator();\n\t\t}\n\t}\n\n\tsave_kanban_board_filters() {\n\t\tconst filters = this.filter_area.get();\n\n\t\tfrappe.call({\n\t\t\tmethod: 'frappe.desk.doctype.kanban_board.kanban_board.save_filters',\n\t\t\targs: {\n\t\t\t\tboard_name: this.board_name,\n\t\t\t\tfilters: filters\n\t\t\t}\n\t\t}).then(r => {\n\t\t\tif (r.exc) {\n\t\t\t\tfrappe.show_alert({\n\t\t\t\t\tindicator: 'red',\n\t\t\t\t\tmessage: __('There was an error saving filters')\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tfrappe.show_alert({\n\t\t\t\tindicator: 'green',\n\t\t\t\tmessage: __('Filters saved')\n\t\t\t});\n\n\t\t\tthis.board.filters_array = filters;\n\t\t\tthis.on_filter_change();\n\t\t});\n\t}\n\n\tget_fields() {\n\t\tthis.fields.push([this.board.field_name, this.board.reference_doctype]);\n\t\treturn super.get_fields();\n\t}\n\n\trender() {\n\t\tconst board_name = this.board_name;\n\t\tif (this.kanban && board_name === this.kanban.board_name) {\n\t\t\tthis.kanban.update(this.data);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.kanban = new frappe.views.KanbanBoard({\n\t\t\tdoctype: this.doctype,\n\t\t\tboard: this.board,\n\t\t\tboard_name: board_name,\n\t\t\tcards: this.data,\n\t\t\tcard_meta: this.card_meta,\n\t\t\twrapper: this.$result,\n\t\t\tcur_list: this,\n\t\t\tuser_settings: this.view_user_settings\n\t\t});\n\t}\n\n\tget_card_meta() {\n\t\tvar meta = frappe.get_meta(this.doctype);\n\t\tvar doc = frappe.model.get_new_doc(this.doctype);\n\t\tvar title_field = null;\n\t\tvar quick_entry = false;\n\n\t\tif (this.meta.title_field) {\n\t\t\ttitle_field = frappe.meta.get_field(this.doctype, this.meta.title_field);\n\t\t}\n\n\t\tthis.meta.fields.forEach((df) => {\n\t\t\tconst is_valid_field =\n\t\t\t\tin_list(['Data', 'Text', 'Small Text', 'Text Editor'], df.fieldtype)\n\t\t\t\t&& !df.hidden;\n\n\t\t\tif (is_valid_field && !title_field) {\n\t\t\t\t// can be mapped to textarea\n\t\t\t\ttitle_field = df;\n\t\t\t}\n\t\t});\n\n\t\t// quick entry\n\t\tvar mandatory = meta.fields.filter((df) => df.reqd && !doc[df.fieldname]);\n\n\t\tif (mandatory.some(df => frappe.model.table_fields.includes(df.fieldtype)) || mandatory.length > 1) {\n\t\t\tquick_entry = true;\n\t\t}\n\n\t\tif (!title_field) {\n\t\t\ttitle_field = frappe.meta.get_field(this.doctype, 'name');\n\t\t}\n\n\t\treturn {\n\t\t\tquick_entry: quick_entry,\n\t\t\ttitle_field: title_field\n\t\t};\n\t}\n\n\tget required_libs() {\n\t\treturn [\n\t\t\t'assets/frappe/js/lib/fluxify.min.js',\n\t\t\t'assets/frappe/js/frappe/views/kanban/kanban_board.js'\n\t\t];\n\t}\n};\n\n\nfrappe.views.KanbanView.setup_dropdown_in_sidebar = function(doctype, $dropdown) {\n\t// get kanban boards and append to dropdown\n\tget_kanban_boards()\n\t\t.then((kanban_boards) => {\n\t\t\tif (!kanban_boards) return;\n\n\t\t\t$('<li role=\"separator\" class=\"divider\"></li>').appendTo($dropdown);\n\n\t\t\tkanban_boards.forEach(board => {\n\t\t\t\tconst route = ['List', board.reference_doctype, 'Kanban', board.name].join('/');\n\n\t\t\t\t$(`<li>\n\t\t\t\t\t<a href=\"#${route}\">\n\t\t\t\t\t\t<span>${__(board.name)}</span>\n\t\t\t\t\t${board.private ? '<i class=\"fa fa-lock fa-fw text-warning\"></i>' : ''}\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t\t`).appendTo($dropdown);\n\t\t\t});\n\t\t});\n\n\t$dropdown.on('click', '.new-kanban-board', () => {\n\t\tconst dialog = new_kanban_dialog();\n\t\tdialog.show();\n\t});\n\n\tfunction make_kanban_board(board_name, field_name, project) {\n\t\treturn frappe.call({\n\t\t\tmethod: 'frappe.desk.doctype.kanban_board.kanban_board.quick_kanban_board',\n\t\t\targs: {\n\t\t\t\tdoctype,\n\t\t\t\tboard_name,\n\t\t\t\tfield_name,\n\t\t\t\tproject\n\t\t\t},\n\t\t\tcallback: function(r) {\n\t\t\t\tvar kb = r.message;\n\t\t\t\tif (kb.filters) {\n\t\t\t\t\tfrappe.provide('frappe.kanban_filters');\n\t\t\t\t\tfrappe.kanban_filters[kb.kanban_board_name] = kb.filters;\n\t\t\t\t}\n\t\t\t\tfrappe.set_route('List', doctype, 'Kanban', kb.kanban_board_name);\n\t\t\t}\n\t\t});\n\t}\n\n\tlet dialog = null;\n\n\tfunction new_kanban_dialog() {\n\t\tif (dialog) return dialog;\n\n\t\tconst fields = get_fields_for_dialog();\n\n\t\tlet primary_action_label = fields.length > 1 ? __('Save') : '';\n\t\tlet primary_action = fields.length > 1 ?\n\t\t\t({ board_name, field_name, project }) => {\n\t\t\t\tmake_kanban_board(board_name, field_name, project)\n\t\t\t\t\t.then(() => dialog.hide(), (err) => frappe.msgprint(err));\n\t\t\t} : null;\n\n\t\tdialog = new frappe.ui.Dialog({\n\t\t\ttitle: __('New Kanban Board'),\n\t\t\tfields,\n\t\t\tprimary_action_label,\n\t\t\tprimary_action\n\t\t});\n\t\treturn dialog;\n\t}\n\n\tfunction get_fields_for_dialog() {\n\n\t\tlet fields = [{\n\t\t\tfieldtype: 'Data',\n\t\t\tfieldname: 'board_name',\n\t\t\tlabel: __('Kanban Board Name'),\n\t\t\treqd: 1,\n\t\t\tdescription: ['Note', 'ToDo'].includes(doctype) ?\n\t\t\t\t__('This Kanban Board will be private') : ''\n\t\t}];\n\n\t\tif (doctype === 'Task') {\n\t\t\tfields.push({\n\t\t\t\tfieldtype: 'Link',\n\t\t\t\tfieldname: 'project',\n\t\t\t\tlabel: __('Project'),\n\t\t\t\toptions: 'Project'\n\t\t\t});\n\t\t}\n\n\t\tconst select_fields =\n\t\t\tfrappe.get_meta(doctype).fields\n\t\t\t\t.filter(df => {\n\t\t\t\t\treturn df.fieldtype === 'Select' &&\n\t\t\t\t\t\tdf.fieldname !== 'kanban_column';\n\t\t\t\t});\n\n\t\tif (select_fields.length > 0) {\n\t\t\tfields.push({\n\t\t\t\tfieldtype: 'Select',\n\t\t\t\tfieldname: 'field_name',\n\t\t\t\tlabel: __('Columns based on'),\n\t\t\t\toptions: select_fields.map(df => ({label: df.label, value: df.fieldname})),\n\t\t\t\tdefault: select_fields[0],\n\t\t\t\treqd: 1,\n\t\t\t});\n\t\t} else {\n\t\t\tfields = [{\n\t\t\t\tfieldtype: 'HTML',\n\t\t\t\toptions: `\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<p class=\"text-medium\">\n\t\t\t\t\t\t${__('No fields found that can be used as a Kanban Column. Use the Customize Form to add a Custom Field of type \"Select\".')}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<a class=\"btn btn-xs btn-default\" href=\"#Form/Customize Form?doc_type=${doctype}\">\n\t\t\t\t\t\t\t${__('Customize Form')}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t`\n\t\t\t}];\n\t\t}\n\n\t\treturn fields;\n\t}\n\n\tfunction get_kanban_boards() {\n\t\treturn frappe.call('frappe.desk.doctype.kanban_board.kanban_board.get_kanban_boards', { doctype })\n\t\t\t.then(r => r.message);\n\t}\n};\n","/**\n * frappe.views.InboxView\n */\n\nfrappe.provide(\"frappe.views\");\n\nfrappe.views.InboxView = class InboxView extends frappe.views.ListView {\n\tstatic load_last_view() {\n\t\tconst route = frappe.get_route();\n\t\tif (!route[3] && frappe.boot.email_accounts.length) {\n\t\t\tlet email_account;\n\t\t\tif (frappe.boot.email_accounts[0].email_id == \"All Accounts\") {\n\t\t\t\temail_account = \"All Accounts\";\n\t\t\t} else {\n\t\t\t\temail_account = frappe.boot.email_accounts[0].email_account;\n\t\t\t}\n\t\t\tfrappe.set_route(\"List\", \"Communication\", \"Inbox\", email_account);\n\t\t\treturn true;\n\t\t} else if (!route[3] || (route[3] !== \"All Accounts\" && !is_valid(route[3]))) {\n\t\t\tfrappe.throw(__('No email account associated with the User. Please add an account under User > Email Inbox.'));\n\t\t}\n\t\treturn false;\n\n\t\tfunction is_valid(email_account) {\n\t\t\treturn frappe.boot.email_accounts.find(d => d.email_account === email_account);\n\t\t}\n\t}\n\n\tget view_name() {\n\t\treturn 'Inbox';\n\t}\n\n\tshow() {\n\t\tsuper.show();\n\t\t// save email account in user_settings\n\t\tthis.save_view_user_settings({\n\t\t\tlast_email_account: this.current_email_account\n\t\t});\n\t}\n\n\tsetup_defaults() {\n\t\tsuper.setup_defaults();\n\n\t\t// initialize with saved order by\n\t\tthis.sort_by = this.view_user_settings.sort_by || 'communication_date';\n\t\tthis.sort_order = this.view_user_settings.sort_order || 'desc';\n\n\t\tthis.email_account = frappe.get_route()[3];\n\t\tthis.page_title = this.email_account;\n\t\tthis.filters = this.get_inbox_filters();\n\t}\n\n\tsetup_columns() {\n\t\t// setup columns for list view\n\t\tthis.columns = [];\n\t\tthis.columns.push({\n\t\t\ttype: 'Subject',\n\t\t\tdf: {\n\t\t\t\tlabel: __('Subject'),\n\t\t\t\tfieldname: 'subject'\n\t\t\t}\n\t\t});\n\t\tthis.columns.push({\n\t\t\ttype: 'Field',\n\t\t\tdf: {\n\t\t\t\tlabel: this.is_sent_emails ? __(\"To\") : __(\"From\"),\n\t\t\t\tfieldname: this.is_sent_emails ? 'recipients' : 'sender'\n\t\t\t}\n\t\t});\n\t}\n\n\tget_seen_class(doc) {\n\t\tconst seen =\n\t\t\tBoolean(doc.seen) || JSON.parse(doc._seen || '[]').includes(frappe.session.user)\n\t\t\t\t? ''\n\t\t\t\t: 'bold';\n\t\treturn seen;\n\t}\n\n\tget is_sent_emails() {\n\t\tconst f = this.filter_area.get()\n\t\t\t.find(filter => filter[1] === 'sent_or_received');\n\t\treturn f && f[3] === 'Sent';\n\t}\n\n\trender_header() {\n\t\tthis.$result.find('.list-row-head').remove();\n\t\tthis.$result.prepend(this.get_header_html());\n\t}\n\n\trender() {\n\t\tthis.setup_columns();\n\t\tthis.render_header();\n\t\tthis.render_list();\n\t\tthis.on_row_checked();\n\t\tthis.render_count();\n\t\tthis.render_tags();\n\t}\n\n\tget_meta_html(email) {\n\t\tconst attachment = email.has_attachment ?\n\t\t\t`<span class=\"fa fa-paperclip fa-large\" title=\"${__('Has Attachments')}\"></span>` : '';\n\n\t\tconst form_link = frappe.utils.get_form_link(email.reference_doctype, email.reference_name);\n\t\tconst link = email.reference_doctype && email.reference_doctype !== this.doctype ?\n\t\t\t`<a class=\"text-muted grey\" href=\"${form_link}\"\n\t\t\t\ttitle=\"${__('Linked with {0}', [email.reference_doctype])}\">\n\t\t\t\t<i class=\"fa fa-link fa-large\"></i>\n\t\t\t</a>` : '';\n\n\t\tconst communication_date = comment_when(email.communication_date, true);\n\t\tconst status =\n\t\t\temail.status == \"Closed\" ? `<span class=\"fa fa-check fa-large\" title=\"${__(email.status)}\"></span>` :\n\t\t\t\temail.status == \"Replied\" ? `<span class=\"fa fa-mail-reply fa-large\" title=\"${__(email.status)}\"></span>` :\n\t\t\t\t\t\"\";\n\n\t\treturn `\n\t\t\t<div class=\"level-item list-row-activity\">\n\t\t\t\t${link}\n\t\t\t\t${attachment}\n\t\t\t\t${status}\n\t\t\t\t${communication_date}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tget_inbox_filters() {\n\t\tvar email_account = this.email_account;\n\t\tvar default_filters = [\n\t\t\t[\"Communication\", \"communication_type\", \"=\", \"Communication\", true],\n\t\t\t[\"Communication\", \"communication_medium\", \"=\", \"Email\", true],\n\t\t];\n\t\tvar filters = [];\n\t\tif (email_account === \"Sent\") {\n\t\t\tfilters = default_filters.concat([\n\t\t\t\t[\"Communication\", \"sent_or_received\", \"=\", \"Sent\", true],\n\t\t\t\t[\"Communication\", \"email_status\", \"not in\", \"Spam,Trash\", true],\n\t\t\t]);\n\t\t} else if (in_list([\"Spam\", \"Trash\"], email_account)) {\n\t\t\tfilters = default_filters.concat([\n\t\t\t\t[\"Communication\", \"email_status\", \"=\", email_account, true],\n\t\t\t\t[\"Communication\", \"email_account\", \"in\", frappe.boot.all_accounts, true]\n\t\t\t]);\n\t\t} else {\n\t\t\tvar op = \"=\";\n\t\t\tif (email_account == \"All Accounts\") {\n\t\t\t\top = \"in\";\n\t\t\t\temail_account = frappe.boot.all_accounts;\n\t\t\t}\n\n\t\t\tfilters = default_filters.concat([\n\t\t\t\t[\"Communication\", \"sent_or_received\", \"=\", \"Received\", true],\n\t\t\t\t[\"Communication\", \"status\", \"=\", \"Open\", true],\n\t\t\t\t[\"Communication\", \"email_account\", op, email_account, true],\n\t\t\t\t[\"Communication\", \"email_status\", \"not in\", \"Spam,Trash\", true],\n\t\t\t]);\n\t\t}\n\n\t\treturn filters;\n\t}\n\n\tget_no_result_message() {\n\t\tvar email_account = this.email_account;\n\t\tvar args;\n\t\tif (in_list([\"Spam\", \"Trash\"], email_account)) {\n\t\t\treturn __(\"No {0} mail\", [email_account]);\n\t\t} else if (!email_account && !frappe.boot.email_accounts.length) {\n\t\t\t// email account is not configured\n\t\t\targs = {\n\t\t\t\tdoctype: \"Email Account\",\n\t\t\t\tmsg: __(\"No Email Account\"),\n\t\t\t\tlabel: __(\"New Email Account\"),\n\t\t\t};\n\t\t} else {\n\t\t\t// no sent mail\n\t\t\targs = {\n\t\t\t\tdoctype: \"Communication\",\n\t\t\t\tmsg: __(\"No Emails\"),\n\t\t\t\tlabel: __(\"Compose Email\")\n\t\t\t};\n\t\t}\n\n\t\tconst html = frappe.model.can_create(args.doctype) ?\n\t\t\t`<p>${args.msg}</p>\n\t\t\t<p>\n\t\t\t\t<button class=\"btn btn-primary btn-sm btn-new-doc\">\n\t\t\t\t\t${args.label}\n\t\t\t\t</button>\n\t\t\t</p>\n\t\t\t` :\n\t\t\t`<p>${ __(\"No Email Accounts Assigned\") }</p>`;\n\n\t\treturn `\n\t\t\t<div class=\"msg-box no-border\">\n\t\t\t\t${html}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tmake_new_doc() {\n\t\tif (!this.email_account && !frappe.boot.email_accounts.length) {\n\t\t\tfrappe.route_options = {\n\t\t\t\t'email_id': frappe.session.user_email\n\t\t\t};\n\t\t\tfrappe.new_doc('Email Account');\n\t\t} else {\n\t\t\tnew frappe.views.CommunicationComposer({\n\t\t\t\tdoc: {}\n\t\t\t});\n\t\t}\n\t}\n};\n","frappe.provide('frappe.views');\n\nfrappe.views.FileView = class FileView extends frappe.views.ListView {\n\tstatic load_last_view() {\n\t\tconst route = frappe.get_route();\n\t\tif (route.length === 2) {\n\t\t\tconst view_user_settings = frappe.get_user_settings('File', 'File');\n\t\t\tfrappe.set_route('List', 'File', view_user_settings.last_folder || frappe.boot.home_folder);\n\t\t\treturn true;\n\t\t}\n\t\treturn redirect_to_home_if_invalid_route();\n\t}\n\n\tget view_name() {\n\t\treturn 'File';\n\t}\n\n\tshow() {\n\t\tif (!redirect_to_home_if_invalid_route()) {\n\t\t\tsuper.show();\n\t\t}\n\t}\n\n\tsetup_view() {\n\t\tthis.render_header();\n\t\tthis.setup_events();\n\t}\n\n\tset_breadcrumbs() {\n\t\tconst route = frappe.get_route();\n\t\troute.splice(-1);\n\t\tconst last_folder = route[route.length - 1];\n\t\tif (last_folder === 'File') return;\n\n\t\tfrappe.breadcrumbs.add({\n\t\t\ttype: 'Custom',\n\t\t\tlabel: __('Home'),\n\t\t\troute: '#List/File/Home'\n\t\t});\n\t}\n\n\tsetup_defaults() {\n\t\treturn super.setup_defaults()\n\t\t\t.then(() => {\n\t\t\t\tthis.page_title = __('File Manager');\n\n\t\t\t\tconst route = frappe.get_route();\n\t\t\t\tthis.current_folder = route.slice(2).join('/');\n\t\t\t\tthis.filters = [['File', 'folder', '=', this.current_folder, true]];\n\t\t\t\tthis.order_by = this.view_user_settings.order_by || 'file_name asc';\n\n\t\t\t\tthis.menu_items = this.menu_items.concat(this.file_menu_items());\n\t\t\t});\n\t}\n\n\tfile_menu_items() {\n\t\tconst items = [\n\t\t\t{\n\t\t\t\tlabel: __('Home'),\n\t\t\t\taction: () => {\n\t\t\t\t\tfrappe.set_route('List', 'File', 'Home');\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('Cut'),\n\t\t\t\taction: () => {\n\t\t\t\t\tfrappe.file_manager.cut(this.get_checked_items(), this.current_folder);\n\t\t\t\t},\n\t\t\t\tclass: 'cut-menu-button hide'\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('Paste'),\n\t\t\t\taction: () => {\n\t\t\t\t\tfrappe.file_manager.paste(this.current_folder);\n\t\t\t\t},\n\t\t\t\tclass: 'paste-menu-button hide'\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('New Folder'),\n\t\t\t\taction: () => {\n\t\t\t\t\tfrappe.prompt(__('Name'), (values) => {\n\t\t\t\t\t\tif((values.value.indexOf(\"/\") > -1)) {\n\t\t\t\t\t\t\tfrappe.throw(__(\"Folder name should not include '/' (slash)\"));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst data =  {\n\t\t\t\t\t\t\tfile_name: values.value,\n\t\t\t\t\t\t\tfolder: this.current_folder\n\t\t\t\t\t\t};\n\t\t\t\t\t\tfrappe.call({\n\t\t\t\t\t\t\tmethod: \"frappe.core.doctype.file.file.create_new_folder\",\n\t\t\t\t\t\t\targs: data\n\t\t\t\t\t\t});\n\t\t\t\t\t}, __('Enter folder name'), __('Create'));\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('Toggle Grid View'),\n\t\t\t\taction: () => {\n\t\t\t\t\tfrappe.views.FileView.grid_view = !frappe.views.FileView.grid_view;\n\t\t\t\t\tthis.refresh();\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('Import Zip'),\n\t\t\t\taction: () => {\n\t\t\t\t\tnew frappe.ui.FileUploader({\n\t\t\t\t\t\tfolder: this.current_folder,\n\t\t\t\t\t\trestrictions: {\n\t\t\t\t\t\t\tallowed_file_types: ['.zip']\n\t\t\t\t\t\t},\n\t\t\t\t\t\ton_success: file => {\n\t\t\t\t\t\t\tfrappe.show_alert(__('Unzipping files...'));\n\t\t\t\t\t\t\tfrappe.call('frappe.core.doctype.file.file.unzip_file', { name: file.name })\n\t\t\t\t\t\t\t\t.then((r) => {\n\t\t\t\t\t\t\t\t\tif (r.message) {\n\t\t\t\t\t\t\t\t\t\tfrappe.show_alert(__('Unzipped {0} files', [r.message]));\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\n\t\treturn items;\n\t}\n\n\tset_fields() {\n\t\tthis.fields = this.meta.fields\n\t\t\t.filter(df => frappe.model.is_value_type(df.fieldtype) && !df.hidden)\n\t\t\t.map(df => df.fieldname)\n\t\t\t.concat(['name', 'modified', 'creation']);\n\t}\n\n\tprepare_data(data) {\n\t\tsuper.prepare_data(data);\n\n\t\tthis.data = this.data.map(d => this.prepare_datum(d));\n\n\t\t// Bring folders to the top\n\t\tconst { sort_by } = this.sort_selector;\n\t\tif (sort_by === 'file_name') {\n\t\t\tthis.data.sort((a, b) => {\n\t\t\t\tif (a.is_folder && !b.is_folder) {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\t\t\t\tif (!a.is_folder &&b.is_folder) {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\t\t\t\treturn 0;\n\t\t\t});\n\t\t}\n\t}\n\n\tprepare_datum(d) {\n\t\tlet icon_class = '';\n\t\tif (d.is_folder) {\n\t\t\ticon_class = \"octicon octicon-file-directory\";\n\t\t} else if (frappe.utils.is_image_file(d.file_name)) {\n\t\t\ticon_class = \"octicon octicon-file-media\";\n\t\t} else {\n\t\t\ticon_class = 'octicon octicon-file-text';\n\t\t}\n\n\t\tlet title = d.file_name || d.file_url;\n\t\ttitle = title.slice(0, 60);\n\t\td._title = title;\n\t\td.icon_class = icon_class;\n\n\t\td.subject_html = `\n\t\t\t<i class=\"${icon_class} text-muted\" style=\"width: 16px;\"></i>\n\t\t\t<span>${title}</span>\n\t\t\t${d.is_private ? '<i class=\"fa fa-lock fa-fw text-warning\"></i>' : ''}\n\t\t`;\n\t\treturn d;\n\t}\n\n\tbefore_render() {\n\t\tsuper.before_render();\n\t\tfrappe.model.user_settings.save('File', 'grid_view', frappe.views.FileView.grid_view);\n\t\tthis.save_view_user_settings({\n\t\t\tlast_folder: this.current_folder,\n\t\t});\n\t}\n\n\trender() {\n\t\tthis.$result.removeClass('file-grid');\n\t\tif (frappe.views.FileView.grid_view) {\n\t\t\tthis.render_grid_view();\n\t\t} else {\n\t\t\tsuper.render();\n\t\t}\n\t}\n\n\trender_grid_view() {\n\t\tlet html = '';\n\n\t\thtml = this.data.map(d => {\n\t\t\treturn `\n\t\t\t\t<a href=\"${this.get_route_url(d)}\">\n\t\t\t\t\t<div class=\"file-wrapper padding flex small\">\n\t\t\t\t\t\t<div class=\"file-icon text-muted\">\n\t\t\t\t\t\t\t<span class=\"${d.icon_class} mega-octicon\"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"file-title ellipsis\">${d._title}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</a>\n\t\t\t`;\n\t\t}).join('');\n\t\tthis.$result.addClass('file-grid');\n\t\tthis.$result.html(html);\n\t}\n\n\tget_breadcrumbs_html() {\n\t\tconst route = frappe.get_route();\n\t\tconst folders = route.slice(2);\n\n\t\treturn folders\n\t\t\t.map((folder, i) => {\n\t\t\t\tif (i === folders.length - 1) {\n\t\t\t\t\treturn `<span>${folder}</span>`;\n\t\t\t\t}\n\t\t\t\tconst route = folders.reduce((acc, curr, j) => {\n\t\t\t\t\tif (j <= i) {\n\t\t\t\t\t\tacc += '/' + curr;\n\t\t\t\t\t}\n\t\t\t\t\treturn acc;\n\t\t\t\t}, '#List/File');\n\n\t\t\t\treturn `<a href=\"${route}\">${folder}</a>`;\n\t\t\t})\n\t\t\t// only show last 3 breadcrumbs\n\t\t\t.slice(-3)\n\t\t\t.join('&nbsp;/&nbsp;');\n\t}\n\n\tget_header_html() {\n\t\tconst breadcrumbs_html = this.get_breadcrumbs_html();\n\n\t\tlet subject_html = `\n\t\t\t<div class=\"list-row-col list-subject level\">\n\t\t\t\t<input class=\"level-item list-check-all hidden-xs\" type=\"checkbox\" title=\"${__(\"Select All\")}\">\n\t\t\t\t<span class=\"level-item\">${breadcrumbs_html}</span>\n\t\t\t</div>\n\t\t\t<div class=\"list-row-col ellipsis hidden-xs\">\n\t\t\t\t<span>${__('Size')}</span>\n\t\t\t</div>\n\t\t\t<div class=\"list-row-col ellipsis hidden-xs\">\n\t\t\t\t<span>${__('Created')}</span>\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.get_header_html_skeleton(subject_html, '<span class=\"list-count\"></span>');\n\t}\n\n\tget_route_url(file) {\n\t\treturn file.is_folder ? '#List/File/' + file.name : this.get_form_link(file);\n\t}\n\n\tget_left_html(file) {\n\t\tfile = this.prepare_datum(file);\n\t\tconst file_size = file.file_size ? frappe.form.formatters.FileSize(file.file_size) : '';\n\t\tconst route_url = this.get_route_url(file);\n\n\t\tlet created_on;\n\t\tconst [date] = file.creation.split(' ');\n\t\tif (date === frappe.datetime.now_date()) {\n\t\t\tcreated_on = comment_when(file.creation);\n\t\t} else {\n\t\t\tcreated_on = frappe.datetime.str_to_user(date);\n\t\t}\n\n\t\treturn `\n\t\t\t<div class=\"list-row-col ellipsis list-subject level\">\n\t\t\t\t<input class=\"level-item list-row-checkbox hidden-xs\" type=\"checkbox\" data-name=\"${file.name}\">\n\t\t\t\t<span class=\"level-item  ellipsis\" title=\"${file.file_name}\">\n\t\t\t\t\t<a class=\"ellipsis\" href=\"${route_url}\" title=\"${file.file_name}\">\n\t\t\t\t\t\t${file.subject_html}\n\t\t\t\t\t</a>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<div class=\"list-row-col ellipsis hidden-xs text-muted\">\n\t\t\t\t<span>${file_size}</span>\n\t\t\t</div>\n\t\t\t<div class=\"list-row-col ellipsis hidden-xs text-muted\">\n\t\t\t\t<span>${created_on}</span>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tget_right_html(file) {\n\t\treturn `\n\t\t\t<div class=\"level-item list-row-activity\">\n\t\t\t\t${comment_when(file.modified)}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tsetup_events() {\n\t\tsuper.setup_events();\n\t\tthis.setup_drag_drop();\n\t}\n\n\tsetup_drag_drop() {\n\t\tthis.$result.on('dragenter dragover', false)\n\t\t\t.on('drop', e => {\n\t\t\t\tvar dataTransfer = e.originalEvent.dataTransfer;\n\t\t\t\tif (!(dataTransfer && dataTransfer.files && dataTransfer.files.length > 0)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\te.stopPropagation();\n\t\t\t\te.preventDefault();\n\n\t\t\t\tnew frappe.ui.FileUploader({\n\t\t\t\t\tfiles: dataTransfer.files,\n\t\t\t\t\tfolder: this.current_folder\n\t\t\t\t});\n\t\t\t});\n\t}\n\n\ttoggle_result_area() {\n\t\tsuper.toggle_result_area();\n\t\tthis.toggle_cut_paste_buttons();\n\t}\n\n\ton_row_checked() {\n\t\tsuper.on_row_checked();\n\t\tthis.toggle_cut_paste_buttons();\n\t}\n\n\ttoggle_cut_paste_buttons() {\n\t\t// paste btn\n\t\tconst $paste_btn = this.page.menu_btn_group.find('.paste-menu-button');\n\t\tconst hide = !frappe.file_manager.can_paste ||\n\t\t\tfrappe.file_manager.old_folder === this.current_folder;\n\n\t\tif (hide) {\n\t\t\t$paste_btn.addClass('hide');\n\t\t} else {\n\t\t\t$paste_btn.removeClass('hide');\n\t\t}\n\n\t\t// cut btn\n\t\tconst $cut_btn = this.page.menu_btn_group.find('.cut-menu-button');\n\t\tif (this.$checks && this.$checks.length > 0) {\n\t\t\t$cut_btn.removeClass('hide');\n\t\t} else {\n\t\t\t$cut_btn.addClass('hide');\n\t\t}\n\t}\n};\n\nfrappe.views.FileView.grid_view = frappe.get_user_settings('File').grid_view || false;\n\nfunction redirect_to_home_if_invalid_route() {\n\tconst route = frappe.get_route();\n\tif (route[2] === 'List') {\n\t\t// if the user somehow redirects to List/File/List\n\t\t// redirect back to Home\n\t\tfrappe.set_route('List', 'File', 'Home');\n\t\treturn true;\n\t}\n\treturn false;\n}\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.provide(\"frappe.treeview_settings\");\nfrappe.provide('frappe.views.trees');\nwindow.cur_tree = null;\n\nfrappe.views.TreeFactory = class TreeFactory extends frappe.views.Factory {\n\tmake(route) {\n\t\tfrappe.model.with_doctype(route[1], function() {\n\t\t\tvar options = {\n\t\t\t\tdoctype: route[1],\n\t\t\t\tmeta: frappe.get_meta(route[1])\n\t\t\t};\n\n\t\t\tif (!frappe.treeview_settings[route[1]] && !frappe.meta.get_docfield(route[1], \"is_group\")) {\n\t\t\t\tfrappe.msgprint(__(\"Tree view is not available for {0}\", [route[1]] ));\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t$.extend(options, frappe.treeview_settings[route[1]] || {});\n\t\t\tfrappe.views.trees[options.doctype] = new frappe.views.TreeView(options);\n\t\t});\n\t}\n}\n\nfrappe.views.TreeView = Class.extend({\n\tinit: function(opts) {\n\t\tvar me = this;\n\n\t\tthis.opts = {};\n\t\tthis.opts.get_tree_root = true;\n\t\tthis.opts.show_expand_all = true;\n\t\t$.extend(this.opts, opts);\n\t\tthis.doctype = opts.doctype;\n\t\tthis.args = {doctype: me.doctype};\n\t\tthis.page_name = frappe.get_route_str();\n\t\tthis.get_tree_nodes =  me.opts.get_tree_nodes || \"frappe.desk.treeview.get_children\";\n\n\t\tthis.get_permissions();\n\t\tthis.make_page();\n\t\tthis.make_filters();\n\t\tthis.root_value = null;\n\n\t\tif (me.opts.get_tree_root) {\n\t\t\tthis.get_root();\n\t\t}\n\n\t\tthis.onload();\n\t\tthis.set_menu_item();\n\t\tthis.set_primary_action();\n\t},\n\tget_permissions: function(){\n\t\tthis.can_read = frappe.model.can_read(this.doctype);\n\t\tthis.can_create = frappe.boot.user.can_create.indexOf(this.doctype) !== -1 ||\n\t\t\t\t\tfrappe.boot.user.in_create.indexOf(this.doctype) !== -1;\n\t\tthis.can_write = frappe.model.can_write(this.doctype);\n\t\tthis.can_delete = frappe.model.can_delete(this.doctype);\n\t},\n\tmake_page: function() {\n\t\tvar me = this;\n\t\tthis.parent = frappe.container.add_page(this.page_name);\n\t\tfrappe.ui.make_app_page({parent:this.parent, single_column:true});\n\n\t\tthis.page = this.parent.page;\n\t\tfrappe.container.change_to(this.page_name);\n\t\tfrappe.breadcrumbs.add(me.opts.breadcrumb || locals.DocType[me.doctype].module, me.doctype);\n\n\t\tthis.set_title();\n\n\t\tthis.page.main.css({\n\t\t\t\"min-height\": \"300px\",\n\t\t\t\"padding-bottom\": \"25px\"\n\t\t});\n\n\t\tif(this.opts.show_expand_all) {\n\t\t\tthis.page.add_inner_button(__('Expand All'), function() {\n\t\t\t\tme.tree.load_children(me.tree.root_node, true);\n\t\t\t});\n\t\t}\n\n\t\tif(this.opts.view_template) {\n\t\t\tvar row = $('<div class=\"row\"><div>').appendTo(this.page.main);\n\t\t\tthis.body = $('<div class=\"col-sm-6 col-xs-12\"></div>').appendTo(row);\n\t\t\tthis.node_view = $('<div class=\"col-sm-6 hidden-xs\"></div>').appendTo(row);\n\t\t} else {\n\t\t\tthis.body = this.page.main;\n\t\t}\n\t},\n\tset_title: function() {\n\t\tthis.page.set_title(this.opts.title || __('{0} Tree', [__(this.doctype)]));\n\t},\n\tonload: function() {\n\t\tvar me = this;\n\t\tthis.opts.onload && this.opts.onload(me);\n\t},\n\tmake_filters: function(){\n\t\tvar me = this;\n\t\tfrappe.treeview_settings.filters = []\n\t\t$.each(this.opts.filters || [], function(i, filter) {\n\t\t\tif(frappe.route_options && frappe.route_options[filter.fieldname]) {\n\t\t\t\tfilter.default = frappe.route_options[filter.fieldname]\n\t\t\t}\n\n\t\t\tif(!filter.disable_onchange) {\n\t\t\t\tfilter.change = function() {\n\t\t\t\t\tfilter.on_change && filter.on_change();\n\t\t\t\t\tvar val = this.get_value();\n\t\t\t\t\tme.args[filter.fieldname] = val;\n\t\t\t\t\tif (val) {\n\t\t\t\t\t\tme.root_label = val;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tme.root_label = me.opts.root_label;\n\t\t\t\t\t}\n\t\t\t\t\tme.set_title();\n\t\t\t\t\tme.make_tree();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tme.page.add_field(filter);\n\n\t\t\tif (filter.default) {\n\t\t\t\t$(\"[data-fieldname='\"+filter.fieldname+\"']\").trigger(\"change\");\n\t\t\t}\n\t\t})\n\t},\n\tget_root: function() {\n\t\tvar me = this;\n\t\tfrappe.call({\n\t\t\tmethod: me.get_tree_nodes,\n\t\t\targs: me.args,\n\t\t\tcallback: function(r) {\n\t\t\t\tif (r.message) {\n\t\t\t\t\tif (r.message.length > 1) {\n\t\t\t\t\t\tme.root_label = me.doctype;\n\t\t\t\t\t\tme.root_value = \"\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tme.root_label = r.message[0][\"value\"];\n\t\t\t\t\t\tme.root_value = me.root_label;\n\t\t\t\t\t}\n\t\t\t\t\tme.make_tree();\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t},\n\tmake_tree: function() {\n\t\t$(this.parent).find(\".tree\").remove();\n\n\t\tvar use_label = this.args[this.opts.root_label] || this.root_label || this.opts.root_label;\n\t\tvar use_value = this.root_value;\n\t\tif (use_value == null) {\n\t\t\tuse_value = use_label;\n\t\t}\n\t\tthis.tree = new frappe.ui.Tree({\n\t\t\tparent: this.body,\n\t\t\tlabel: use_label,\n\t\t\troot_value: use_value,\n\t\t\texpandable: true,\n\n\t\t\targs: this.args,\n\t\t\tmethod: this.get_tree_nodes,\n\n\t\t\t// array of button props: {label, condition, click, btnClass}\n\t\t\ttoolbar: this.get_toolbar(),\n\n\t\t\tget_label: this.opts.get_label,\n\t\t\ton_render: this.opts.onrender,\n\t\t\ton_click: (node) => { this.select_node(node); },\n\t\t});\n\n\t\tcur_tree = this.tree;\n\t\tthis.post_render();\n\t},\n\n\tpost_render: function() {\n\t\tvar me = this;\n\t\tme.opts.post_render && me.opts.post_render(me);\n\t},\n\n\tselect_node: function(node) {\n\t\tvar me = this;\n\t\tif(this.opts.click) {\n\t\t\tthis.opts.click(node);\n\t\t}\n\t\tif(this.opts.view_template) {\n\t\t\tthis.node_view.empty();\n\t\t\t$(frappe.render_template(me.opts.view_template,\n\t\t\t\t{data:node.data, doctype:me.doctype})).appendTo(this.node_view);\n\t\t}\n\t},\n\tget_toolbar: function() {\n\t\tvar me = this;\n\n\t\tvar toolbar = [\n\t\t\t{\n\t\t\t\tlabel:__(me.can_write? \"Edit\": \"Details\"),\n\t\t\t\tcondition: function(node) {\n\t\t\t\t\treturn !node.is_root && me.can_read;\n\t\t\t\t},\n\t\t\t\tclick: function(node) {\n\t\t\t\t\tfrappe.set_route(\"Form\", me.doctype, node.label);\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel:__(\"Add Child\"),\n\t\t\t\tcondition: function(node) {\n\t\t\t\t\treturn me.can_create && node.expandable && !node.hide_add;\n\t\t\t\t},\n\t\t\t\tclick: function(node) {\n\t\t\t\t\tme.new_node();\n\t\t\t\t},\n\t\t\t\tbtnClass: \"hidden-xs\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel:__(\"Rename\"),\n\t\t\t\tcondition: function(node) {\n\t\t\t\t\tlet allow_rename = true;\n\t\t\t\t\tif (me.doctype && frappe.get_meta(me.doctype)) {\n\t\t\t\t\t\tif(!frappe.get_meta(me.doctype).allow_rename) allow_rename = false;\n\t\t\t\t\t}\n\t\t\t\t\treturn !node.is_root && me.can_write && allow_rename;\n\t\t\t\t},\n\t\t\t\tclick: function(node) {\n\t\t\t\t\tfrappe.model.rename_doc(me.doctype, node.label, function(new_name) {\n\t\t\t\t\t\tnode.$tree_link.find('a').text(new_name);\n\t\t\t\t\t\tnode.label = new_name;\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tbtnClass: \"hidden-xs\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel:__(\"Delete\"),\n\t\t\t\tcondition: function(node) { return !node.is_root && me.can_delete; },\n\t\t\t\tclick: function(node) {\n\t\t\t\t\tfrappe.model.delete_doc(me.doctype, node.label, function() {\n\t\t\t\t\t\tnode.parent.remove();\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tbtnClass: \"hidden-xs\"\n\t\t\t}\n\t\t]\n\n\t\tif(this.opts.toolbar && this.opts.extend_toolbar) {\n\t\t\ttoolbar = toolbar.filter(btn => {\n\t\t\t\treturn !me.opts.toolbar.find(d => d[\"label\"]==btn[\"label\"]);\n\t\t\t});\n\t\t\treturn toolbar.concat(this.opts.toolbar)\n\t\t} else if (this.opts.toolbar && !this.opts.extend_toolbar) {\n\t\t\treturn this.opts.toolbar\n\t\t} else {\n\t\t\treturn toolbar\n\t\t}\n\t},\n\tnew_node: function() {\n\t\tvar me = this;\n\t\tvar node = me.tree.get_selected_node();\n\n\t\tif(!(node && node.expandable)) {\n\t\t\tfrappe.msgprint(__(\"Select a group node first.\"));\n\t\t\treturn;\n\t\t}\n\n\t\tthis.prepare_fields();\n\n\t\t// the dialog\n\t\tvar d = new frappe.ui.Dialog({\n\t\t\ttitle: __('New {0}',[__(me.doctype)]),\n\t\t\tfields: me.fields\n\t\t});\n\n\t\tvar args = $.extend({}, me.args);\n\t\targs[\"parent_\"+me.doctype.toLowerCase().replace(/ /g,'_')] = me.args[\"parent\"];\n\n\t\td.set_value(\"is_group\", 0);\n\t\td.set_values(args);\n\n\t\t// create\n\t\td.set_primary_action(__(\"Create New\"), function() {\n\t\t\tvar btn = this;\n\t\t\tvar v = d.get_values();\n\t\t\tif(!v) return;\n\n\t\t\tv.parent = node.label;\n\t\t\tv.doctype = me.doctype;\n\n\t\t\tif(node.is_root){\n\t\t\t\tv['is_root'] = node.is_root;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tv['is_root'] = false;\n\t\t\t}\n\n\t\t\td.hide();\n\t\t\tfrappe.dom.freeze(__('Creating {0}', [me.doctype]));\n\n\t\t\t$.extend(args, v)\n\t\t\treturn frappe.call({\n\t\t\t\tmethod: me.opts.add_tree_node || \"frappe.desk.treeview.add_node\",\n\t\t\t\targs: args,\n\t\t\t\tcallback: function(r) {\n\t\t\t\t\tif(!r.exc) {\n\t\t\t\t\t\tif(node.expanded) {\n\t\t\t\t\t\t\tme.tree.toggle_node(node);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tme.tree.load_children(node, true);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\talways: function() {\n\t\t\t\t\tfrappe.dom.unfreeze();\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t\td.show();\n\t},\n\tprepare_fields: function(){\n\t\tvar me = this;\n\n\t\tthis.fields = [\n\t\t\t{fieldtype:'Check', fieldname:'is_group', label:__('Group Node'),\n\t\t\t\tdescription: __(\"Further nodes can be only created under 'Group' type nodes\")}\n\t\t]\n\n\t\tif (this.opts.fields) {\n\t\t\tthis.fields = this.opts.fields;\n\t\t}\n\n\t\tthis.ignore_fields = this.opts.ignore_fields || [];\n\n\t\tvar mandatory_fields = $.map(me.opts.meta.fields, function(d) {\n\t\t\treturn (d.reqd || d.bold && !d.read_only) ? d : null });\n\n\t\tvar opts_field_names = this.fields.map(function(d) {\n\t\t\treturn d.fieldname\n\t\t})\n\n\t\tmandatory_fields.map(function(d) {\n\t\t\tif($.inArray(d.fieldname, me.ignore_fields) === -1 && $.inArray(d.fieldname, opts_field_names) === -1) {\n\t\t\t\tme.fields.push(d)\n\t\t\t}\n\t\t})\n\t},\n\tprint_tree: function() {\n\t\tif(!frappe.model.can_print(this.doctype)) {\n\t\t\tfrappe.msgprint(__(\"You are not allowed to print this report\"));\n\t\t\treturn false;\n\t\t}\n\t\tvar tree = $(\".tree:visible\").html();\n\t\tvar me = this;\n\t\tfrappe.ui.get_print_settings(false, function(print_settings) {\n\t\t\tvar title =  __(me.docname || me.doctype);\n\t\t\tfrappe.render_tree({title: title, tree: tree, print_settings:print_settings});\n\t\t\tfrappe.call({\n\t\t\t\tmethod: \"frappe.core.doctype.access_log.access_log.make_access_log\",\n\t\t\t\targs: {\n\t\t\t\t\tdoctype: me.doctype,\n\t\t\t\t\treport_name: me.page_name,\n\t\t\t\t\tpage: tree,\n\t\t\t\t\tmethod: 'Print'\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\tset_primary_action: function(){\n\t\tvar me = this;\n\t\tif (!this.opts.disable_add_node && this.can_create) {\n\t\t\tme.page.set_primary_action(__(\"New\"), function() {\n\t\t\t\tme.new_node();\n\t\t\t}, \"octicon octicon-plus\")\n\t\t}\n\t},\n\tset_menu_item: function(){\n\t\tvar me = this;\n\n\t\tthis.menu_items = [\n\t\t\t{\n\t\t\t\tlabel: __('View List'),\n\t\t\t\taction: function() {\n\t\t\t\t\tfrappe.set_route('List', me.doctype);\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('Print'),\n\t\t\t\taction: function() {\n\t\t\t\t\tme.print_tree();\n\t\t\t\t}\n\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('Refresh'),\n\t\t\t\taction: function() {\n\t\t\t\t\tme.make_tree();\n\t\t\t\t}\n\t\t\t},\n\t\t];\n\n\t\tif (me.opts.menu_items) {\n\t\t\tme.menu_items.push.apply(me.menu_items, me.opts.menu_items)\n\t\t}\n\n\t\t$.each(me.menu_items, function(i, menu_item){\n\t\t\tvar has_perm = true;\n\t\t\tif(menu_item[\"condition\"]) {\n\t\t\t\thas_perm = eval(menu_item[\"condition\"]);\n\t\t\t}\n\n\t\t\tif (has_perm) {\n\t\t\t\tme.page.add_menu_item(menu_item[\"label\"], menu_item[\"action\"]);\n\t\t\t}\n\t\t});\n\t}\n});\n\n\n\n\n\n\n\n\n","// Copyright (c) 2018, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\nfrappe.provide('frappe.views');\nfrappe.provide(\"frappe.interaction_settings\");\n\nfrappe.views.InteractionComposer = class InteractionComposer {\n\tconstructor(opts) {\n\t\t$.extend(this, opts);\n\t\tthis.make();\n\t}\n\n\tmake() {\n\t\tlet me = this;\n\t\tme.dialog = new frappe.ui.Dialog({\n\t\t\ttitle: (me.title || me.subject || __(\"New Activity\")),\n\t\t\tno_submit_on_enter: true,\n\t\t\tfields: me.get_fields(),\n\t\t\tprimary_action_label: __('Create'),\n\t\t\tprimary_action: function() {\n\t\t\t\tme.create_action();\n\t\t\t}\n\t\t});\n\n\t\t$(document).on(\"upload_complete\", function(event, attachment) {\n\t\t\tif(me.dialog.display) {\n\t\t\t\tlet wrapper = $(me.dialog.fields_dict.select_attachments.wrapper);\n\n\t\t\t\t// find already checked items\n\t\t\t\tlet checked_items = wrapper.find('[data-file-name]:checked').map(function() {\n\t\t\t\t\treturn $(this).attr(\"data-file-name\");\n\t\t\t\t});\n\n\t\t\t\t// reset attachment list\n\t\t\t\tme.render_attach();\n\n\t\t\t\t// check latest added\n\t\t\t\tchecked_items.push(attachment.name);\n\n\t\t\t\t$.each(checked_items, function(i, filename) {\n\t\t\t\t\twrapper.find('[data-file-name=\"'+ filename +'\"]').prop(\"checked\", true);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\tme.prepare();\n\t\tme.dialog.show();\n\t}\n\n\tget_fields() {\n\t\tlet me = this;\n\t\tlet interaction_docs = Object.keys(get_doc_mappings());\n\n\t\tlet fields = [\n\t\t\t{label:__(\"Reference\"), fieldtype:\"Select\",\n\t\t\t\tfieldname:\"interaction_type\", options: interaction_docs,\n\t\t\t\treqd: 1,\n\t\t\t\tonchange: () => {\n\t\t\t\t\tlet values = me.get_values();\n\t\t\t\t\tme.get_fields().forEach(field => {\n\t\t\t\t\t\tif (field.fieldname != \"interaction_type\") {\n\t\t\t\t\t\t\tme.dialog.set_df_property(field.fieldname, \"reqd\", 0);\n\t\t\t\t\t\t\tme.dialog.set_df_property(field.fieldname, \"hidden\", 0);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tme.set_reqd_hidden_fields(values);\n\t\t\t\t\tme.get_event_categories();\n\t\t\t\t}\n\t\t\t},\n\t\t\t{label:__(\"Category\"), fieldtype:\"Select\",\n\t\t\t\tfieldname:\"category\", options: \"\", hidden: 1},\n\t\t\t{label:__(\"Public\"), fieldtype:\"Check\",\n\t\t\t\tfieldname:\"public\", default: \"1\"},\n\t\t\t{fieldtype: \"Column Break\"},\n\t\t\t{label:__(\"Date\"), fieldtype:\"Datetime\",\n\t\t\t\tfieldname:\"due_date\"},\n\t\t\t{label:__(\"Assigned To\"), fieldtype:\"Link\",\n\t\t\t\tfieldname:\"assigned_to\", options:\"User\"},\n\t\t\t{fieldtype: \"Section Break\"},\n\t\t\t{label:__(\"Summary\"), fieldtype:\"Data\",\n\t\t\t\tfieldname:\"summary\"},\n\t\t\t{fieldtype: \"Section Break\"},\n\t\t\t{fieldtype:\"Text Editor\", fieldname:\"description\"},\n\t\t\t{fieldtype: \"Section Break\"},\n\t\t\t{label:__(\"Select Attachments\"), fieldtype:\"HTML\",\n\t\t\t\tfieldname:\"select_attachments\"}\n\t\t];\n\n\t\treturn fields;\n\n\t}\n\n\tget_event_categories() {\n\t\tlet me = this;\n\t\tfrappe.model.with_doctype('Event', () => {\n\t\t\tlet categories = frappe.meta.get_docfield(\"Event\", \"event_category\").options.split(\"\\n\");\n\t\t\tme.dialog.get_input(\"category\").empty().add_options(categories);\n\t\t});\n\t}\n\n\tprepare() {\n\t\tthis.setup_attach();\n\t}\n\n\tset_reqd_hidden_fields(values) {\n\t\tlet me = this;\n\t\tif (values&&\"interaction_type\" in values) {\n\t\t\tlet doc_mapping = get_doc_mappings();\n\t\t\tdoc_mapping[values.interaction_type][\"reqd_fields\"].forEach(value => {\n\t\t\t\tme.dialog.set_df_property(value, 'reqd', 1);\n\t\t\t});\n\n\t\t\tdoc_mapping[values.interaction_type][\"hidden_fields\"].forEach(value => {\n\t\t\t\tme.dialog.set_df_property(value, 'hidden', 1);\n\t\t\t});\n\t\t}\n\t}\n\n\tsetup_attach() {\n\t\tvar fields = this.dialog.fields_dict;\n\t\tvar attach = $(fields.select_attachments.wrapper);\n\n\t\tif (!this.attachments) {\n\t\t\tthis.attachments = [];\n\t\t}\n\n\t\tlet args = {\n\t\t\tfolder: 'Home/Attachments',\n\t\t\ton_success: attachment => this.attachments.push(attachment)\n\t\t};\n\n\t\tif (this.frm) {\n\t\t\targs = {\n\t\t\t\tdoctype: this.frm.doctype,\n\t\t\t\tdocname: this.frm.docname,\n\t\t\t\tfolder: 'Home/Attachments',\n\t\t\t\ton_success: attachment => {\n\t\t\t\t\tthis.frm.attachments.attachment_uploaded(attachment);\n\t\t\t\t\tthis.render_attach();\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\t$(\"<h6 class='text-muted add-attachment' style='margin-top: 12px; cursor:pointer;'>\"\n\t\t\t+__(\"Select Attachments\")+\"</h6><div class='attach-list'></div>\\\n\t\t\t<p class='add-more-attachments'>\\\n\t\t\t<a class='text-muted small'><i class='octicon octicon-plus' style='font-size: 12px'></i> \"\n\t\t\t+__(\"Add Attachment\")+\"</a></p>\").appendTo(attach.empty());\n\t\tattach\n\t\t\t.find(\".add-more-attachments a\")\n\t\t\t.on('click',() => new frappe.ui.FileUploader(args));\n\t\tthis.render_attach();\n\t}\n\n\trender_attach(){\n\t\tlet fields = this.dialog.fields_dict;\n\t\tlet attach = $(fields.select_attachments.wrapper).find(\".attach-list\").empty();\n\n\t\tlet files = [];\n\t\tif (this.attachments && this.attachments.length) {\n\t\t\tfiles = files.concat(this.attachments);\n\t\t}\n\t\tif (cur_frm) {\n\t\t\tfiles = files.concat(cur_frm.get_files());\n\t\t}\n\n\t\tif(files.length) {\n\t\t\t$.each(files, function(i, f) {\n\t\t\t\tif (!f.file_name) return;\n\t\t\t\tf.file_url = frappe.urllib.get_full_url(f.file_url);\n\n\t\t\t\t$(repl('<p class=\"checkbox\">'\n\t\t\t\t\t+\t'<label><span><input type=\"checkbox\" data-file-name=\"%(name)s\"></input></span>'\n\t\t\t\t\t+\t\t'<span class=\"small\">%(file_name)s</span>'\n\t\t\t\t\t+\t' <a href=\"%(file_url)s\" target=\"_blank\" class=\"text-muted small\">'\n\t\t\t\t\t+\t\t'<i class=\"fa fa-share\" style=\"vertical-align: middle; margin-left: 3px;\"></i>'\n\t\t\t\t\t+ '</label></p>', f))\n\t\t\t\t\t.appendTo(attach);\n\t\t\t});\n\t\t}\n\t}\n\n\tcreate_action() {\n\t\tlet me = this;\n\t\tlet btn = me.dialog.get_primary_btn();\n\n\t\tlet form_values = this.get_values();\n\t\tif(!form_values) return;\n\n\t\tlet selected_attachments =\n\t\t\t$.map($(me.dialog.wrapper).find(\"[data-file-name]:checked\"), function(element){\n\t\t\t\treturn $(element).attr(\"data-file-name\");\n\t\t\t});\n\n\t\tme.create_interaction(btn, form_values, selected_attachments);\n\t}\n\n\tget_values() {\n\t\tlet me = this;\n\t\tlet values = this.dialog.get_values(true);\n\t\tif (values) {\n\t\t\tvalues[\"reference_doctype\"] = me.frm.doc.doctype;\n\t\t\tvalues[\"reference_document\"] = me.frm.doc.name;\n\t\t}\n\n\t\treturn values;\n\t}\n\n\tcreate_interaction(btn, form_values, selected_attachments) {\n\t\tlet me = this;\n\t\tme.dialog.hide();\n\n\t\tlet field_map = get_doc_mappings();\n\t\tlet interaction_values = {};\n\t\tObject.keys(form_values).forEach(value => {\n\t\t\tinteraction_values[field_map[form_values.interaction_type][\"field_map\"][value]] = form_values[value];\n\t\t});\n\n\t\tif (\"event_type\" in interaction_values){\n\t\t\tinteraction_values[\"event_type\"] = (form_values.public == 1) ? \"Public\" : \"Private\";\n\t\t}\n\t\tif (interaction_values[\"doctype\"] == \"Event\") {\n\t\t\tinteraction_values[\"event_participants\"] = [{\"reference_doctype\": form_values.reference_doctype,\n\t\t\t\t\"reference_docname\": form_values.reference_document}];\n\t\t}\n\t\tif (!(\"owner\" in interaction_values)){\n\t\t\tinteraction_values[\"owner\"] = frappe.session.user;\n\t\t}\n\t\treturn frappe.call({\n\t\t\tmethod:\"frappe.client.insert\",\n\t\t\targs: { doc: interaction_values},\n\t\t\tbtn: btn,\n\t\t\tcallback: function(r) {\n\t\t\t\tif(!r.exc) {\n\t\t\t\t\tfrappe.show_alert({\n\t\t\t\t\t\tmessage: __(\"{0} created successfully\", [form_values.interaction_type]),\n\t\t\t\t\t\tindicator: 'green'\n\t\t\t\t\t});\n\t\t\t\t\tif (\"assigned_to\" in form_values) {\n\t\t\t\t\t\tme.assign_document(r.message, form_values[\"assigned_to\"]);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (selected_attachments) {\n\t\t\t\t\t\tme.add_attachments(r.message, selected_attachments);\n\t\t\t\t\t}\n\t\t\t\t\tif (cur_frm) {\n\t\t\t\t\t\t// clear input\n\t\t\t\t\t\tcur_frm.timeline.input && cur_frm.timeline.input.val(\"\");\n\t\t\t\t\t\tcur_frm.reload_doc();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfrappe.msgprint(__(\"There were errors while creating the document. Please try again.\"));\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t}\n\n\tassign_document(doc, assignee) {\n\t\tif (doc.doctype != \"ToDo\") {\n\t\t\tfrappe.call({\n\t\t\t\tmethod:'frappe.desk.form.assign_to.add',\n\t\t\t\targs: {\n\t\t\t\t\tdoctype: doc.doctype,\n\t\t\t\t\tname: doc.name,\n\t\t\t\t\tassign_to: assignee,\n\t\t\t\t},\n\t\t\t\tcallback:function(r) {\n\t\t\t\t\tif(!r.exc) {\n\t\t\t\t\t\tfrappe.show_alert({\n\t\t\t\t\t\t\tmessage: __(\"The document has been assigned to {0}\", [assignee]),\n\t\t\t\t\t\t\tindicator: 'green'\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfrappe.show_alert({\n\t\t\t\t\t\t\tmessage: __(\"The document could not be correctly assigned\"),\n\t\t\t\t\t\t\tindicator: 'orange'\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t}\n\n\tadd_attachments(doc, attachments) {\n\t\tfrappe.call({\n\t\t\tmethod:'frappe.utils.file_manager.add_attachments',\n\t\t\targs: {\n\t\t\t\tdoctype: doc.doctype,\n\t\t\t\tname: doc.name,\n\t\t\t\tattachments: JSON.stringify(attachments)\n\t\t\t},\n\t\t\tcallback:function(r) {\n\t\t\t\tif(!r.exc) {\n\t\t\t\t\treturn;\n\t\t\t\t} else {\n\t\t\t\t\tfrappe.show_alert({\n\t\t\t\t\t\tmessage: __(\"The attachments could not be correctly linked to the new document\"),\n\t\t\t\t\t\tindicator: 'orange'\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t}\n};\n\nfunction get_doc_mappings() {\n\tconst doc_map = {\n\t\t\"Event\": {\n\t\t\t\"field_map\": {\n\t\t\t\t\"interaction_type\": \"doctype\",\n\t\t\t\t\"summary\": \"subject\",\n\t\t\t\t\"description\": \"description\",\n\t\t\t\t\"category\": \"event_category\",\n\t\t\t\t\"due_date\": \"starts_on\",\n\t\t\t\t\"public\": \"event_type\"\n\t\t\t},\n\t\t\t\"reqd_fields\": [\"summary\", \"due_date\"],\n\t\t\t\"hidden_fields\": []\n\t\t} ,\n\t\t\"ToDo\": {\n\t\t\t\"field_map\": {\n\t\t\t\t\"interaction_type\": \"doctype\",\n\t\t\t\t\"description\": \"description\",\n\t\t\t\t\"due_date\": \"date\",\n\t\t\t\t\"reference_doctype\": \"reference_type\",\n\t\t\t\t\"reference_document\": \"reference_name\",\n\t\t\t\t\"assigned_to\": \"owner\"\n\t\t\t},\n\t\t\t\"reqd_fields\": [\"description\"],\n\t\t\t\"hidden_fields\": [\"public\", \"category\"]\n\t\t}\n\t};\n\n\treturn doc_map;\n}"],"names":["let","const","this","item","idx","saved_filters","$check"],"mappings":"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"}